<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Detailed_Items_List class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>Detailed_Items_List  Class Reference</h1><code>#include &lt;<a class="el" href="dil2al_8hh-source.html">dil2al.hh</a>&gt;</code>
<p>
<p>Inheritance diagram for Detailed_Items_List:
<p><center><img src="classDetailed__Items__List.png" usemap="#Detailed_Items_List_map" border="0"></center>
<map name="Detailed_Items_List_map">
<area href="classText__File__Buffers.html" alt="Text_File_Buffers" shape="rect" coords="0,0,119,24">
</map>
<a href="classDetailed__Items__List-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a0">Entry_Has_Dependencies</a> (const <a class="el" href="classDIL__entry.html">DIL_entry</a> *de, bool taggedonly=<a class="el" href="templates_8defines_8hh.html#a5">false</a>)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a1">Get_Project_Data</a> (<a class="el" href="classString.html">String</a> &amp;dildata, int projloc, <a class="el" href="classString.html">String</a> &amp;hrefurl, <a class="el" href="classString.html">String</a> &amp;hreftext, <a class="el" href="classDIL__entry__parameters.html">DIL_entry_parameters</a> &amp;dilentrypars)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a> (<a class="el" href="classString.html">String</a> *dilid=NULL)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a> (bool gettext=<a class="el" href="templates_8defines_8hh.html#a5">false</a>, bool cacherefresh=<a class="el" href="templates_8defines_8hh.html#a5">false</a>)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classDIL__entry.html">DIL_entry</a> **&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a4">Sort_by_Target_Date</a> (bool gettext=<a class="el" href="templates_8defines_8hh.html#a5">false</a>)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a5">Write_to_File</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#a6">Binary_Cache_Diagnostic</a> ()</td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classPLLRoot.html">PLLRoot</a>&lt; <a class="el" href="classDIL__entry.html">DIL_entry</a> &gt;&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#m0">list</a></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#b0">Write_to_Binary_Cache</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#b1">Read_from_Binary_Cache</a> (<a class="el" href="classString.html">String</a> *dilid=NULL)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#b2">Write_Topical_to_Binary_Cache</a> (int diln, <a class="el" href="classPLLRoot.html">PLLRoot</a>&lt; <a class="el" href="classDIL__entry__Pointer.html">DIL_entry_Pointer</a> &gt; &amp;dep, bool gottext)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="classDetailed__Items__List.html#b3">Read_Topical_from_Binary_Cache</a> (int diln, bool gettext)</td></tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a6" doxytag="Detailed_Items_List::Binary_Cache_Diagnostic"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Binary_Cache_Diagnostic </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01643">1643</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l01108">DIL_entry::Binary_Cache_Diagnostic</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>(), <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; DIL_entry &gt;::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="templates_8classic_8hh-source.html#l00060">PLLHandle&lt; DIL_entry &gt;::Next</a>(), <a class="el" href="utilities_8cc-source.html#l01487">Read_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l01554">Read_Topical_from_Binary_Cache</a>(), <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l01416">Write_to_Binary_Cache</a>().
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00348">Diagnostic</a>().
<p>
<div class="fragment"><pre>01643                                                   {
01644   <font class="comment">// test if the quick load cache process works reliably</font>
01645   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al::Detailed_Items_List::Binary_Cache_Diagnostic()\nTesting reliability of quick load cache process\n(Note that this is a good integrity test if modifications of the dilentry\nobjects necessitate corresponding modifications of the caching functions.)\n  flag `usequickloadcache' is "</font>;
01646   <font class="keywordflow">if</font> (usequickloadcache) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"set\n"</font>;
01647   <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"not set\n"</font>;
01648   <font class="comment">// parse the HTML file</font>
01649   <font class="keywordtype">bool</font> _usequickloadcache = usequickloadcache;
01650   usequickloadcache = <font class="keyword">false</font>;
01651   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Parsing authoritative DIL parameters file\n"</font>;
01652   <font class="keywordflow">if</font> (<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>()&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01653   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Parsing authoritative DIL topical content files and writing to binary cache files\n"</font>;
01654   usequickloadcache = <font class="keyword">true</font>;
01655   <font class="keywordflow">if</font> (<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>,<font class="keyword">true</font>)&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01656   <font class="comment">// save to cache</font>
01657   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Writing to binary cache file "</font> &lt;&lt; cacheidfile &lt;&lt; <font class="charliteral">'\n'</font>;
01658   <font class="keywordflow">if</font> (!<a class="code" href="classDetailed__Items__List.html#b0">Write_to_Binary_Cache</a>()) {
01659     <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write to binary cache file "</font> &lt;&lt; cacheidfile &lt;&lt; <font class="stringliteral">"in Detailed_Items_List::Binary_Cache_Diagnostic()\n"</font>;
01660     <font class="keywordflow">return</font> <font class="keyword">false</font>;
01661   }
01662   <font class="comment">// load from cache into temporary list</font>
01663   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Reading from binary cache file into temporary list for comparison\n"</font>;
01664   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> tmplist;
01665   <font class="keywordflow">if</font> (!tmplist.<a class="code" href="classDetailed__Items__List.html#b1">Read_from_Binary_Cache</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01666   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> n = 0; (dil[n]); n++) <font class="keywordflow">if</font> (!tmplist.<a class="code" href="classDetailed__Items__List.html#b3">Read_Topical_from_Binary_Cache</a>(n,<font class="keyword">true</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01667   <font class="comment">// compare the original and temporary lists</font>
01668   <font class="comment">//   start of this object test</font>
01669   <font class="keywordtype">int</font> testedbytes = <font class="keyword">sizeof</font>(Text_File_Buffers);
01670   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Original length   = "</font> &lt;&lt; <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>() &lt;&lt; <font class="charliteral">'\n'</font>;
01671   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Cache read length = "</font> &lt;&lt; tmplist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>() &lt;&lt; <font class="charliteral">'\n'</font>;
01672   testedbytes += <font class="keyword">sizeof</font>(list);
01673   <font class="comment">//   end of this object test</font>
01674   <font class="keywordflow">if</font> (testedbytes!=<font class="keyword">sizeof</font>(Detailed_Items_List)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"*** testedbytes!=sizeof(Detailed_Items_List)\n"</font>;
01675   <font class="keywordflow">for</font> (<a class="code" href="classDIL__entry.html">DIL_entry</a> * e = <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(), * c = tmplist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(); ((e) &amp;&amp; (c)); e = e-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>(), c = c-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>()) <font class="keywordflow">if</font> (!e-&gt;<a class="code" href="classDIL__entry.html#a26">Binary_Cache_Diagnostic</a>(c,testedbytes)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01676   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Total bytes tested: "</font> &lt;&lt; testedbytes &lt;&lt; <font class="charliteral">'\n'</font>;
01677   usequickloadcache = _usequickloadcache;
01678   <font class="keywordflow">return</font> <font class="keyword">true</font>;
01679 }
</pre></div>    </td>
  </tr>
</table>
<a name="a0" doxytag="Detailed_Items_List::Entry_Has_Dependencies"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Entry_Has_Dependencies </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classDIL__entry.html">DIL_entry</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>de</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>taggedonly</em> = <a class="el" href="templates_8defines_8hh.html#a5">false</a></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01131">1131</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, and <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>.
<p>
Referenced by <a class="el" href="diladmin_8cc-source.html#l01467">Tabbed_FORM_DIL_Hierarchy_full</a>().
<p>
<div class="fragment"><pre>01131                                                                                               {
01132   <font class="comment">// if taggedonly==true then only dependencies with a set semaphore count</font>
01133   <font class="keywordflow">if</font> (!de) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01134   <font class="keywordflow">if</font> (taggedonly) {
01135     <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <font class="keywordflow">if</font> (e-&gt;Get_Semaphore()&gt;0) <font class="keywordflow">if</font> (e-&gt;Is_Direct_Dependency_Of(de)) <font class="keywordflow">return</font> <font class="keyword">true</font>;
01136   } <font class="keywordflow">else</font> {
01137     <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <font class="keywordflow">if</font> (e-&gt;Is_Direct_Dependency_Of(de)) <font class="keywordflow">return</font> <font class="keyword">true</font>;
01138   }
01139   <font class="keywordflow">return</font> <font class="keyword">false</font>;
01140 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="Detailed_Items_List::Get_All_DIL_ID_File_Parameters"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int Detailed_Items_List::Get_All_DIL_ID_File_Parameters </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>dilid</em> = NULL          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01189">1189</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l01943">absurl</a>(), <a class="el" href="dil2al_8hh-source.html#l00571">DIL_AL_List::al</a>, <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="dil2al_8hh-source.html#l00581">DIL_AL_List::bounded</a>, <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00104">PLLRoot&lt; DIL_entry &gt;::clear</a>(), <a class="el" href="dil2al_8hh-source.html#l00531">DIL_Topical_List::dil</a>, <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="dil2al_8hh-source.html#l00076">filetitle_t::file</a>, <a class="el" href="utilities_8cc-source.html#l02101">get_file_in_list</a>(), <a class="el" href="utilities_8cc-source.html#l01142">Get_Project_Data</a>(), <a class="el" href="utilities_8cc-source.html#l02483">HTML_get_href</a>(), <a class="el" href="utilities_8cc-source.html#l02455">HTML_get_table_cell</a>(), <a class="el" href="utilities_8cc-source.html#l02530">HTML_remove_comments</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; DIL_entry &gt;::length</a>(), <a class="el" href="classPLLRoot.html#a8">PLLRoot&lt; DIL_entry &gt;::link_before</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="BigRegex_8cc-source.html#l00111">BigRegex::match_info</a>(), <a class="el" href="dil2al_8hh-source.html#l00663">DIL_entry::parameters</a>, <a class="el" href="dil2al_8hh-source.html#l00583">DIL_AL_List::priority</a>, <a class="el" href="dil2al_8hh-source.html#l00670">DIL_entry::Projects</a>(), <a class="el" href="utilities_8cc-source.html#l01487">Read_from_Binary_Cache</a>(), <a class="el" href="dil2al_8hh-source.html#l00578">DIL_AL_List::relevance</a>, <a class="el" href="dil2al_8hh-source.html#l00532">DIL_Topical_List::relevance</a>, <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>, <a class="el" href="BigRegex_8cc-source.html#l00118">BigRegex::subpos</a>(), <a class="el" href="dil2al_8hh-source.html#l00587">DIL_AL_List::targetdate</a>(), <a class="el" href="dil2al_8hh-source.html#l00207">Text_File_Buffers::tf</a>, <a class="el" href="dil2al_8hh-source.html#l00208">Text_File_Buffers::tfname</a>, <a class="el" href="dil2al_8hh-source.html#l00209">Text_File_Buffers::tfnum</a>, <a class="el" href="dil2al_8hh-source.html#l00077">filetitle_t::title</a>, <a class="el" href="dil2al_8hh-source.html#l00629">DIL_entry_parameters::topic_append</a>(), <a class="el" href="dil2al_8hh-source.html#l00669">DIL_entry::Topics</a>(), <a class="el" href="dil2al_8hh-source.html#l00580">DIL_AL_List::unbounded</a>, <a class="el" href="dil2al_8hh-source.html#l00582">DIL_AL_List::urgency</a>, <a class="el" href="dil2al_8hh-source.html#l00458">DIL_ID::valid</a>(), <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l01416">Write_to_Binary_Cache</a>().
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), <a class="el" href="diladmin_8cc-source.html#l00705">generate_modify_element_FORM_interface</a>(), <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>(), <a class="el" href="diladmin_8cc-source.html#l00976">modify_DIL_entry_target_date</a>(), <a class="el" href="diladmin_8cc-source.html#l01083">modify_DIL_group_target_dates</a>(), <a class="el" href="diladmin_8cc-source.html#l00776">modify_element_through_FORM_interface</a>(), <a class="el" href="alcomp_8cc-source.html#l01359">refresh_quick_load_cache</a>(), <a class="el" href="diladmin_8cc-source.html#l01424">Tabbed_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l01488">Tabbed_FORM_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l01443">Tabbed_HTML_DIL_Hierarchy</a>(), and <a class="el" href="diladmin_8cc-source.html#l00849">update_DIL_entry_elements</a>().
<p>
<div class="fragment"><pre>01189                                                                              {
01190 <font class="comment">// Obtain parameters from the DIL by ID file for all DIL entries</font>
01191 <font class="comment">// or for the specific DIL entry dilid if dilid!=NULL</font>
01192 <font class="comment">// Note: deletes any previous linked list at listhead and refreshes</font>
01193 <font class="comment">// the DIL status</font>
01194 
01195 <font class="comment">/*</font>
01196 <font class="comment">INCREASING PARSING SPEED:</font>
01197 <font class="comment"></font>
01198 <font class="comment">A.</font>
01199 <font class="comment"></font>
01200 <font class="comment">To insure that the functionality is preserved, first properly comment each</font>
01201 <font class="comment">step done in the current version of the code.</font>
01202 <font class="comment"></font>
01203 <font class="comment">B.</font>
01204 <font class="comment"></font>
01205 <font class="comment">1. Can translate all A-Z characters to a-z to avoid capitalization issues.</font>
01206 <font class="comment"></font>
01207 <font class="comment">2. Can search for "&lt;!--", then "--&gt;", then test if find right tag between.</font>
01208 <font class="comment">   You can also still use the Regex search here, since it is only one search.</font>
01209 <font class="comment"></font>
01210 <font class="comment">3. Can do the same for the end tag and copy that part of the text for parsing.</font>
01211 <font class="comment"></font>
01212 <font class="comment">4. Can find all chunks between &lt;TR&gt; &lt;TR&gt; and copy each to a separate String.</font>
01213 <font class="comment"></font>
01214 <font class="comment">5. Try to avoid Regex operations wherever possible.</font>
01215 <font class="comment">*/</font>
01216 
01217         <font class="keywordflow">if</font> (<a class="code" href="classDetailed__Items__List.html#b1">Read_from_Binary_Cache</a>(dilid)) <font class="keywordflow">return</font> <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
01218 
01219         <font class="keywordtype">int</font> ididx, idloc, entrynum = 0;
01220         <font class="keywordflow">if</font> ((ididx=<a class="code" href="utilities_8cc.html#a40">get_file_in_list</a>(idfile,<a class="code" href="classText__File__Buffers.html#m0">tf</a>,<a class="code" href="classText__File__Buffers.html#m1">tfname</a>,<a class="code" href="classText__File__Buffers.html#m2">tfnum</a>))&lt;0) <font class="keywordflow">return</font> -1;
01221         <font class="keywordflow">if</font> ((idloc=<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]*dil2al:[      ]*DIL ID begin[         ]*--[&gt;]"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&lt;0) <font class="keywordflow">return</font> -1;
01222         <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a16">clear</a>();
01223         <font class="comment">// find next entry and obtain ID</font>
01224         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"PARs: "</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush();
01225         <a class="code" href="classString.html">String</a> idfilter(<font class="stringliteral">"[^\"]*"</font>); <font class="keywordflow">if</font> (dilid) idfilter = (*dilid);
01226         <a class="code" href="classBigRegex.html">BigRegex</a> entryid((<font class="stringliteral">"[&lt;]TR[&gt;][^&lt;]*[&lt;]TD[&gt;][^&lt;]*[&lt;]A[      ]+NAME[         ]*=[    ]*\"\\("</font>+idfilter)+<font class="stringliteral">"\\)\"[^\n]*\n"</font>);
01227         <font class="keywordflow">while</font> ((idloc=<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].index(entryid,<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,idloc))&gt;=0) {
01228                 <font class="keywordtype">int</font> sp,ml;
01229                 <font class="keywordflow">if</font> (!entryid.<a class="code" href="classBigRegex.html#a4">match_info</a>(sp,ml,1)) {
01230                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing ID in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01231                         <font class="keywordflow">continue</font>;
01232                 }
01233                 <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = <font class="keyword">new</font> <a class="code" href="classDIL__entry.html">DIL_entry</a>(*<font class="keyword">this</font>,<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].at(sp,ml)); <font class="comment">// create candidate entry</font>
01234                 <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__ID.html#a17">valid</a>()) {
01235                         <font class="keyword">delete</font> de;
01236                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Invalid ID in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01237                         <font class="keywordflow">continue</font>;
01238                 }
01239 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01240 <font class="preprocessor"></font>                <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"ID = "</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\n'</font>;
01241 <font class="preprocessor">#endif</font>
01242 <font class="preprocessor"></font>                <font class="comment">// find comma separated list of topics</font>
01243                 <a class="code" href="classString.html">String</a> topicline(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].at(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[&gt;][^\n]*\n"</font>),idloc)); <font class="comment">// topic data line</font>
01244                 <font class="keywordflow">if</font> (topicline.<a class="code" href="classString.html#a105">length</a>()==0) {
01245                         <font class="keyword">delete</font> de;
01246                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing topical DIL reference in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01247                         <font class="keywordflow">continue</font>;
01248                 }
01249                 idloc += topicline.<a class="code" href="classString.html#a105">length</a>(); <font class="comment">// position after data line</font>
01250                 de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a> = <font class="keyword">new</font> <a class="code" href="classDIL__entry__parameters.html">DIL_entry_parameters</a>(*de,entryid.<a class="code" href="classBigRegex.html#a5">subpos</a>());
01251                 <font class="keywordtype">int</font> topicloc = 0, numtopics = 0;
01252                 <a class="code" href="classBigRegex.html">BigRegex</a> entrytopic(<font class="stringliteral">"\\([&lt;]TD[&gt;]\\|,\\)[^&lt;]*[&lt;]A[       ]+HREF[         ]*=[    ]*\"\\([^#]*\\)#[^\"]*\"[^&gt;]*[&gt;]\\([^&lt;]*\\)[&lt;]/A[&gt;][    ]*(\\([^)]*\\))"</font>);
01253                 <font class="keywordflow">while</font> ((topicloc=topicline.<a class="code" href="classString.html#a26">index</a>(entrytopic,<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,topicloc))&gt;=0) {
01254                         <font class="keywordtype">int</font> sp2, ml2, sp3, ml3;
01255                         <font class="keywordflow">if</font> (!(entrytopic.<a class="code" href="classBigRegex.html#a4">match_info</a>(sp,ml,2) &amp;&amp; entrytopic.<a class="code" href="classBigRegex.html#a4">match_info</a>(sp2,ml2,3) &amp;&amp; entrytopic.<a class="code" href="classBigRegex.html#a4">match_info</a>(sp3,ml3,4))) {
01256                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Invalid topical DIL reference in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_Parameters(), continuing\n"</font>;
01257                                 <font class="keywordflow">continue</font>;
01258                         }
01259                         de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>-&gt;<a class="code" href="classDIL__entry__parameters.html#a1">topic_append</a>(<a class="code" href="utilities_8cc.html#a31">absurl</a>(idfile,topicline.<a class="code" href="classString.html#a51">at</a>(sp,ml)),topicline.<a class="code" href="classString.html#a51">at</a>(sp2,ml2),atof(<a class="code" href="classString.html">String</a>(topicline.<a class="code" href="classString.html#a51">at</a>(sp3,ml3))));
01260 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01261 <font class="preprocessor"></font>                        <font class="keywordflow">if</font> (<a class="code" href="classDIL__Topical__List.html">DIL_Topical_List</a> * dtl = de-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(numtopics)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"\ttopic file = "</font> &lt;&lt; dtl-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m0">file</a> &lt;&lt; <font class="stringliteral">", topic title = "</font> &lt;&lt; dtl-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m1">title</a> &lt;&lt; <font class="stringliteral">"\n\t\trelevance = "</font> &lt;&lt; dtl-&gt;<a class="code" href="classDIL__Topical__List.html#m1">relevance</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01262 <font class="preprocessor">#endif</font>
01263 <font class="preprocessor"></font>                        numtopics++;
01264                 }
01265                 <font class="keywordflow">if</font> (!numtopics) {
01266                         <font class="keyword">delete</font> de;
01267                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing data in topical DIL field of DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01268                         <font class="keywordflow">continue</font>;
01269                 }
01270                 <font class="comment">// find comma separated list of projects</font>
01271                 <font class="keywordtype">int</font> nextidloc; <a class="code" href="classString.html">String</a> cellparams, dildata;
01272                 <font class="keywordflow">if</font> ((nextidloc=<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx],idloc,cellparams,dildata))&lt;0) {
01273                         <font class="keyword">delete</font> de;
01274                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing project reference in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01275                         <font class="keywordflow">continue</font>;
01276                 }
01277                 idloc = nextidloc;
01278                 <a class="code" href="utilities_8cc.html#a61">HTML_remove_comments</a>(dildata);
01279                 <font class="keywordtype">int</font> projloc = 0, numprojects = 0; <a class="code" href="classString.html">String</a> hrefurl, hreftext;
01280                 <font class="keywordflow">while</font> ((projloc=<a class="code" href="utilities_8cc.html#a58">HTML_get_href</a>(dildata,projloc,hrefurl,hreftext))&gt;=0) {
01281                         <font class="keywordtype">int</font> projidx;
01282                         hrefurl = <a class="code" href="utilities_8cc.html#a31">absurl</a>(idfile,hrefurl);
01283                         <font class="keywordflow">if</font> ((projidx=<a class="code" href="classDetailed__Items__List.html#a1">Get_Project_Data</a>(dildata,projloc,hrefurl,hreftext,*(de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>)))&lt;0) {
01284                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing project data in DIL entry "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing\n"</font>;
01285                                 <font class="keywordflow">continue</font>;
01286                         }
01287                         projloc = projidx;
01288                         <font class="comment">// (currently ignoring whether or not comma separates project references)</font>
01289 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01290 <font class="preprocessor"></font>                        <font class="keywordflow">if</font> (<a class="code" href="classDIL__AL__List.html">DIL_AL_List</a> * dal = de-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(numprojects)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"\tproject file = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m0">al</a>.<a class="code" href="structfiletitle__t.html#m0">file</a> &lt;&lt; <font class="stringliteral">", project title = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m0">al</a>.<a class="code" href="structfiletitle__t.html#m1">title</a> &lt;&lt; <font class="stringliteral">"\n\t\trelevance = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m1">relevance</a> &lt;&lt; <font class="stringliteral">", unb.imp. = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m2">unbounded</a> &lt;&lt; <font class="stringliteral">", bound.imp. = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m3">bounded</a> &lt;&lt; <font class="stringliteral">"\n\t\ttarget date = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#a5">targetdate</a>() &lt;&lt; <font class="stringliteral">", urgency = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m4">urgency</a> &lt;&lt; <font class="stringliteral">", priority = "</font> &lt;&lt; dal-&gt;<a class="code" href="classDIL__AL__List.html#m5">priority</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01291 <font class="preprocessor">#endif</font>
01292 <font class="preprocessor"></font>                        numprojects++;
01293                 }
01294 <font class="comment">// *** Currently we tolerate missing project related data</font>
01295 <font class="comment">/*              if (!numprojects) {</font>
01296 <font class="comment">                        delete de;</font>
01297 <font class="comment">                        EOUT &lt;&lt; "dil2al: Missing data in project reference of DIL entry " &lt;&lt; entrynum &lt;&lt; " in Detailed_Items_List::Get_All_Parameters(), continuing\n";</font>
01298 <font class="comment">                        continue;</font>
01299 <font class="comment">                }</font>
01300 <font class="comment">*/</font>
01301                 <font class="comment">// attach to list</font>
01302                 <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a8">link_before</a>(de);
01303                 entrynum++;
01304                 <font class="keywordflow">if</font> ((entrynum % 10)==0) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'.'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
01305         }
01306         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush();
01307 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01308 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Number of entries = "</font> &lt;&lt; entrynum &lt;&lt; <font class="charliteral">'\n'</font>;
01309 <font class="preprocessor">#endif</font>
01310 <font class="preprocessor"></font>
01311         <font class="keywordflow">if</font> (!<a class="code" href="classDetailed__Items__List.html#b0">Write_to_Binary_Cache</a>()) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write to binary cache file "</font> &lt;&lt; cacheidfile &lt;&lt; <font class="stringliteral">"in Detailed_Items_List::Get_All_DIL_ID_File_Parameters(), continuing as is\n"</font>;
01312 
01313         <font class="keywordflow">return</font> entrynum;
01314 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="Detailed_Items_List::Get_All_Topical_DIL_Parameters"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int Detailed_Items_List::Get_All_Topical_DIL_Parameters </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>gettext</em> = <a class="el" href="templates_8defines_8hh.html#a5">false</a>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>cacherefresh</em> = <a class="el" href="templates_8defines_8hh.html#a5">false</a></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01316">1316</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00104">PLLRoot&lt; PLLType &gt;::clear</a>(), <a class="el" href="dil2al_8hh-source.html#l00508">DIL_entry_content::completion</a>, <a class="el" href="dil2al_8hh-source.html#l00662">DIL_entry::content</a>, <a class="el" href="utilities_8cc-source.html#l00919">DIL_entry::elbyid</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>(), <a class="el" href="utilities_8cc-source.html#l00992">DIL_entry::Get_Entry_Parameters</a>(), <a class="el" href="utilities_8cc-source.html#l02101">get_file_in_list</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="utilities_8cc-source.html#l02506">HTML_get_name</a>(), <a class="el" href="utilities_8cc-source.html#l02455">HTML_get_table_cell</a>(), <a class="el" href="utilities_8cc-source.html#l02462">HTML_get_table_row</a>(), <a class="el" href="utilities_8cc-source.html#l02555">HTML_remove_tags</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; DIL_entry &gt;::length</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00227">PLLRoot&lt; PLLType &gt;::link_before</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="utilities_8cc-source.html#l01554">Read_Topical_from_Binary_Cache</a>(), <a class="el" href="dil2al_8hh-source.html#l00507">DIL_entry_content::required</a>, <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>, <a class="el" href="dil2al_8hh-source.html#l00504">DIL_entry_content::started</a>, <a class="el" href="dil2al_8hh-source.html#l00510">DIL_entry_content::text</a>, <a class="el" href="dil2al_8hh-source.html#l00207">Text_File_Buffers::tf</a>, <a class="el" href="dil2al_8hh-source.html#l00208">Text_File_Buffers::tfname</a>, <a class="el" href="dil2al_8hh-source.html#l00209">Text_File_Buffers::tfnum</a>, <a class="el" href="dil2al_8hh-source.html#l00509">DIL_entry_content::valuation</a>, <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l01443">Write_Topical_to_Binary_Cache</a>().
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), <a class="el" href="diladmin_8cc-source.html#l00705">generate_modify_element_FORM_interface</a>(), <a class="el" href="alcomp_8cc-source.html#l01359">refresh_quick_load_cache</a>(), <a class="el" href="utilities_8cc-source.html#l01681">Sort_by_Target_Date</a>(), <a class="el" href="diladmin_8cc-source.html#l01424">Tabbed_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l01488">Tabbed_FORM_DIL_Hierarchy</a>(), and <a class="el" href="diladmin_8cc-source.html#l01443">Tabbed_HTML_DIL_Hierarchy</a>().
<p>
<div class="fragment"><pre>01316                                                                                                        {
01317 <font class="comment">// Obtain parameters from the Topical DIL files for all DIL entries</font>
01318 <font class="comment">// Note: calls Get_All_DIL_ID_File_Parameters() if necessary</font>
01319 <font class="comment">// to link data to a linked list of DIL entries</font>
01320 <font class="comment">// *** could add options to either overwrite prior data</font>
01321 <font class="comment">//     (current state) or skip duplicate occurrances</font>
01322   <font class="keywordtype">int</font> ididx,idloc,entrynum,topicalentrynum = 0;
01323   <a class="code" href="classPLLRoot.html">PLLRoot&lt;DIL_entry_Pointer&gt;</a> dep; <font class="comment">// used to note DIL entries per cache</font>
01324   <font class="keywordflow">if</font> (!<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) entrynum=<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01325   <font class="keywordflow">else</font> entrynum=<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
01326   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"DILs: "</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush();
01327   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> n=0; (dil[n]); n++) {
01328     <font class="keywordflow">if</font> ((usequickloadcache) &amp;&amp; (!cacherefresh)) <font class="keywordflow">if</font> (<a class="code" href="classDetailed__Items__List.html#b3">Read_Topical_from_Binary_Cache</a>(n,gettext)) <font class="keywordflow">continue</font>;
01329 
01330     dep.<a class="code" href="classPLLRoot.html#a16">clear</a>();
01331     <font class="keywordflow">if</font> ((ididx=<a class="code" href="utilities_8cc.html#a40">get_file_in_list</a>(*(dil[n]),<a class="code" href="classText__File__Buffers.html#m0">tf</a>,<a class="code" href="classText__File__Buffers.html#m1">tfname</a>,<a class="code" href="classText__File__Buffers.html#m2">tfnum</a>))&lt;0) <font class="keywordflow">return</font> -1;
01332     <font class="keywordflow">if</font> ((idloc=<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[        ]*dil2al:[      ]*DIL begin[    ]*--[&gt;]"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&lt;0) <font class="keywordflow">return</font> -1;
01333     <font class="comment">// find next entry and obtain ID</font>
01334     <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid; <a class="code" href="classString.html">String</a> markparams, rowcontent, cellcontent, reftext; <font class="keywordtype">int</font> rowloc,cellloc, topicalDILentrynum = 0;
01335     <font class="keywordflow">while</font> ((idloc=<a class="code" href="utilities_8cc.html#a55">HTML_get_table_row</a>(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx],idloc,markparams,rowcontent))&gt;=0) {
01336       <font class="keywordflow">if</font> ((rowloc=<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(rowcontent,0,markparams,cellcontent))&lt;0) {
01337         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing DIL ID in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01338         <font class="keywordflow">return</font> -1;
01339       }
01340       <font class="keywordflow">if</font> ((cellloc=<a class="code" href="utilities_8cc.html#a59">HTML_get_name</a>(cellcontent,0,markparams,reftext))&lt;0) {
01341         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing DIL ID name in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01342         <font class="keywordflow">return</font> -1;
01343       }
01344       dilid = markparams; <font class="comment">// obtain DIL entry ID</font>
01345       <a class="code" href="classDIL__entry.html">DIL_entry</a> * de;
01346       <font class="keywordflow">if</font> ((de = <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid))==NULL) { <font class="comment">// find ID in DIL</font>
01347         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL ID "</font> &lt;&lt; dilid.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01348 <font class="comment">//#define FIND_DILID_LIST_ERROR</font>
01349 <font class="preprocessor">#ifdef FIND_DILID_LIST_ERROR</font>
01350 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"List of DIL entries:\n"</font>;
01351         <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; e-&gt;chars() &lt;&lt; <font class="charliteral">'\n'</font>;
01352 <font class="preprocessor">#endif</font>
01353 <font class="preprocessor"></font>        <font class="keywordflow">return</font> -1;
01354       }
01355       <font class="comment">// obtain parameters</font>
01356       <font class="keywordflow">if</font> ((rowloc=<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(rowcontent,rowloc,markparams,cellcontent))&lt;0) {
01357         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing parameters in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01358         <font class="keywordflow">return</font> -1;
01359       }
01360       <a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(cellcontent);
01361       <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#a17">Get_Entry_Parameters</a>(cellcontent)) {
01362         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Invalid entry parameters in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01363         <font class="keywordflow">return</font> -1;
01364       }
01365       <font class="comment">// obtain text</font>
01366       <font class="keywordflow">if</font> ((idloc=<a class="code" href="utilities_8cc.html#a55">HTML_get_table_row</a>(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx],idloc,markparams,rowcontent))&lt;0) {
01367         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing DIL text row in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01368         <font class="keywordflow">return</font> -1;
01369       }
01370       <font class="keywordflow">if</font> (gettext) {
01371         <font class="keywordflow">if</font> ((rowloc=<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(rowcontent,0,markparams,cellcontent))&lt;0) {
01372           <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing DIL text in "</font> &lt;&lt; *(dil[n]) &lt;&lt; <font class="stringliteral">" at entry "</font> &lt;&lt; topicalDILentrynum &lt;&lt; <font class="stringliteral">" in Get_All_Topical_DIL_Parameters()\n"</font>;
01373           <font class="keywordflow">return</font> -1;
01374         }
01375         <font class="comment">//HTML_remove_comments(cellcontent);</font>
01376         <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>) de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a> = <font class="keyword">new</font> <a class="code" href="classDIL__entry__content.html">DIL_entry_content</a>(*de);
01377         <font class="keyword">delete</font> de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m4">text</a>; <font class="comment">// remove prior allocation</font>
01378         de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m4">text</a> = <font class="keyword">new</font> <a class="code" href="classString.html">String</a>(cellcontent);
01379       }
01380 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01381 <font class="preprocessor"></font>      <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"ID = "</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m0">started</a> &lt;&lt; <font class="charliteral">','</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m1">required</a> &lt;&lt; <font class="charliteral">','</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m2">completion</a> &lt;&lt; <font class="charliteral">','</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m3">valuation</a> &lt;&lt; <font class="stringliteral">")\n"</font>;
01382 <font class="preprocessor">#endif</font>
01383 <font class="preprocessor"></font>      <font class="keywordflow">if</font> (usequickloadcache) dep.<a class="code" href="classPLLRoot.html#a8">link_before</a>(<font class="keyword">new</font> <a class="code" href="classDIL__entry__Pointer.html">DIL_entry_Pointer</a>(de));
01384       topicalDILentrynum++;
01385     }
01386 
01387     <font class="keywordflow">if</font> (!<a class="code" href="classDetailed__Items__List.html#b2">Write_Topical_to_Binary_Cache</a>(n,dep,gettext)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write topical to binary cache file "</font> &lt;&lt; dil.File(n)-&gt;chars() &lt;&lt; <font class="stringliteral">".cache in Detailed_Items_List::Get_All_Topical_DIL_Parameters(), continuing as is\n"</font>;
01388 
01389     topicalentrynum += topicalDILentrynum;
01390     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'#'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush();
01391   }
01392   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush();
01393 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01394 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Number of topical entries = "</font> &lt;&lt; topicalentrynum &lt;&lt; <font class="charliteral">'\n'</font>;
01395 <font class="preprocessor">#endif</font>
01396 <font class="preprocessor"></font>  <font class="keywordflow">return</font> entrynum;
01397 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="Detailed_Items_List::Get_Project_Data"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int Detailed_Items_List::Get_Project_Data </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dildata</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>projloc</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hrefurl</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>hreftext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classDIL__entry__parameters.html">DIL_entry_parameters</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dilentrypars</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01142">1142</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8cc-source.html#l00843">String::del</a>(), <a class="el" href="dil2al_8hh-source.html#l00557">DILSUPS_TDPROP_FIXED</a>, <a class="el" href="utilities_8cc-source.html#l02158">find_delimiter</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00631">DIL_entry_parameters::project_append</a>(), and <a class="el" href="utilities_8cc-source.html#l01856">time_stamp_time</a>().
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>().
<p>
<div class="fragment"><pre>01142                                                                                                                                                  {
01143 <font class="comment">// dildata contains the DIL entry project data</font>
01144 <font class="comment">// projloc indicates how much of dildata has already been parsed</font>
01145 <font class="comment">// hrefurl and hreftext have already been obtained</font>
01146 <font class="comment">// dilentrypars receives the DIL entry project related parameters</font>
01147 <font class="comment">// *** Modify this if the data format changes</font>
01148         <font class="keywordtype">int</font> nextproj, dataloc, dataend;
01149         <font class="comment">// insure prior to next project URL</font>
01150         <font class="keywordflow">if</font> ((nextproj = dildata.<a class="code" href="classString.html#a26">index</a>(<font class="charliteral">'&lt;'</font>,projloc))&lt;0) nextproj=dildata.<a class="code" href="classString.html#a105">length</a>();
01151         <font class="comment">// start of project data</font>
01152         <font class="keywordflow">if</font> ((dataloc = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,projloc,nextproj,<font class="charliteral">'('</font>))&lt;0) <font class="keywordflow">return</font> -1;
01153         dataloc++;
01154         <font class="comment">// find relevance data</font>
01155         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">','</font>))&lt;0) <font class="keywordflow">return</font> -1;
01156         <font class="keywordtype">double</font> relevance = atof(<a class="code" href="classString.html">String</a>(dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc)));
01157         dataloc=dataend+1;
01158         <font class="comment">// find unbounded importance data</font>
01159         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">','</font>))&lt;0) <font class="keywordflow">return</font> -1;
01160         <font class="keywordtype">double</font> unbounded = atof(<a class="code" href="classString.html">String</a>(dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc)));
01161         dataloc=dataend+1;
01162         <font class="comment">// find bounded importance data</font>
01163         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">','</font>))&lt;0) <font class="keywordflow">return</font> -1;
01164         <font class="keywordtype">double</font> bounded = atof(<a class="code" href="classString.html">String</a>(dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc)));
01165         dataloc=dataend+1;
01166         <font class="comment">// find target date and target date properties</font>
01167         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">','</font>))&lt;0) <font class="keywordflow">return</font> -1;
01168         <a class="code" href="classString.html">String</a> ymdHM = dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc);
01169         <font class="keywordtype">int</font> tdprop = 0;
01170         <font class="keywordflow">if</font> ((ymdHM.<a class="code" href="classString.html#a105">length</a>()&gt;0) &amp;&amp; (ymdHM[0]==<font class="charliteral">'F'</font>)) {
01171                 tdprop = <a class="code" href="dil2al_8hh.html#a29">DILSUPS_TDPROP_FIXED</a>;
01172                 ymdHM.<a class="code" href="classString.html#a83">del</a>(0,1);
01173         }
01174         <font class="keywordflow">if</font> (ymdHM.<a class="code" href="classString.html#a105">length</a>()&lt;12) ymdHM += <font class="stringliteral">"0000"</font>; <font class="comment">// year, month, day, hour, minute</font>
01175         time_t targetdate = <a class="code" href="utilities_8cc.html#a23">time_stamp_time</a>(ymdHM); <font class="comment">// local time stamp stored in calendar time</font>
01176         dataloc=dataend+1;
01177         <font class="comment">// find urgency data</font>
01178         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">','</font>))&lt;0) <font class="keywordflow">return</font> -1;
01179         <font class="keywordtype">double</font> urgency = atof(<a class="code" href="classString.html">String</a>(dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc)));
01180         dataloc=dataend+1;
01181         <font class="comment">// find priority data</font>
01182         <font class="keywordflow">if</font> ((dataend = <a class="code" href="utilities_8cc.html#a43">find_delimiter</a>(dildata,dataloc,nextproj,<font class="charliteral">')'</font>))&lt;0) <font class="keywordflow">return</font> -1;
01183         <font class="keywordtype">double</font> priority = atof(<a class="code" href="classString.html">String</a>(dildata.<a class="code" href="classString.html#a51">at</a>(dataloc,dataend-dataloc)));
01184         <font class="comment">// store project data</font>
01185         dilentrypars.<a class="code" href="classDIL__entry__parameters.html#a3">project_append</a>(hrefurl,hreftext,relevance,unbounded,bounded,targetdate,tdprop,urgency,priority);
01186         <font class="keywordflow">return</font> dataend+1;
01187 }       
</pre></div>    </td>
  </tr>
</table>
<a name="b1" doxytag="Detailed_Items_List::Read_from_Binary_Cache"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Read_from_Binary_Cache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>dilid</em> = NULL          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01487">1487</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="templates_8classic_8hh-source.html#l00104">PLLRoot&lt; DIL_entry &gt;::clear</a>(), <a class="el" href="dil2al_8hh-source.html#l01222">DILBYID_CACHE_NUMENTRIES_SUSPICIOUS</a>, <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="classPLLRoot.html#a8">PLLRoot&lt; DIL_entry &gt;::link_before</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="utilities_8cc-source.html#l01399">Lock_File</a>(), <a class="el" href="utilities_8cc-source.html#l01070">DIL_entry::Read_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l00009">READSOMETYPE</a>, <a class="el" href="templates_8defines_8hh-source.html#l00277">res</a>, <a class="el" href="utilities_8cc-source.html#l00523">DIL_ID::str</a>(), <a class="el" href="utilities_8cc-source.html#l01408">Unlock_File</a>(), and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), and <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>().
<p>
<div class="fragment"><pre>01487                                                                       {
01488   <font class="comment">// Read a binary copy of the DIL parameters list from a cache file for quick loading.</font>
01489   <font class="keywordflow">if</font> (!usequickloadcache) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01490   <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a12">Lock_File</a>(lockidfile,idfile+<font class="stringliteral">" locked by Detailed_Items_List::Read_from_Binary_Cache()\n"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01491   <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Reading parameters from binary cache file\n"</font>;
01492   <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">true</font>;
01493   <font class="comment">// read and compare CRC for idfile</font>
01494   <font class="keywordtype">int</font> retstat;
01495   <font class="keywordflow">if</font> ((retstat=system(<font class="stringliteral">"cksum "</font>+idfile+<font class="stringliteral">" &gt; "</font>+crcidfile+<font class="stringliteral">".tmp"</font>))==-1) {
01496     <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to check CRC in Detailed_Items_List::Read_from_Binary_Cache()\n"</font>;
01497     <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01498   } <font class="keywordflow">else</font> {
01499     retstat = (((retstat) &amp; 0xff00) &gt;&gt; 8);
01500     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"retstat = "</font> &lt;&lt; retstat &lt;&lt; <font class="charliteral">'\n'</font>;
01501     <font class="keywordflow">if</font> ((retstat=system(<font class="stringliteral">"diff -q "</font>+crcidfile+<font class="stringliteral">" "</font>+crcidfile+<font class="stringliteral">".tmp"</font>))!=0) {
01502       <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01503       <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"CRC difference - parsing of authoritative parameter file forced\n"</font>;
01504     }
01505     retstat = (((retstat) &amp; 0xff00) &gt;&gt; 8);
01506     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"retstat = "</font> &lt;&lt; retstat &lt;&lt; <font class="charliteral">'\n'</font>;
01507     <font class="keywordflow">if</font> (unlink(crcidfile+<font class="stringliteral">".tmp"</font>)&lt;0) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Unable to remove temporary CRC file "</font> &lt;&lt; crcidfile &lt;&lt; <font class="stringliteral">".tmp in Detailed_Items_List::Read_from_Binary_Cache(), continuing as is\n"</font>;
01508   }
01509   <font class="keywordflow">if</font> (res) { <font class="comment">// read parameters from binary cache file</font>
01510     ifstream cfl(cacheidfile,ios::binary);
01511     <font class="keywordflow">if</font> (!cfl) {
01512       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to read from "</font> &lt;&lt; cacheidfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Read_from_Binary_Cache()\n"</font>;
01513       <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01514     } <font class="keywordflow">else</font> {
01515       <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a16">clear</a>();
01516       <font class="keywordtype">int</font> numentries, numentriesread = 0;
01517       <font class="keywordflow">if</font> ((cfl.read((<a class="code" href="utilities_8cc.html#a0">READSOMETYPE</a>) (&amp;numentries),<font class="keyword">sizeof</font>(numentries))).gcount()&lt;<font class="keyword">sizeof</font>(numentries)) <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01518 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01519 <font class="preprocessor"></font>      <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; numentries = "</font> &lt;&lt; numentries &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01520 <font class="preprocessor">#endif</font>
01521 <font class="preprocessor"></font>      <font class="keywordflow">while</font> (res) {
01522 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01523 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; numentriesread = "</font> &lt;&lt; numentriesread &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01524 <font class="preprocessor">#endif</font>
01525 <font class="preprocessor"></font>        <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = <font class="keyword">new</font> <a class="code" href="classDIL__entry.html">DIL_entry</a>(*<font class="keyword">this</font>);
01526         <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#a24">Read_from_Binary_Cache</a>(cfl)) { 
01527           <font class="keyword">delete</font> de;
01528           <font class="keywordflow">if</font> (numentriesread&lt;numentries) {
01529             <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: WARNING - Insufficient data retrieved from binary cache file in Detailed_Items_List::Read_from_Binary_Cache()\n"</font>;
01530             <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01531           }
01532           <font class="keywordflow">break</font>;
01533         }
01534         <font class="keywordflow">if</font> (dilid) {
01535                 <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__ID.html#a14">str</a>()==(*dilid)) <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a8">link_before</a>(de); <font class="keywordflow">else</font> <font class="keyword">delete</font> de;
01536         } <font class="keywordflow">else</font> <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a8">link_before</a>(de);
01537         numentriesread++;
01538         <font class="keywordflow">if</font> (numentriesread&gt;numentries) {
01539           <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: WARNING - Actual amount of data exceeds cached DIL length retrieved from binary cache file in Detailed_Items_List::Read_from_Binary_Cache()\n"</font>;
01540           <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01541         }
01542       }
01543       cfl.close();
01544       <font class="keywordflow">if</font> ((res) &amp;&amp; (numentriesread&lt;<a class="code" href="dil2al_8hh.html#a75">DILBYID_CACHE_NUMENTRIES_SUSPICIOUS</a>)) {
01545         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Number of cached entries read ("</font> &lt;&lt; numentriesread &lt;&lt; <font class="stringliteral">") deemed suspiciously few, parsing of authoritative parameter file forced\n"</font>;
01546         <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01547       }
01548     }
01549   }
01550   <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a13">Unlock_File</a>(lockidfile)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to remove lock file "</font> &lt;&lt; lockidfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Read_from_Binary_Cache(), continuing as is\n"</font>;
01551   <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01552 }
</pre></div>    </td>
  </tr>
</table>
<a name="b3" doxytag="Detailed_Items_List::Read_Topical_from_Binary_Cache"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Read_Topical_from_Binary_Cache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>diln</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>gettext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01554">1554</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="utilities_8cc-source.html#l00919">DIL_entry::elbyid</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="utilities_8cc-source.html#l01399">Lock_File</a>(), <a class="el" href="utilities_8cc-source.html#l00542">DIL_ID::Read_DIL_ID_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l01086">DIL_entry::Read_Topical_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l00009">READSOMETYPE</a>, <a class="el" href="templates_8defines_8hh-source.html#l00277">res</a>, <a class="el" href="utilities_8cc-source.html#l01408">Unlock_File</a>(), and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), and <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>().
<p>
<div class="fragment"><pre>01554                                                                                {
01555   <font class="comment">// Read a binary copy of the DIL Topical content from a cache file for quick loading.</font>
01556   <font class="keywordflow">if</font> (!usequickloadcache) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01557   <a class="code" href="classString.html">String</a> filename((*dil.File(diln)));
01558   <a class="code" href="classString.html">String</a> lockfile(filename+<font class="stringliteral">".lock"</font>), cachefile(filename+<font class="stringliteral">".cache"</font>), crcfile(filename+<font class="stringliteral">".crc"</font>);
01559   <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a12">Lock_File</a>(lockfile,filename+<font class="stringliteral">" locked by Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01560   <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Reading topical content from binary cache file\n"</font>;
01561   <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">true</font>;
01562   <font class="comment">// read and compare CRC for filename</font>
01563   <font class="keywordflow">if</font> (system(<font class="stringliteral">"cksum "</font>+filename+<font class="stringliteral">" &gt; "</font>+crcfile+<font class="stringliteral">".tmp"</font>)==-1) {
01564     <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to check CRC in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01565     <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01566   } <font class="keywordflow">else</font> {
01567     <font class="keywordflow">if</font> (system(<font class="stringliteral">"diff -q "</font>+crcfile+<font class="stringliteral">" "</font>+crcfile+<font class="stringliteral">".tmp"</font>)!=0) {
01568       <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01569       <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"CRC difference - parsing of authoritative topical content file forced\n"</font>;
01570     }
01571     <font class="keywordflow">if</font> (unlink(crcfile+<font class="stringliteral">".tmp"</font>)&lt;0) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Unable to remove temporary CRC file "</font> &lt;&lt; crcfile &lt;&lt; <font class="stringliteral">".tmp in Detailed_Items_List::Read_Topical_from_Binary_Cache(), continuing as is\n"</font>;
01572   }
01573   <font class="keywordflow">if</font> (res) { <font class="comment">// read parameters from binary cache file</font>
01574     ifstream cfl(cachefile,ios::binary);
01575     <font class="keywordflow">if</font> (!cfl) {
01576       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to read from "</font> &lt;&lt; cachefile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01577       <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01578     } <font class="keywordflow">else</font> {
01579       <font class="keywordtype">bool</font> gottext;
01580       <font class="keywordflow">if</font> ((cfl.read((<a class="code" href="utilities_8cc.html#a0">READSOMETYPE</a>) (&amp;gottext),<font class="keyword">sizeof</font>(gottext))).gcount()&lt;<font class="keyword">sizeof</font>(gottext)) <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01581       <font class="keywordtype">int</font> numentries, numentriesread = 0;
01582       <font class="keywordflow">if</font> ((cfl.read((<a class="code" href="utilities_8cc.html#a0">READSOMETYPE</a>) (&amp;numentries),<font class="keyword">sizeof</font>(numentries))).gcount()&lt;<font class="keyword">sizeof</font>(numentries)) <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01583 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01584 <font class="preprocessor"></font>      <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; numentries = "</font> &lt;&lt; numentries &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01585 <font class="preprocessor">#endif</font>
01586 <font class="preprocessor"></font>      <font class="keywordflow">if</font> ((gettext) &amp;&amp; (!gottext)) {
01587         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Text content needed and not available in cache, parsing of authoritative topical content file forced\n"</font>;
01588         <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01589       }
01590       <font class="keywordflow">while</font> (res) {
01591 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01592 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; numentriesread = "</font> &lt;&lt; numentriesread &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01593 <font class="preprocessor">#endif</font>
01594 <font class="preprocessor"></font>        <a class="code" href="classDIL__ID.html">DIL_ID</a> did;
01595         <font class="keywordflow">if</font> (!did.<a class="code" href="classDIL__ID.html#a19">Read_DIL_ID_from_Binary_Cache</a>(cfl)) {
01596           <font class="keywordflow">if</font> (numentriesread&lt;numentries) {
01597             <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: WARNING - Insufficient data retrieved from binary cache file in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01598             <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01599           }
01600           <font class="keywordflow">break</font>;
01601         } <font class="keywordflow">else</font> {
01602 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01603 <font class="preprocessor"></font>          <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; did = "</font> &lt;&lt; did.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01604 <font class="preprocessor">#endif</font>
01605 <font class="preprocessor"></font>          <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(did);
01606 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01607 <font class="preprocessor"></font>          <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; de = "</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\n'</font>; cout.flush();
01608 <font class="preprocessor">#endif</font>
01609 <font class="preprocessor"></font>          <font class="keywordflow">if</font> (!de) {
01610             <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL ID "</font> &lt;&lt; did.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" not found in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01611             <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01612           } <font class="keywordflow">else</font> {
01613 <font class="preprocessor">#ifdef TEST_CACHE_READ</font>
01614 <font class="preprocessor"></font>            <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; de-&gt;Read_Topical_from_Binary_Cache(cfl,"</font> &lt;&lt; gottext &lt;&lt; <font class="stringliteral">")\n"</font>; cout.flush();
01615 <font class="preprocessor">#endif</font>
01616 <font class="preprocessor"></font>            <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#a25">Read_Topical_from_Binary_Cache</a>(cfl,gottext)) { 
01617               <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to read topical content for "</font> &lt;&lt; did.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01618               <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01619             } <font class="keywordflow">else</font> {
01620               <font class="comment">/*            if (dilid) {</font>
01621 <font class="comment">                            if (de-&gt;str()==(*dilid)) list.link_before(de); else delete de;</font>
01622 <font class="comment">                            } else list.link_before(de); */</font>
01623               numentriesread++;
01624               <font class="keywordflow">if</font> (numentriesread&gt;numentries) {
01625                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: WARNING - Actual amount of data exceeds cached DIL length retrieved from binary cache file in Detailed_Items_List::Read_Topical_from_Binary_Cache()\n"</font>;
01626                 <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01627               }
01628             }
01629           }
01630         }
01631       }
01632       cfl.close();
01633       <font class="keywordflow">if</font> ((res) &amp;&amp; (numentriesread&lt;1)) {
01634         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Number of cached entries read ("</font> &lt;&lt; numentriesread &lt;&lt; <font class="stringliteral">") deemed suspiciously few, parsing of authoritative topical content file forced\n"</font>;
01635         <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">false</font>;
01636       }
01637     }
01638   }
01639   <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a13">Unlock_File</a>(lockfile)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to remove lock file "</font> &lt;&lt; lockfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Read_Topical_from_Binary_Cache(), continuing as is\n"</font>;
01640   <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01641 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="Detailed_Items_List::Sort_by_Target_Date"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classDIL__entry.html">DIL_entry</a> ** Detailed_Items_List::Sort_by_Target_Date </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>gettext</em> = <a class="el" href="templates_8defines_8hh.html#a5">false</a>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01681">1681</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l01774">DIL_entry_target_date_qsort_compare</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; DIL_entry &gt;::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, and <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>.
<p>
Referenced by <a class="el" href="diladmin_8cc-source.html#l01083">modify_DIL_group_target_dates</a>(), <a class="el" href="tladmin_8cc-source.html#l00161">select_TL_DIL_refs</a>(), <a class="el" href="tladmin_8cc-source.html#l00117">stop_TL_chunk</a>(), and <a class="el" href="alcomp_8cc-source.html#l01334">update_DIL_to_AL</a>().
<p>
<div class="fragment"><pre>01681                                                                           {
01682 <font class="comment">// Create an array of pointers to DIL entries and sort it in</font>
01683 <font class="comment">// ascending order of target dates</font>
01684         <font class="keywordtype">int</font> entrynum,i = 0;
01685         <font class="keywordflow">if</font> (!<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) entrynum=<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(gettext);
01686         <font class="keywordflow">else</font> entrynum=<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
01687         <font class="keywordflow">if</font> (entrynum&lt;1) {
01688                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No DIL to sort in Detailed_Items_List::Sort_by_Target_Date()\n"</font>;
01689                 <font class="keywordflow">return</font> NULL;
01690         }
01691         <font class="comment">// set up array</font>
01692         <a class="code" href="classDIL__entry.html">DIL_entry</a> ** dep = <font class="keyword">new</font> (<a class="code" href="classDIL__entry.html">DIL_entry</a> *)[entrynum];
01693         <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),(i&lt;entrynum)) { dep[i] = e; i++; }
01694         <font class="comment">// sort array</font>
01695         qsort(dep,entrynum,<font class="keyword">sizeof</font>(<a class="code" href="classDIL__entry.html">DIL_entry</a> *),<a class="code" href="utilities_8cc.html#a212">DIL_entry_target_date_qsort_compare</a>);
01696         <font class="keywordflow">return</font> dep;
01697 }
</pre></div>    </td>
  </tr>
</table>
<a name="b0" doxytag="Detailed_Items_List::Write_to_Binary_Cache"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Write_to_Binary_Cache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01416">1416</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; DIL_entry &gt;::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="utilities_8cc-source.html#l01399">Lock_File</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="templates_8defines_8hh-source.html#l00277">res</a>, <a class="el" href="utilities_8cc-source.html#l01408">Unlock_File</a>(), and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), and <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>().
<p>
<div class="fragment"><pre>01416                                                 {
01417   <font class="comment">// Write a binary copy of the DIL parameters list to a cache file for quick loading.</font>
01418   <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">true</font>;
01419   <font class="keywordflow">if</font> (usequickloadcache) {
01420     <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a12">Lock_File</a>(lockidfile,idfile+<font class="stringliteral">" locked by Detailed_Items_List::Write_to_Binary_Cache()\n"</font>)) {
01421       <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Writing parameters to binary cache file\n"</font>;
01422       ofstream cfl(cacheidfile,ios::binary);
01423       <font class="keywordflow">if</font> (!cfl) {
01424         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write to "</font> &lt;&lt; cacheidfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_Binary_Cache()\n"</font>;
01425         <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01426       } <font class="keywordflow">else</font> {
01427         <font class="keywordtype">int</font> numentries = <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
01428         cfl.write((<font class="keyword">const</font> <font class="keywordtype">void</font> *) (&amp;numentries),<font class="keyword">sizeof</font>(numentries));
01429         <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <font class="keywordflow">if</font> (!e-&gt;Write_to_Binary_Cache(cfl)) { <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>; <font class="keywordflow">break</font>; }
01430         cfl.close();
01431       }
01432       <font class="comment">// write new CRC for idfile and unlock</font>
01433       <font class="keywordflow">if</font> (res) <font class="keywordflow">if</font> (system(<font class="stringliteral">"cksum "</font>+idfile+<font class="stringliteral">" &gt; "</font>+crcidfile)==-1)  <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write new CRC to "</font> &lt;&lt; crcidfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_Binary_Cache(), continuing as is\n"</font>;
01434       <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a13">Unlock_File</a>(lockidfile)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to remove lock file "</font> &lt;&lt; lockidfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_Binary_Cache(), continuing as is\n"</font>;
01435     } <font class="keywordflow">else</font> {
01436       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to prepare a Quick Load Cache in Detailed_Items_List::Write_to_Binary_Cache()\n"</font>;
01437       <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01438     }
01439   }
01440   <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01441 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="Detailed_Items_List::Write_to_File"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Write_to_File </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01699">1699</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="BigString_8hh-source.html#l00495">String::chars</a>(), <a class="el" href="dil2al_8hh-source.html#l01249">DILBYID_FLOAT_FORMAT</a>, <a class="el" href="dil2al_8hh-source.html#l00553">DILSUPS_BND_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00556">DILSUPS_PRI_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00551">DILSUPS_REL_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00554">DILSUPS_TD_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00557">DILSUPS_TDPROP_FIXED</a>, <a class="el" href="dil2al_8hh-source.html#l00552">DILSUPS_UNB_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00555">DILSUPS_URG_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l00521">DILTOPICS_REL_UNSPECIFIED</a>, <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="dil2al_8hh-source.html#l00211">Text_File_Buffers::FileIndex</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; DIL_entry &gt;::head</a>(), <a class="el" href="utilities_8cc-source.html#l02462">HTML_get_table_row</a>(), <a class="el" href="utilities_8cc-source.html#l02427">HTML_marker_arguments</a>(), <a class="el" href="utilities_8cc-source.html#l02585">HTML_put_href</a>(), <a class="el" href="utilities_8cc-source.html#l02589">HTML_put_name</a>(), <a class="el" href="utilities_8cc-source.html#l02573">HTML_put_table_cell</a>(), <a class="el" href="utilities_8cc-source.html#l02569">HTML_put_table_row</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00706">list</a>, <a class="el" href="dil2al_8hh-source.html#l00663">DIL_entry::parameters</a>, <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="templates_8classic_8hh-source.html#l00349">PLL_LOOP_FORWARD_NESTED</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>, <a class="el" href="dil2al_8hh-source.html#l00207">Text_File_Buffers::tf</a>, <a class="el" href="utilities_8cc-source.html#l01834">time_stamp</a>(), and <a class="el" href="utilities_8cc-source.html#l02116">write_file_from_String</a>().
<p>
Referenced by <a class="el" href="diladmin_8cc-source.html#l01050">modify_DIL_entry_target_date</a>(), <a class="el" href="diladmin_8cc-source.html#l01083">modify_DIL_group_target_dates</a>(), and <a class="el" href="diladmin_8cc-source.html#l00929">update_DIL_entry_parameter_elements</a>().
<p>
<div class="fragment"><pre>01699                                         {
01700 <font class="comment">// writes a modified DIL-by-ID file</font>
01701 <font class="comment">// requires that Topic and Project/Superior parameters are available</font>
01702 <font class="comment">// (such as provided by a prior call to Get_All_DIL_ID_File_Parameters())</font>
01703 <font class="preprocessor">#ifdef CAUTIOUS_OBJECT_INTERFACES</font>
01704 <font class="preprocessor"></font>        <font class="keywordtype">int</font> ididx = <a class="code" href="classText__File__Buffers.html#a1">FileIndex</a>(idfile);
01705         <font class="keywordflow">if</font> (ididx&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01706 <font class="preprocessor">#else</font>
01707 <font class="preprocessor"></font>        <font class="keyword">const</font> <font class="keywordtype">int</font> ididx = 0;
01708 <font class="preprocessor">#endif</font>
01709 <font class="preprocessor"></font>        <font class="comment">// copy free-style header and table column headings</font>
01710         <font class="keywordtype">int</font> idloc;
01711         <font class="keywordflow">if</font> ((idloc=<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]*dil2al:[      ]*DIL ID begin[         ]*--[&gt;]"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&lt;0) {
01712                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing header in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_File(), continuing as is\n"</font>;
01713                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01714         }
01715         <a class="code" href="classString.html">String</a> newidfile(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].through(idloc)), rowparams, rowcontent;
01716         idloc = <a class="code" href="utilities_8cc.html#a55">HTML_get_table_row</a>(<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx],idloc,rowparams,rowcontent);
01717         rowparams = <a class="code" href="utilities_8cc.html#a52">HTML_marker_arguments</a>(rowparams);
01718         newidfile += <font class="stringliteral">"\n\n"</font> + <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(rowparams,rowcontent,<font class="keyword">true</font>);
01719         <font class="comment">// generate table</font>
01720         <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = <a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>();
01721         <font class="keywordflow">if</font> (!de) {
01722                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No DIL entries in list to write to "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_File(), continuing as is\n"</font>;
01723                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01724         }
01725         <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>) {
01726                 <a class="code" href="classString.html">String</a> topics, projects, tstamp;
01727                 <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,de,1) {
01728                         topics = <font class="stringliteral">""</font>; <a class="code" href="templates_8classic_8hh.html#a2">PLL_LOOP_FORWARD_NESTED</a>(<a class="code" href="classDIL__Topical__List.html">DIL_Topical_List</a>,e-&gt;Topics(0),1,te) {
01729                                 <font class="keywordflow">if</font> (topics.<a class="code" href="classString.html#a105">length</a>()&gt;0) topics += <font class="stringliteral">", "</font>;
01730                                 topics += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(<a class="code" href="utilities_8cc.html#a30">relurl</a>(idfile,te-&gt;dil.file)+<font class="charliteral">'#'</font>+e-&gt;<a class="code" href="classString.html#a104">chars</a>(),te-&gt;dil.title)+<font class="stringliteral">" ("</font>;
01731                                 <font class="keywordflow">if</font> (te-&gt;relevance==<a class="code" href="dil2al_8hh.html#a21">DILTOPICS_REL_UNSPECIFIED</a>) topics += <font class="stringliteral">"?.?)"</font>;
01732                                 <font class="keywordflow">else</font> topics += <a class="code" href="classString.html">String</a>(te-&gt;relevance,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">')'</font>;
01733                         }
01734                         <font class="keywordflow">if</font> (topics.<a class="code" href="classString.html#a105">length</a>()&lt;=0) {
01735                                 topics = <font class="stringliteral">"@MISSING TOPICAL CONTENT REFERENCE@"</font>;
01736                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Warning - missing Topical Content Reference for DIL#"</font> &lt;&lt; e-&gt;chars() &lt;&lt; <font class="stringliteral">" in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_File(), continuing\n"</font>;
01737                         }
01738                         projects = <font class="stringliteral">""</font>; <a class="code" href="templates_8classic_8hh.html#a2">PLL_LOOP_FORWARD_NESTED</a>(<a class="code" href="classDIL__AL__List.html">DIL_AL_List</a>,e-&gt;Projects(0),1,pe) {
01739                                 <font class="keywordflow">if</font> (projects.<a class="code" href="classString.html#a105">length</a>()&gt;0) projects += <font class="stringliteral">", "</font>;
01740                                 projects += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(<a class="code" href="utilities_8cc.html#a30">relurl</a>(idfile,pe-&gt;al.file),pe-&gt;al.title)+<font class="stringliteral">" ("</font>;
01741                                 <font class="keywordflow">if</font> (pe-&gt;relevance==<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>) projects += <font class="stringliteral">"?.?,"</font>;
01742                                 <font class="keywordflow">else</font> projects += <a class="code" href="classString.html">String</a>(pe-&gt;relevance,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">','</font>;
01743                                 <font class="keywordflow">if</font> (pe-&gt;unbounded==<a class="code" href="dil2al_8hh.html#a24">DILSUPS_UNB_UNSPECIFIED</a>) projects += <font class="stringliteral">"?.?,"</font>;
01744                                 <font class="keywordflow">else</font> projects += <a class="code" href="classString.html">String</a>(pe-&gt;unbounded,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">','</font>;
01745                                 <font class="keywordflow">if</font> (pe-&gt;bounded==<a class="code" href="dil2al_8hh.html#a25">DILSUPS_BND_UNSPECIFIED</a>) projects += <font class="stringliteral">"?.?,"</font>;
01746                                 <font class="keywordflow">else</font> projects += <a class="code" href="classString.html">String</a>(pe-&gt;bounded,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">','</font>;
01747                                 <font class="keywordflow">if</font> (pe-&gt;tdproperty()==<a class="code" href="dil2al_8hh.html#a29">DILSUPS_TDPROP_FIXED</a>) projects += <font class="charliteral">'F'</font>;
01748                                 <font class="keywordflow">if</font> (pe-&gt;targetdate()==<a class="code" href="dil2al_8hh.html#a26">DILSUPS_TD_UNSPECIFIED</a>) projects += <font class="stringliteral">"?,"</font>;
01749                                 <font class="keywordflow">else</font> {
01750                                         tstamp = <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,pe-&gt;targetdate());
01751                                         <font class="keywordflow">if</font> (tstamp.<a class="code" href="classString.html#a51">at</a>((<font class="keywordtype">int</font>) tstamp.<a class="code" href="classString.html#a105">length</a>()-4,4)==<font class="stringliteral">"0000"</font>) tstamp = tstamp.<a class="code" href="classString.html#a58">before</a>((<font class="keywordtype">int</font>) tstamp.<a class="code" href="classString.html#a105">length</a>()-4);
01752                                         projects += tstamp+<font class="charliteral">','</font>;
01753                                 }
01754                                 <font class="keywordflow">if</font> (pe-&gt;urgency==<a class="code" href="dil2al_8hh.html#a27">DILSUPS_URG_UNSPECIFIED</a>) projects += <font class="stringliteral">"?.?,"</font>;
01755                                 <font class="keywordflow">else</font> projects += <a class="code" href="classString.html">String</a>(pe-&gt;urgency,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">','</font>;
01756                                 <font class="keywordflow">if</font> (pe-&gt;priority==<a class="code" href="dil2al_8hh.html#a28">DILSUPS_PRI_UNSPECIFIED</a>) projects += <font class="stringliteral">"?.?)"</font>;
01757                                 <font class="keywordflow">else</font> projects += <a class="code" href="classString.html">String</a>(pe-&gt;priority,<a class="code" href="dil2al_8hh.html#a95">DILBYID_FLOAT_FORMAT</a>)+<font class="charliteral">')'</font>;
01758                         }
01759                         <font class="keywordflow">if</font> (projects.<a class="code" href="classString.html#a105">length</a>()&lt;=0) projects = <font class="stringliteral">"&amp;nbsp;"</font>;
01760                         newidfile += <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<font class="stringliteral">""</font>,<font class="charliteral">'\n'</font>+<a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a69">HTML_put_name</a>(e-&gt;chars(),e-&gt;chars()),<font class="keyword">true</font>)+<font class="charliteral">'\n'</font>+
01761                                                                                 <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,topics,<font class="keyword">true</font>)+<font class="charliteral">'\n'</font>+
01762                                                                                 <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,projects,<font class="keyword">true</font>),<font class="keyword">true</font>)+<font class="stringliteral">"\n\n"</font>;
01763                 }
01764         }
01765         <font class="comment">// copy free-style footer</font>
01766         <font class="keywordflow">if</font> ((idloc=<a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]*dil2al:[      ]*DIL ID end[   ]*--[&gt;]"</font>),idloc))&lt;0) {
01767                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing footer in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_to_File(), continuing as is\n"</font>;
01768                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01769         }
01770         newidfile += <a class="code" href="classText__File__Buffers.html#m0">tf</a>[ididx].from(idloc);
01771         <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(idfile,newidfile,<font class="stringliteral">"DIL ID"</font>);
01772 }
</pre></div>    </td>
  </tr>
</table>
<a name="b2" doxytag="Detailed_Items_List::Write_Topical_to_Binary_Cache"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool Detailed_Items_List::Write_Topical_to_Binary_Cache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>diln</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classPLLRoot.html">PLLRoot</a>&lt; <a class="el" href="classDIL__entry__Pointer.html">DIL_entry_Pointer</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dep</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>gottext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="utilities_8cc-source.html#l01443">1443</a> of file <a class="el" href="utilities_8cc-source.html">utilities.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="templates_8classic_8hh-source.html#l00086">PLLRoot&lt; PLLType &gt;::head</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00090">PLLRoot&lt; PLLType &gt;::length</a>(), <a class="el" href="utilities_8cc-source.html#l01399">Lock_File</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="templates_8defines_8hh-source.html#l00277">res</a>, <a class="el" href="utilities_8cc-source.html#l01408">Unlock_File</a>(), and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>().
<p>
<div class="fragment"><pre>01443                                                                                                                 {
01444   <font class="comment">// Write a binary copy of the DIL parameters list to a cache file for quick loading.</font>
01445   <font class="comment">/*</font>
01446 <font class="comment">    the structure in each cached topical content file is:</font>
01447 <font class="comment">    bool gottext</font>
01448 <font class="comment">    int DILentrynum</font>
01449 <font class="comment">    for each entry:</font>
01450 <font class="comment">      DIL_ID dilid</font>
01451 <font class="comment">      bool hascontent</font>
01452 <font class="comment">      time_t started</font>
01453 <font class="comment">      time_t required</font>
01454 <font class="comment">      float completion</font>
01455 <font class="comment">      float valuation</font>
01456 <font class="comment">      int textlen</font>
01457 <font class="comment">      char[] text</font>
01458 <font class="comment">  */</font>
01459   <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <font class="keyword">true</font>;
01460   <font class="keywordflow">if</font> (usequickloadcache) {
01461     <a class="code" href="classString.html">String</a> filename((*dil.File(diln)));
01462     <a class="code" href="classString.html">String</a> lockfile(filename+<font class="stringliteral">".lock"</font>), cachefile(filename+<font class="stringliteral">".cache"</font>), crcfile(filename+<font class="stringliteral">".crc"</font>);
01463     <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a12">Lock_File</a>(lockfile,filename+<font class="stringliteral">" locked by Detailed_Items_List::Write_Topical_to_Binary_Cache()\n"</font>)) {
01464       <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Writing topical content to binary cache file\n"</font>;
01465       ofstream cfl(cachefile,ios::binary);
01466       <font class="keywordflow">if</font> (!cfl) {
01467         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write to "</font> &lt;&lt; cachefile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_Topical_to_Binary_Cache()\n"</font>;
01468         <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01469       } <font class="keywordflow">else</font> {
01470         cfl.write((<font class="keyword">const</font> <font class="keywordtype">void</font> *) (&amp;gottext),<font class="keyword">sizeof</font>(gottext));
01471         <font class="keywordtype">int</font> DILentrynum = dep.<a class="code" href="classPLLRoot.html#a6">length</a>();
01472         cfl.write((<font class="keyword">const</font> <font class="keywordtype">void</font> *) (&amp;DILentrynum),<font class="keyword">sizeof</font>(DILentrynum));
01473         <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry__Pointer.html">DIL_entry_Pointer</a>,dep.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <font class="keywordflow">if</font> (!e-&gt;Entry()-&gt;Write_Topical_to_Binary_Cache(cfl,gottext)) { <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>; <font class="keywordflow">break</font>; }
01474         cfl.close();
01475       }
01476       <font class="comment">// write new CRC for filename and unlock</font>
01477       <font class="keywordflow">if</font> (res) <font class="keywordflow">if</font> (system(<font class="stringliteral">"cksum "</font>+filename+<font class="stringliteral">" &gt; "</font>+crcfile)==-1)  <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write new CRC to "</font> &lt;&lt; crcfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_topical_to_Binary_Cache(), continuing as is\n"</font>;
01478       <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a13">Unlock_File</a>(lockfile)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to remove lock file "</font> &lt;&lt; lockfile &lt;&lt; <font class="stringliteral">" in Detailed_Items_List::Write_Topical_to_Binary_Cache(), continuing as is\n"</font>;
01479     } <font class="keywordflow">else</font> {
01480       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to prepare a Quick Load Cache in Detailed_Items_List::Write_Topical_to_Binary_Cache()\n"</font>;
01481       <a class="code" href="templates_8defines_8hh.html#a11">res</a>=<font class="keyword">false</font>;
01482     }
01483   }
01484   <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01485 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="Detailed_Items_List::list"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classPLLRoot.html">PLLRoot</a>&lt;<a class="el" href="classDIL__entry.html">DIL_entry</a>&gt; Detailed_Items_List::list
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dil2al_8hh-source.html#l00706">706</a> of file <a class="el" href="dil2al_8hh-source.html">dil2al.hh</a>.
<p>
Referenced by <a class="el" href="utilities_8cc-source.html#l01643">Binary_Cache_Diagnostic</a>(), <a class="el" href="utilities_8cc-source.html#l01131">Entry_Has_Dependencies</a>(), <a class="el" href="dil2al_8cc-source.html#l00400">exit_report</a>(), <a class="el" href="diladmin_8cc-source.html#l00705">generate_modify_element_FORM_interface</a>(), <a class="el" href="utilities_8cc-source.html#l01189">Get_All_DIL_ID_File_Parameters</a>(), <a class="el" href="utilities_8cc-source.html#l01316">Get_All_Topical_DIL_Parameters</a>(), <a class="el" href="diladmin_8cc-source.html#l00976">modify_DIL_entry_target_date</a>(), <a class="el" href="diladmin_8cc-source.html#l01083">modify_DIL_group_target_dates</a>(), <a class="el" href="diladmin_8cc-source.html#l01254">modify_DIL_group_target_dates_cmd</a>(), <a class="el" href="diladmin_8cc-source.html#l00776">modify_element_through_FORM_interface</a>(), <a class="el" href="utilities_8cc-source.html#l01487">Read_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l01554">Read_Topical_from_Binary_Cache</a>(), <a class="el" href="utilities_8cc-source.html#l01681">Sort_by_Target_Date</a>(), <a class="el" href="diladmin_8cc-source.html#l01424">Tabbed_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l01488">Tabbed_FORM_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l01467">Tabbed_FORM_DIL_Hierarchy_full</a>(), <a class="el" href="diladmin_8cc-source.html#l01443">Tabbed_HTML_DIL_Hierarchy</a>(), <a class="el" href="diladmin_8cc-source.html#l00849">update_DIL_entry_elements</a>(), <a class="el" href="diladmin_8cc-source.html#l00929">update_DIL_entry_parameter_elements</a>(), <a class="el" href="utilities_8cc-source.html#l01416">Write_to_Binary_Cache</a>(), and <a class="el" href="utilities_8cc-source.html#l01699">Write_to_File</a>().    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="dil2al_8hh-source.html">dil2al.hh</a><li><a class="el" href="utilities_8cc-source.html">utilities.cc</a></ul>
<hr><address align="right"><small>Generated on Mon Sep 13 14:53:17 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
