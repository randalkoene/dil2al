<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>alcomp.cc File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>alcomp.cc File Reference</h1><code>#include "<a class="el" href="dil2al_8hh-source.html">dil2al.hh</a>"</code><br>

<p>
<a href="alcomp_8cc-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a0">AL_PREPARATION_DELAY</a>&nbsp;&nbsp;&nbsp;60</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a1">LOCAL_CLEAN_EXIT</a>&nbsp;&nbsp;&nbsp;{ delete[] req; return <a class="el" href="templates_8defines_8hh.html#a5">false</a>; }</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a2">GENERATE_AL_DEPLOOP_CONTINUE</a>&nbsp;&nbsp;&nbsp;prevde = dep[i]; continue</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a3">get_topic_keywords</a> ()</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classString.html">String</a>&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a4">generate_AL_full_entry</a> (<a class="el" href="classString.html">String</a> dilid, int chunkfreq)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classString.html">String</a>&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a5">generate_AL_entry</a> (<a class="el" href="classString.html">String</a> dilid, bool ishighestpriority=<a class="el" href="templates_8defines_8hh.html#a5">false</a>)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classString.html">String</a>&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a6">AL_Day_Marker</a> (<a class="el" href="classString.html">String</a> &amp;dstfile, <a class="el" href="classAL__Day.html">AL_Day</a> *ald)</td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classString.html">String</a>&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a7">AL_Passed_Target_Dates</a> (<a class="el" href="classString.html">String</a> &amp;dstfile, <a class="el" href="classAL__TD.html">AL_TD</a> *atd)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a8">update_main_ALs</a> (<a class="el" href="classDIL__entry.html">DIL_entry</a> *superior)</td></tr>
<tr><td nowrap align=right valign=top>float&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a9">linear_distribution</a> (float i, float i_limit)</td></tr>
<tr><td nowrap align=right valign=top>long *&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a10">DIL_Required_Task_Chunks</a> (<a class="el" href="classDIL__entry.html">DIL_entry</a> **dep, int deplen)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a11">Get_Worked_Estimate</a> ()</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a12">generate_EPS_cells</a> (time_t grouptd, <a class="el" href="classString.html">String</a> &amp;cumreqstr, <a class="el" href="classString.html">String</a> &amp;rowreqstr, double &amp;groupreq, double cumreq, time_t t_current, <a class="el" href="classDIL__entry.html">DIL_entry</a> &amp;de)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a13">generate_AL</a> (<a class="el" href="classDIL__entry.html">DIL_entry</a> **dep, <a class="el" href="classDIL__entry.html">DIL_entry</a> *superior=NULL)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a14">get_AL_entry</a> (<a class="el" href="classString.html">String</a> &amp;alstr, int alpos, <a class="el" href="classString.html">String</a> &amp;rowcontent, int &amp;rowstart, int &amp;rowend)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a15">remove_AL_TC</a> (<a class="el" href="classString.html">String</a> alref, <a class="el" href="classString.html">String</a> dilid)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a16">update_DIL_to_AL</a> ()</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="alcomp_8cc.html#a17">refresh_quick_load_cache</a> ()</td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a name="a0" doxytag="alcomp.cc::AL_PREPARATION_DELAY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define AL_PREPARATION_DELAY&nbsp;&nbsp;&nbsp;60
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00267">267</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>().    </td>
  </tr>
</table>
<a name="a2" doxytag="alcomp.cc::GENERATE_AL_DEPLOOP_CONTINUE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define GENERATE_AL_DEPLOOP_CONTINUE&nbsp;&nbsp;&nbsp;prevde = dep[i]; continue
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="alcomp.cc::LOCAL_CLEAN_EXIT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LOCAL_CLEAN_EXIT&nbsp;&nbsp;&nbsp;{ delete[] req; return <a class="el" href="templates_8defines_8hh.html#a5">false</a>; }
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a6" doxytag="alcomp.cc::AL_Day_Marker"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classString.html">String</a> AL_Day_Marker </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dstfile</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classAL__Day.html">AL_Day</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ald</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00074">74</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00872">AL_Day::DayDate</a>(), <a class="el" href="dil2al_8hh-source.html#l00875">AL_Day::DayMaxt</a>(), <a class="el" href="dil2al_8hh-source.html#l00873">AL_Day::DayStart</a>(), <a class="el" href="dil2al_8hh-source.html#l00874">AL_Day::DayStartMin</a>(), <a class="el" href="dil2al_8hh-source.html#l00871">AL_Day::DayType</a>(), <a class="el" href="dil2al_8hh-source.html#l01254">DEFAULTALDAYEMPHASIS</a>, <a class="el" href="dil2al_8hh-source.html#l00876">AL_Day::Expanded</a>(), <a class="el" href="utilities_8cc-source.html#l02585">HTML_put_href</a>(), <a class="el" href="utilities_8cc-source.html#l02573">HTML_put_table_cell</a>(), <a class="el" href="utilities_8cc-source.html#l02569">HTML_put_table_row</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="dil2al_8hh-source.html#l00881">AL_Day::TD_Head</a>(), <a class="el" href="utilities_8cc-source.html#l01834">time_stamp</a>(), <a class="el" href="utilities_8cc-source.html#l01842">time_stamp_GM</a>(), and <a class="el" href="dil2al_8hh-source.html#l00878">AL_Day::Total</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00119">Active_List::generate_focused_AL</a>(), and <a class="el" href="alcomp_8cc-source.html#l00171">Active_List::generate_wide_AL</a>().
<p>
<div class="fragment"><pre>00074                                                      {
00075 <font class="comment">// Generates a table row with data about ald for inclusion in AL files</font>
00076         <font class="keywordflow">if</font> (!ald) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00077         <a class="code" href="classString.html">String</a> daytxt = <font class="stringliteral">"&lt;!-- @select_TL_DIL_refs: SKIP ROW@ --&gt;&lt;B&gt;Day "</font> + <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d"</font>,ald-&gt;<a class="code" href="classAL__Day.html#a3">DayDate</a>())
00078                         + <font class="stringliteral">"&lt;/B&gt; (suggested start "</font> + <a class="code" href="utilities_8cc.html#a21">time_stamp_GM</a>(<font class="stringliteral">"%H:%M"</font>,ald-&gt;<a class="code" href="classAL__Day.html#a4">DayStart</a>()) + <font class="stringliteral">", limits "</font>
00079                         + <a class="code" href="utilities_8cc.html#a21">time_stamp_GM</a>(<font class="stringliteral">"%H:%M"</font>,ald-&gt;<a class="code" href="classAL__Day.html#a5">DayStartMin</a>()) + <font class="charliteral">'-'</font> + <a class="code" href="utilities_8cc.html#a21">time_stamp_GM</a>(<font class="stringliteral">"%H:%M"</font>,ald-&gt;<a class="code" href="classAL__Day.html#a6">DayMaxt</a>());
00080         <font class="keywordflow">if</font> (ald-&gt;<a class="code" href="classAL__Day.html#a2">DayType</a>()==1) daytxt += <font class="stringliteral">", worked "</font> + <a class="code" href="utilities_8cc.html#a21">time_stamp_GM</a>(<font class="stringliteral">"%H:%M"</font>,alworked);
00081         daytxt += <font class="stringliteral">"), "</font>; daytxt += dec(ald-&gt;<a class="code" href="classAL__Day.html#a9">Total</a>()); daytxt += <font class="stringliteral">" task chunks"</font>;
00082         <font class="keywordflow">if</font> (ald-&gt;<a class="code" href="classAL__Day.html#a7">Expanded</a>()) daytxt += <font class="stringliteral">" (expanded)"</font>;
00083         <font class="keywordflow">if</font> (ald-&gt;<a class="code" href="classAL__Day.html#a12">TD_Head</a>()) {
00084                 <a class="code" href="classString.html">String</a> relidfile(<a class="code" href="utilities_8cc.html#a30">relurl</a>(dstfile,idfile));
00085                 daytxt += <font class="stringliteral">", target dates: "</font>;
00086                 <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__TD.html">AL_TD</a>,ald-&gt;<a class="code" href="classAL__Day.html#a12">TD_Head</a>(),1) {
00087                         daytxt += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((relidfile+<font class="charliteral">'#'</font>)+e-&gt;DE()-&gt;chars(),<font class="stringliteral">"DIL#"</font> + <a class="code" href="classString.html">String</a>(e-&gt;DE()-&gt;chars()));
00088                         daytxt += <font class="stringliteral">" ("</font> + <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%H:%M"</font>,e-&gt;DE()-&gt;Target_Date()) + <font class="charliteral">')'</font>;
00089                         <font class="keywordflow">if</font> (e-&gt;Next()) daytxt += <font class="stringliteral">", "</font>;
00090                 }
00091         }
00092         <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<a class="code" href="dil2al_8hh.html#a98">DEFAULTALDAYEMPHASIS</a>,<a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,daytxt)) + <font class="charliteral">'\n'</font>;
00093 }
</pre></div>    </td>
  </tr>
</table>
<a name="a7" doxytag="alcomp.cc::AL_Passed_Target_Dates"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classString.html">String</a> AL_Passed_Target_Dates </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dstfile</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classAL__TD.html">AL_TD</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>atd</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00095">95</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l02634">Elipsis_At</a>(), <a class="el" href="utilities_8cc-source.html#l02593">HTML_put_form</a>(), <a class="el" href="utilities_8cc-source.html#l02617">HTML_put_form_checkbox</a>(), <a class="el" href="utilities_8cc-source.html#l02597">HTML_put_form_input</a>(), <a class="el" href="utilities_8cc-source.html#l02611">HTML_put_form_radio</a>(), <a class="el" href="utilities_8cc-source.html#l02607">HTML_put_form_reset</a>(), <a class="el" href="utilities_8cc-source.html#l02603">HTML_put_form_submit</a>(), <a class="el" href="utilities_8cc-source.html#l02630">HTML_put_form_text</a>(), <a class="el" href="utilities_8cc-source.html#l02585">HTML_put_href</a>(), <a class="el" href="utilities_8cc-source.html#l02555">HTML_remove_tags</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), and <a class="el" href="utilities_8cc-source.html#l01834">time_stamp</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00119">Active_List::generate_focused_AL</a>().
<p>
<div class="fragment"><pre>00095                                                              {
00096 <font class="comment">// Generates a list of passed target date DIL entries</font>
00097   <font class="keywordflow">if</font> (atd) {
00098     <a class="code" href="classString.html">String</a> diltext;
00099     <a class="code" href="classString.html">String</a> passedstr(<a class="code" href="utilities_8cc.html#a71">HTML_put_form_input</a>(<font class="stringliteral">"hidden"</font>,<font class="stringliteral">"name=\"dil2al\" value=\"MEtgroup\""</font>)+<font class="stringliteral">"\n&lt;B&gt;Passed Target Dates:&lt;/B&gt;\n&lt;UL&gt;\n"</font>), relidfile(<a class="code" href="utilities_8cc.html#a30">relurl</a>(dstfile,idfile));
00100     <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__TD.html">AL_TD</a>,atd,1) {
00101       <font class="keywordflow">if</font> (e-&gt;DE()-&gt;Entry_Text()) diltext = (*e-&gt;DE()-&gt;Entry_Text());
00102       <font class="keywordflow">else</font> diltext=<font class="stringliteral">""</font>;
00103       <a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(diltext);
00104       <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(diltext,30);
00105       <a class="code" href="classString.html">String</a> deidstr(e-&gt;DE()-&gt;chars());
00106       passedstr += <font class="stringliteral">"&lt;LI&gt;"</font> + <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((relidfile+<font class="charliteral">'#'</font>)+deidstr,<font class="stringliteral">"DIL#"</font>+ deidstr)
00107         + <font class="stringliteral">"[&lt;A HREF=\"file:///cgi-bin/dil2al?dil2al=MEI&amp;DILID="</font>+deidstr+<font class="stringliteral">"\"&gt;edit&lt;/A&gt;] ("</font>
00108         + <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,e-&gt;DE()-&gt;Target_Date()) + <font class="stringliteral">") "</font>
00109         + <a class="code" href="utilities_8cc.html#a75">HTML_put_form_checkbox</a>(<a class="code" href="classString.html">String</a>(<font class="stringliteral">"TDCHKBX"</font>)+deidstr,<font class="stringliteral">"noupdate"</font>,<font class="stringliteral">""</font>,<font class="keyword">true</font>)
00110         + <a class="code" href="utilities_8cc.html#a77">HTML_put_form_text</a>(<a class="code" href="classString.html">String</a>(<font class="stringliteral">"TD"</font>)+deidstr,12) + <font class="charliteral">' '</font> + diltext + <font class="charliteral">'\n'</font>;
00111     }
00112     passedstr += <font class="stringliteral">"&lt;/UL&gt;\n"</font>+<a class="code" href="utilities_8cc.html#a74">HTML_put_form_radio</a>(<font class="stringliteral">"TDupdate"</font>,<font class="stringliteral">"group"</font>,<font class="stringliteral">"Minimize fragmentation"</font>,<font class="keyword">true</font>)
00113       + <font class="charliteral">' '</font>+<a class="code" href="utilities_8cc.html#a74">HTML_put_form_radio</a>(<font class="stringliteral">"TDupdate"</font>,<font class="stringliteral">"direct"</font>,<font class="stringliteral">"Direct"</font>)+<font class="stringliteral">"&lt;BR&gt;\n"</font>
00114       + <a class="code" href="utilities_8cc.html#a72">HTML_put_form_submit</a>(<font class="stringliteral">"Update"</font>)+<font class="charliteral">' '</font>+<a class="code" href="utilities_8cc.html#a272">HTML_put_form_reset</a>()+<font class="stringliteral">"\n&lt;P&gt;\n"</font>;
00115     <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a70">HTML_put_form</a>(htmlformmethod,htmlforminterface,passedstr);
00116   } <font class="keywordflow">else</font> <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00117 }
</pre></div>    </td>
  </tr>
</table>
<a name="a10" doxytag="alcomp.cc::DIL_Required_Task_Chunks"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> long* DIL_Required_Task_Chunks </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDIL__entry.html">DIL_entry</a> **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dep</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>deplen</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00273">273</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="dil2al_8hh-source.html#l00683">DIL_entry::Completion_State</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, and <a class="el" href="dil2al_8hh-source.html#l00682">DIL_entry::Time_Required</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>().
<p>
<div class="fragment"><pre>00273                                                               {
00274 <font class="comment">// returns an array with the number of task chunks</font>
00275 <font class="comment">// required to complete the DIL entries in the array</font>
00276 <font class="comment">// dep with length deplen</font>
00277   <font class="keywordtype">long</font> * req = <font class="keyword">new</font> <font class="keywordtype">long</font>[deplen];
00278   <font class="keywordtype">float</font> completion;
00279   <font class="keywordtype">long</font> c_size = ((long) timechunksize)*60;
00280   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;deplen; i++) {
00281     req[i] = dep[i]-&gt;<a class="code" href="classDIL__entry.html#a14">Time_Required</a>();
00282     completion = dep[i]-&gt;<a class="code" href="classDIL__entry.html#a15">Completion_State</a>();
00283     <font class="keywordflow">if</font> (completion&lt;0.0) completion = 1.0; <font class="comment">// negative completion values have special meaning but do imply that the task is no longer scheduled to be completed</font>
00284     <font class="keywordflow">if</font> (completion&gt;1.0) {
00285       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Completion ratio exceeds 1.0 for DIL#"</font>;
00286       <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"&lt;A HREF=\""</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; dep[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"\"&gt;"</font>;
00287       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; dep[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>();
00288       <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/A&gt;"</font>;
00289       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">" in DIL_Required_Task_Chunks(), continuing\n"</font>;
00290       req[i] = 0;
00291       <font class="keywordflow">continue</font>;
00292     }
00293     completion = ceil(((<font class="keywordtype">double</font>) req[i])*(1.0-completion)); <font class="comment">// determine remaining time required</font>
00294     req[i] = (long) completion;
00295     <font class="keywordflow">if</font> (req[i] % c_size) req[i] = (req[i]/c_size) + 1;
00296     <font class="keywordflow">else</font> req[i] /= c_size;
00297   }
00298   <font class="keywordflow">return</font> req;
00299 }
</pre></div>    </td>
  </tr>
</table>
<a name="a13" doxytag="alcomp.cc::generate_AL"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool generate_AL </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDIL__entry.html">DIL_entry</a> **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dep</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classDIL__entry.html">DIL_entry</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>superior</em> = NULL</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00985">985</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="alcomp_8cc-source.html#l00922">Active_List::Add_Passed_Target_Date</a>(), <a class="el" href="alcomp_8cc-source.html#l00916">Active_List::Add_Target_Date</a>(), <a class="el" href="dil2al_8hh-source.html#l00926">Active_List::AL_Head</a>(), <a class="el" href="alcomp_8cc-source.html#l00267">AL_PREPARATION_DELAY</a>, <a class="el" href="dil2al_8hh-source.html#l00927">Active_List::AL_Tail</a>(), <a class="el" href="alcomp_8cc-source.html#l00908">Active_List::allocate</a>(), <a class="el" href="alcomp_8cc-source.html#l00891">Active_List::allocate_with_value</a>(), <a class="el" href="dil2al_8hh-source.html#l00924">Active_List::available_before</a>(), <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="dil2al_8hh-source.html#l00872">AL_Day::DayDate</a>(), <a class="el" href="dil2al_8hh-source.html#l00875">AL_Day::DayMaxt</a>(), <a class="el" href="dil2al_8hh-source.html#l00873">AL_Day::DayStart</a>(), <a class="el" href="dil2al_8hh-source.html#l00916">Active_List::deavail</a>, <a class="el" href="dil2al_8hh-source.html#l01291">DEFAULTALCUMULATIVEREQHEADER</a>, <a class="el" href="dil2al_8hh-source.html#l01299">DEFAULTALCUMULATIVEREQTAIL</a>, <a class="el" href="dil2al_8hh-source.html#l00531">DIL_Topical_List::dil</a>, <a class="el" href="alcomp_8cc-source.html#l00273">DIL_Required_Task_Chunks</a>(), <a class="el" href="utilities_8cc-source.html#l02634">Elipsis_At</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="alcomp_8cc-source.html#l00847">Active_List::expand</a>(), <a class="el" href="dil2al_8hh-source.html#l00076">filetitle_t::file</a>, <a class="el" href="dil2al_8hh-source.html#l00921">Active_List::filestr</a>(), <a class="el" href="classPLLHandle.html#a9">PLLHandle&lt; DIL_entry &gt;::fulllength</a>(), <a class="el" href="alcomp_8cc-source.html#l00941">generate_EPS_cells</a>(), <a class="el" href="alcomp_8cc-source.html#l00119">Active_List::generate_focused_AL</a>(), <a class="el" href="alcomp_8cc-source.html#l00171">Active_List::generate_wide_AL</a>(), <a class="el" href="alcomp_8cc-source.html#l00901">Active_List::Get_Avail_TC</a>(), <a class="el" href="dil2al_8hh-source.html#l00819">AL_TC::Get_DE</a>(), <a class="el" href="dil2al_8hh-source.html#l00920">Active_List::get_supstr</a>(), <a class="el" href="alcomp_8cc-source.html#l00301">Get_Worked_Estimate</a>(), <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="utilities_8cc-source.html#l02617">HTML_put_form_checkbox</a>(), <a class="el" href="utilities_8cc-source.html#l02630">HTML_put_form_text</a>(), <a class="el" href="utilities_8cc-source.html#l02585">HTML_put_href</a>(), <a class="el" href="utilities_8cc-source.html#l02573">HTML_put_table_cell</a>(), <a class="el" href="utilities_8cc-source.html#l02569">HTML_put_table_row</a>(), <a class="el" href="utilities_8cc-source.html#l02555">HTML_remove_tags</a>(), <a class="el" href="utilities_8cc-source.html#l01016">DIL_entry::Is_Dependency_Of</a>(), <a class="el" href="dil2al_8hh-source.html#l00922">Active_List::length</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00060">PLLHandle&lt; AL_TC &gt;::Next</a>(), <a class="el" href="templates_8classic_8hh-source.html#l00342">PLL_LOOP_FORWARD</a>, <a class="el" href="dil2al_8hh-source.html#l01180">RELLISTSDIR</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="alcomp_8cc-source.html#l00930">Active_List::remove_unused_TCs</a>(), <a class="el" href="alcomp_8cc-source.html#l00880">Active_List::set_TC_values</a>(), <a class="el" href="dil2al_8hh-source.html#l00676">DIL_entry::Target_Date</a>(), <a class="el" href="utilities_8cc-source.html#l01824">Time</a>(), <a class="el" href="utilities_8cc-source.html#l01834">time_stamp</a>(), <a class="el" href="dil2al_8hh-source.html#l00077">filetitle_t::title</a>, <a class="el" href="dil2al_8hh-source.html#l00669">DIL_entry::Topics</a>(), <a class="el" href="alcomp_8cc-source.html#l00209">update_main_ALs</a>(), <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l02116">write_file_from_String</a>().
<p>
Referenced by <a class="el" href="tladmin_8cc-source.html#l00161">select_TL_DIL_refs</a>(), <a class="el" href="tladmin_8cc-source.html#l00117">stop_TL_chunk</a>(), and <a class="el" href="alcomp_8cc-source.html#l01334">update_DIL_to_AL</a>().
<p>
<div class="fragment"><pre>00985                                                                 {
00986 <font class="comment">// create AL from sorted array of DIL entries</font>
00987 <font class="comment">// if superior == NULL then the AL spans all DIL categories</font>
00988 <font class="comment">// if generatealtcs == 0, a complete AL will be computed, for</font>
00989 <font class="comment">// the completion of all DIL entries that are dependencies of</font>
00990 <font class="comment">// superior</font>
00991 <font class="comment">// if generatealmaxt &gt; 0, the AL will be computed up to the</font>
00992 <font class="comment">// limit date specified</font>
00993 <font class="comment">// if generatealtcs &gt; 0, the AL will be computed for that</font>
00994 <font class="comment">// number of Task Chunks</font>
00995         <font class="comment">// check parameters</font>
00996         <font class="keywordflow">if</font> (!dep) {
00997                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing sorted DIL pointer in generate_AL()\n"</font>;
00998                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00999         }
01000         <font class="keywordflow">if</font> (!dep[0]) {
01001                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Empty DIL in generate_AL()\n"</font>;
01002                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01003         }
01004         <font class="keywordflow">if</font> (generatealtcs&lt;0) {
01005                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Invalid AL interval size ("</font> &lt;&lt; generatealtcs &lt;&lt; <font class="stringliteral">") requested in generate_AL()\n"</font>;
01006                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01007         }
01008         <font class="comment">// prepare DIL entry data</font>
01009         <font class="keywordtype">int</font> deplen = dep[0]-&gt;<a class="code" href="classPLLHandle.html#a9">fulllength</a>(); <font class="comment">// *** if you supply a custom list of sorted entries, supply the length of the list as well</font>
01010         <font class="keywordtype">long</font> * req = <a class="code" href="alcomp_8cc.html#a10">DIL_Required_Task_Chunks</a>(dep,deplen);
01011         <font class="comment">// allocate desired AL interval</font>
01012         <font class="comment">// Note: If there is ever a need for intervals beginning</font>
01013         <font class="comment">// at other times than the current time, that can be</font>
01014         <font class="comment">// accomplished easily by setting curtime to the desired</font>
01015         <font class="comment">// start of the interval.</font>
01016         time_t algenhpd = ((time_t) algenregular)*3600; <font class="comment">// seconds per day (before any expansion)</font>
01017         <font class="keywordflow">if</font> (!superior) algenhpd = ((time_t) algenall)*3600;
01018         <font class="keywordflow">else</font> { <font class="comment">// detect specific hpd for superior</font>
01019                 <font class="comment">// *** (search up or down?)</font>
01020                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Search for superior-specific hours-per-day parmameter not yet implemented in generate_AL()\n"</font>;
01021         }
01022         <a class="code" href="alcomp_8cc.html#a11">Get_Worked_Estimate</a>(); <font class="comment">// estimated time already worked on current day</font>
01023 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01024 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"alworked = "</font> &lt;&lt; alworked &lt;&lt; <font class="charliteral">'\n'</font>;
01025 <font class="preprocessor">#endif</font>
01026 <font class="preprocessor"></font><font class="preprocessor">        #define LOCAL_CLEAN_EXIT { delete[] req; return false; }</font>
01027 <font class="preprocessor"></font>        <a class="code" href="classActive__List.html">Active_List</a> al(req,deplen,algenhpd,superior);
01028 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01029 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"allength = "</font> &lt;&lt; al.<a class="code" href="classActive__List.html#a3">length</a>() &lt;&lt; <font class="charliteral">'\n'</font>;
01030 <font class="preprocessor">#endif</font>
01031 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (al.<a class="code" href="classActive__List.html#a3">length</a>()&lt;1) LOCAL_CLEAN_EXIT
01032         <font class="comment">// distribute task chunks per DIL entry with target date within AL interval</font>
01033         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Distributing task chunks per DIL entry over "</font> &lt;&lt; al.<a class="code" href="classActive__List.html#a3">length</a>() &lt;&lt; <font class="stringliteral">" AL task chunks\n"</font>;
01034         <font class="keywordtype">float</font> sumval=1.0, uval; <font class="keywordtype">double</font> cumreq = 0.0, groupreq = 0.0; <font class="keywordtype">int</font> groupnum = 0;
01035         <a class="code" href="classString.html">String</a> cumreqstr, rowreqstr, entryexcerptcell, dstfile, relidfile; time_t grouptd = -1;
01036         <font class="keywordflow">if</font> (alshowcumulativereq) { <font class="comment">// cumulative required time file header</font>
01037                 cumreqstr = <a class="code" href="dil2al_8hh.html#a104">DEFAULTALCUMULATIVEREQHEADER</a>;
01038                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@SUP@"</font>,al.<a class="code" href="classActive__List.html#a1">get_supstr</a>());
01039                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@EPSHRS@"</font>,<a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) alepshours,<font class="stringliteral">"%5.2f"</font>));
01040                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@FORMMETHOD@"</font>,htmlformmethod);
01041                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@FORMACTION@"</font>,htmlforminterface);
01042                 dstfile = basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+al.<a class="code" href="classActive__List.html#a2">filestr</a>()+<font class="stringliteral">".ctr.html"</font>;
01043                 relidfile = <a class="code" href="utilities_8cc.html#a30">relurl</a>(dstfile,idfile);
01044         }
01045         time_t t_current = <a class="code" href="utilities_8cc.html#a19">Time</a>(NULL) + <a class="code" href="alcomp_8cc.html#a0">AL_PREPARATION_DELAY</a>; <font class="comment">// expected time upon completion of AL generation</font>
01046         time_t t_start = al.<a class="code" href="classActive__List.html#a7">AL_Head</a>()-&gt;<a class="code" href="classAL__Day.html#a3">DayDate</a>()+al.<a class="code" href="classActive__List.html#a7">AL_Head</a>()-&gt;<a class="code" href="classAL__Day.html#a4">DayStart</a>(); <font class="comment">// AL start</font>
01047         time_t t_limit = al.<a class="code" href="classActive__List.html#a8">AL_Tail</a>()-&gt;<a class="code" href="classAL__Day.html#a3">DayDate</a>()+al.<a class="code" href="classActive__List.html#a8">AL_Tail</a>()-&gt;<a class="code" href="classAL__Day.html#a6">DayMaxt</a>(); <font class="comment">// AL limit</font>
01048         srand(t_current);
01049         <font class="keywordflow">if</font> (superior) { <font class="comment">// *** DIL entry specific AL</font>
01050                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Actual dependency check for DIL entry specific AL not yet implemented in generate_AL()\n"</font>;
01051         }
01052         <font class="keywordtype">int</font> i, cnt = 0;
01053         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"DEs : "</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); <a class="code" href="classDIL__entry.html">DIL_entry</a> * prevde; <font class="comment">// use prevde, since dep[i-1] can point to DIL entry that does not satisfy the conditionals below</font>
01054 <font class="preprocessor">        #define GENERATE_AL_DEPLOOP_CONTINUE prevde = dep[i]; continue</font>
01055 <font class="preprocessor"></font>        <font class="keywordflow">for</font> (i=0; ((i&lt;deplen) &amp;&amp; (dep[i]-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()&lt;t_limit)); i++) <font class="keywordflow">if</font> ((req[i]&gt;0) &amp;&amp; (dep[i]-&gt;<a class="code" href="classDIL__entry.html#a19">Is_Dependency_Of</a>(superior))) { <font class="comment">// non-completed DIL entries</font>
01056 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01057 <font class="preprocessor"></font>                <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; dep[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; req[i] &lt;&lt; <font class="stringliteral">") :\n"</font>;
01058 <font class="preprocessor">#endif</font>
01059 <font class="preprocessor"></font>                <font class="keywordflow">if</font> (alshowcumulativereq) { <font class="comment">// compute cumulative required time</font>
01060                         <a class="code" href="classDIL__Topical__List.html">DIL_Topical_List</a> * dtl = dep[i]-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(0);
01061                         time_t curtd = dep[i]-&gt;Target_Date();
01062                         <font class="keywordflow">if</font> (grouptd&gt;=0) { <font class="comment">// if first row of form</font>
01063                                 <font class="keywordflow">if</font> (curtd==grouptd) rowreqstr += <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<font class="stringliteral">"@GROUPTREQ@"</font>)+<a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a75">HTML_put_form_checkbox</a>(<a class="code" href="classString.html">String</a>(<font class="stringliteral">"TDCHKBX"</font>)+prevde-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"noupdate@GROUPCHECKED@"</font>,<font class="stringliteral">""</font>)
01064                                         +<a class="code" href="utilities_8cc.html#a77">HTML_put_form_text</a>(<a class="code" href="classString.html">String</a>(<font class="stringliteral">"TD"</font>)+prevde-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"@GROUPEPSTD@"</font>,12)); <font class="comment">// if in same group, add @place holders@ to row</font>
01065                                 <font class="keywordflow">else</font> { <font class="comment">// if not in same group complete group data up to previous entry (prevde)</font>
01066                                         <a class="code" href="alcomp_8cc.html#a12">generate_EPS_cells</a>(grouptd,cumreqstr,rowreqstr,groupreq,cumreq,t_current,*prevde);
01067                                         groupnum++;
01068                                 }
01069                                 <font class="comment">// *** optionally remove the following cell once T_{pref} is used</font>
01070                                 <font class="comment">//     to determine preferable shifts</font>
01071                                 rowreqstr += entryexcerptcell;
01072                                 cumreqstr += <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<font class="stringliteral">""</font>,rowreqstr)+<font class="charliteral">'\n'</font>;
01073                         }
01074                         grouptd = curtd;
01075                         groupreq += (double) req[i];
01076                         cumreq += (double) req[i];
01077                         rowreqstr = <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,dec(groupnum))+
01078                                           <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((relidfile+<font class="charliteral">'#'</font>)+dep[i]-&gt;chars(),<font class="stringliteral">"DIL#"</font> + <a class="code" href="classString.html">String</a>(dep[i]-&gt;chars())))+
01079                                           <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((<a class="code" href="utilities_8cc.html#a30">relurl</a>(dstfile,dtl-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m0">file</a>)+<font class="charliteral">'#'</font>)+dep[i]-&gt;chars(),dtl-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m1">title</a>)+<font class="stringliteral">" [&lt;A HREF=\"file:///cgi-bin/dil2al?dil2al=MEI&amp;DILID="</font>+dep[i]-&gt;str()+<font class="stringliteral">"\"&gt;edit&lt;/A&gt;]"</font>)+
01080                                           <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,curtd))+
01081                                           <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="classString.html">String</a>((((<font class="keywordtype">double</font>) req[i])*((<font class="keywordtype">double</font>) timechunksize))/60.0,<font class="stringliteral">"%6.2f"</font>))+
01082                                           <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="classString.html">String</a>((cumreq*((<font class="keywordtype">double</font>) timechunksize))/60.0,<font class="stringliteral">"%6.2f"</font>));
01083                         <font class="keywordflow">if</font> (dep[i]-&gt;Entry_Text()) entryexcerptcell = (*dep[i]-&gt;Entry_Text());
01084                         <font class="keywordflow">else</font> entryexcerptcell = <font class="stringliteral">"(Missing Text Content)"</font>;
01085                         <a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(entryexcerptcell);
01086                         <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(entryexcerptcell,alcumtimereqexcerptlength);
01087                         entryexcerptcell = <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,entryexcerptcell);
01088                 }
01089                 <font class="keywordflow">if</font> (dep[i]-&gt;Target_Date()&lt;t_start) { <font class="comment">// skip DIL entries with target date prior to current time</font>
01090                         al.<a class="code" href="classActive__List.html#a14">Add_Passed_Target_Date</a>(dep[i]); <font class="comment">// add to list of passed target date DIL entries</font>
01091                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Warning - Target Date of DIL entry "</font>;
01092                         <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;A HREF=\""</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; dep[i]-&gt;chars() &lt;&lt; <font class="stringliteral">"\"&gt;"</font>;
01093                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; dep[i]-&gt;chars();
01094                         <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/A&gt;"</font>;
01095                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">" precedes current time\n"</font>;
01096                         GENERATE_AL_DEPLOOP_CONTINUE;
01097                 }
01098                 al.<a class="code" href="classActive__List.html#a13">Add_Target_Date</a>(dep[i]); <font class="comment">// add target date reference</font>
01099                 <font class="comment">// *** simplify the below by making member functions</font>
01100                 <font class="comment">//     that do things like take req[i], automatically</font>
01101                 <font class="comment">//     check if expansion is allowed, do the work, and</font>
01102                 <font class="comment">//     return the remainder for req[i]</font>
01103                 <font class="keywordtype">long</font> expandn = req[i] - al.<a class="code" href="classActive__List.html#a5">available_before</a>(dep[i]-&gt;Target_Date()); <font class="comment">// also sets al.deavail</font>
01104                 <font class="keywordflow">if</font> ((expandn&gt;0) &amp;&amp; (alautoexpand)) {
01105                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Expanded for DIL entry #"</font> &lt;&lt; dep[i]-&gt;chars() &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; expandn &lt;&lt; <font class="stringliteral">")\n"</font>;
01106                         <font class="keywordflow">if</font> ((expandn -= al.<a class="code" href="classActive__List.html#a6">expand</a>(expandn,dep[i]-&gt;Target_Date()))!=0) {
01107                                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry #"</font>;
01108                                 <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;A HREF=\""</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; dep[i]-&gt;chars() &lt;&lt; <font class="stringliteral">"\"&gt;"</font>;
01109                                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; dep[i]-&gt;chars();
01110                                 <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/A&gt;"</font>;
01111                                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">" tasks cannot be completed before "</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,dep[i]-&gt;Target_Date()) &lt;&lt; <font class="stringliteral">"(required: "</font> &lt;&lt; req[i] &lt;&lt; <font class="stringliteral">", available: "</font> &lt;&lt; al.<a class="code" href="classActive__List.html#m2">deavail</a> &lt;&lt;  <font class="stringliteral">")\n"</font>;
01112                         }
01113                 }
01114                 <font class="comment">// *** currently only linear distribution function available</font>
01115                 <font class="keywordflow">if</font> ((sumval=al.<a class="code" href="classActive__List.html#a9">set_TC_values</a>())&gt;0.0) {
01116                         <font class="comment">// randomly allocate TCs for this DIL entry</font>
01117                         <font class="keywordflow">while</font> ((req[i]&gt;0) &amp;&amp; (al.<a class="code" href="classActive__List.html#m2">deavail</a>&gt;0)) {
01118                                 uval = sumval*(((float) rand()) / ((float) RAND_MAX));
01119                                 uval = al.<a class="code" href="classActive__List.html#a10">allocate_with_value</a>(uval,dep[i]);
01120                                 <font class="keywordflow">if</font> (uval&gt;0.0) {
01121                                         sumval -= uval;
01122                                         req[i]--;
01123 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01124 <font class="preprocessor"></font>                                        <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__Day.html">AL_Day</a>,al.<a class="code" href="classActive__List.html#a7">AL_Head</a>(),1) {
01125                                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'|'</font>;
01126                                                 <font class="keywordflow">if</font> (e-&gt;TC_Head()) { 
01127                                                         <font class="keywordflow">for</font> (<a class="code" href="classAL__TC.html">AL_TC</a> * etc = e-&gt;TC_Head(); (etc); etc = etc-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>())
01128                                                                 <font class="keywordflow">if</font> (etc-&gt;<a class="code" href="classAL__TC.html#a6">Get_DE</a>()) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'x'</font>; <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'_'</font>;
01129                                                 }
01130                                         }
01131                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01132 <font class="preprocessor">#endif</font>
01133 <font class="preprocessor"></font>                                }
01134                         }
01135                 } <font class="keywordflow">else</font> {
01136                         <font class="keywordflow">if</font> (sumval==0.0) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No task chunks available for DIL entry #"</font> &lt;&lt; dep[i]-&gt;chars() &lt;&lt; <font class="stringliteral">" before target date "</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,dep[i]-&gt;Target_Date()) &lt;&lt; <font class="stringliteral">"(required: "</font> &lt;&lt; req[i] &lt;&lt; <font class="stringliteral">", available: "</font> &lt;&lt; al.<a class="code" href="classActive__List.html#m2">deavail</a> &lt;&lt;  <font class="stringliteral">")\n"</font>;
01137                         <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Negative sum of values for DIL entry #"</font> &lt;&lt; dep[i]-&gt;chars() &lt;&lt; <font class="stringliteral">" in generate_AL(), continuing\n"</font>;
01138                 }
01139                 prevde = dep[i];
01140                 cnt++;
01141 <font class="preprocessor">#ifdef DEBUG</font>
01142 <font class="preprocessor"></font>                <font class="keywordflow">if</font> ((i%10)==0) { VOUT &lt;&lt; '&gt;'; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
01143 <font class="preprocessor">#endif</font>
01144 <font class="preprocessor"></font>        }
01145         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Scheduled DIL entries with target date in requested range: "</font> &lt;&lt; cnt &lt;&lt; <font class="charliteral">'\n'</font>;
01146         <font class="keywordflow">if</font> (alshowcumulativereq) { <font class="comment">// cumulative required time file tail</font>
01147                 <a class="code" href="classString.html">String</a> cumreqtail(<a class="code" href="dil2al_8hh.html#a105">DEFAULTALCUMULATIVEREQTAIL</a>);
01148                 cumreqtail.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@SUP@"</font>,al.<a class="code" href="classActive__List.html#a1">get_supstr</a>());
01149                 cumreqtail.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@ALFILE@"</font>,al.<a class="code" href="classActive__List.html#a2">filestr</a>());
01150                 cumreqtail.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@ALDATE@"</font>,<a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%c"</font>));
01151                 <a class="code" href="alcomp_8cc.html#a12">generate_EPS_cells</a>(grouptd,cumreqstr,rowreqstr,groupreq,cumreq,t_current,*prevde); <font class="comment">// final call to complete grouop data for all entries</font>
01152                 rowreqstr += entryexcerptcell;
01153                 cumreqstr += <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<font class="stringliteral">""</font>,rowreqstr)+<font class="charliteral">'\n'</font> + cumreqtail;
01154                 <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(dstfile,cumreqstr,<font class="stringliteral">"AL Cumulative Time Required"</font>);
01155         }
01156 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01157 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"*\n"</font>;
01158 <font class="preprocessor">#endif</font>
01159 <font class="preprocessor"></font>        <font class="comment">// randomly pick tasks that could not be allocated entirely before their target dates</font>
01160         <a class="code" href="classAL__TC.html">AL_TC</a> * atc = al.<a class="code" href="classActive__List.html#a11">Get_Avail_TC</a>(0);
01161         <font class="keywordtype">int</font> j, k = 1; cnt = 0;
01162         <font class="keywordflow">while</font> (k&gt;=0) {
01163                 <font class="comment">// random DIL entry</font>
01164                 j = (int) (((float) i)*((float) rand()) / ((float) RAND_MAX));
01165                 <font class="keywordflow">if</font> (j&gt;=i) j=i-1;
01166                 <font class="keywordflow">if</font> (j&lt;0) <font class="keywordflow">break</font>; <font class="comment">// i==0</font>
01167                 <font class="comment">// find nearest DIL entry requiring task chunks</font>
01168                 <font class="comment">// Note: current order of search gives partially</font>
01169                 <font class="comment">// allocated DIL entries priority over DIL entries</font>
01170                 <font class="comment">// with target dates prior to current time</font>
01171                 <font class="keywordflow">for</font> (k = j; ((k&lt;i) &amp;&amp; (req[k]&lt;=0)); k++);
01172                 <font class="keywordflow">if</font> (k&gt;=i) <font class="keywordflow">for</font> (k = (j-1); ((k&gt;=0) &amp;&amp; (req[k]&lt;=0)); k--);
01173                 <font class="comment">// allocate earliest available task chunk in AL</font>
01174                 <font class="keywordflow">if</font> (k&gt;=0) {
01175                         <font class="keywordflow">if</font> (al.<a class="code" href="classActive__List.html#a12">allocate</a>(dep[k])) {
01176                                 req[k]--;
01177 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01178 <font class="preprocessor"></font>                                <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__Day.html">AL_Day</a>,al.<a class="code" href="classActive__List.html#a7">AL_Head</a>(),1) {
01179                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'|'</font>;
01180                                         <font class="keywordflow">if</font> (e-&gt;TC_Head()) { 
01181                                                 <font class="keywordflow">for</font> (<a class="code" href="classAL__TC.html">AL_TC</a> * etc = e-&gt;TC_Head(); (etc); etc = etc-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>())
01182                                                         <font class="keywordflow">if</font> (etc-&gt;<a class="code" href="classAL__TC.html#a6">Get_DE</a>()) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'x'</font>; <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'_'</font>;
01183                                         }
01184                                 }
01185                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01186 <font class="preprocessor">#endif</font>
01187 <font class="preprocessor"></font>                        } <font class="keywordflow">else</font> <font class="keywordflow">break</font>;
01188                 }
01189 <font class="preprocessor">#ifdef DEBUG</font>
01190 <font class="preprocessor"></font>                <font class="keywordflow">if</font> ((cnt%10)==0) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'+'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
01191 <font class="preprocessor">#endif</font>
01192 <font class="preprocessor"></font>                cnt++;
01193         }
01194         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Scheduled tasks that could not be completed before target dates: "</font> &lt;&lt; cnt &lt;&lt; <font class="charliteral">'\n'</font>;
01195 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01196 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"*\n"</font>;
01197 <font class="preprocessor">#endif</font>
01198 <font class="preprocessor"></font>        <font class="comment">// randomly pick tasks that have target dates exceeding the AL interval</font>
01199         <font class="keywordtype">int</font> remlen = deplen - i;
01200         k = 0; cnt = 0;
01201         <font class="keywordflow">while</font> (k&lt;deplen) {
01202                 <font class="comment">// random DIL entry</font>
01203                 j = (int) (((float) remlen)*((float) rand()) / ((float) RAND_MAX));
01204                 <font class="keywordflow">if</font> (j&gt;=remlen) j=remlen-1;
01205                 <font class="keywordflow">if</font> (j&lt;0) <font class="keywordflow">break</font>;
01206                 j += i;
01207                 <font class="comment">// find nearest DIL entry requiring task chunks</font>
01208                 <font class="keywordflow">for</font> (k = j; ((k&gt;=i) &amp;&amp; (req[k]&lt;=0)); k--);
01209                 <font class="keywordflow">if</font> (k&lt;i) <font class="keywordflow">for</font> (k = (j+1); ((k&lt;deplen) &amp;&amp; (req[k]&lt;=0)); k++);
01210                 <font class="comment">// allocate earliest available task chunk in AL</font>
01211                 <font class="keywordflow">if</font> (k&lt;deplen) {
01212                         <font class="keywordflow">if</font> (al.<a class="code" href="classActive__List.html#a12">allocate</a>(dep[k])) {
01213                                 req[k]--;
01214 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01215 <font class="preprocessor"></font>                                <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__Day.html">AL_Day</a>,al.<a class="code" href="classActive__List.html#a7">AL_Head</a>(),1) {
01216                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'|'</font>;
01217                                         <font class="keywordflow">if</font> (e-&gt;TC_Head()) { 
01218                                                 <font class="keywordflow">for</font> (<a class="code" href="classAL__TC.html">AL_TC</a> * etc = e-&gt;TC_Head(); (etc); etc = etc-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>())
01219                                                         <font class="keywordflow">if</font> (etc-&gt;<a class="code" href="classAL__TC.html#a6">Get_DE</a>()) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'x'</font>; <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'_'</font>;
01220                                         }
01221                                 }
01222                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01223 <font class="preprocessor">#endif</font>
01224 <font class="preprocessor"></font>                        } <font class="keywordflow">else</font> <font class="keywordflow">break</font>;
01225                 }
01226 <font class="preprocessor">#ifdef DEBUG</font>
01227 <font class="preprocessor"></font>                <font class="keywordflow">if</font> ((cnt%10)==0) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'"'</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
01228 <font class="preprocessor">#endif</font>
01229 <font class="preprocessor"></font>        }
01230         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Scheduled tasks for DIL entries with target dates beyond requested range: "</font> &lt;&lt; cnt &lt;&lt; <font class="charliteral">'\n'</font>;
01231         <font class="comment">// clean up by removing unused TCs</font>
01232 <font class="preprocessor">#ifdef DIAGNOSTIC_OUTPUT</font>
01233 <font class="preprocessor"></font>        <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classAL__Day.html">AL_Day</a>,al.<a class="code" href="classActive__List.html#a7">AL_Head</a>(),1) <font class="keywordflow">for</font> (<a class="code" href="classAL__TC.html">AL_TC</a> * etc = e-&gt;TC_Head(); (etc); etc=etc-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>()) <font class="keywordflow">if</font> (!etc-&gt;<a class="code" href="classAL__TC.html#a6">Get_DE</a>()) cerr &lt;&lt; <font class="charliteral">'?'</font>; cerr &lt;&lt; <font class="charliteral">'\n'</font>;
01234 <font class="preprocessor">#endif</font>
01235 <font class="preprocessor"></font>        al.<a class="code" href="classActive__List.html#a15">remove_unused_TCs</a>();
01236         <font class="comment">// create visible AL</font>
01237         <font class="keywordflow">if</font> (!al.<a class="code" href="classActive__List.html#a16">generate_focused_AL</a>(superior,algenhpd)) LOCAL_CLEAN_EXIT
01238         <font class="keywordflow">if</font> (!al.<a class="code" href="classActive__List.html#a17">generate_wide_AL</a>(superior)) LOCAL_CLEAN_EXIT
01239         <font class="comment">// update DIL, AL, TL main page</font>
01240         <font class="keywordflow">if</font> (!<a class="code" href="alcomp_8cc.html#a8">update_main_ALs</a>(superior)) LOCAL_CLEAN_EXIT
01241         <font class="comment">// clean up</font>
01242         <font class="keyword">delete</font>[] req;
01243         <font class="keywordflow">return</font> <font class="keyword">true</font>;
01244 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="alcomp.cc::generate_AL_entry"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classString.html">String</a> generate_AL_entry </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dilid</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ishighestpriority</em> = <a class="el" href="templates_8defines_8hh.html#a5">false</a></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00028">28</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>(), and <a class="el" href="dil2al_8hh-source.html#l01180">RELLISTSDIR</a>.
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00655">dil2al_commands</a>().
<p>
<div class="fragment"><pre>00028                                                                        {
00029   <font class="comment">// Note: This is currently called only when dil2al is run with the</font>
00030   <font class="comment">// command line argument -a. This function generates an entry for manual</font>
00031   <font class="comment">// modification of an AL.</font>
00032         <a class="code" href="classString.html">String</a> idstr;
00033         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(idfile,idstr)) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00034         <font class="keywordtype">int</font> idindex;
00035         idindex = idstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][  ]*[&lt;]A[         ]+[^&gt;]*[Nn][Aa][Mm][Ee][        ]*=[    ]*\""</font>+dilid));
00036         <font class="keywordflow">if</font> (idindex&lt;0) {
00037                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in generate_AL_entry()\n"</font>;
00038                 <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00039         }
00040         <a class="code" href="classString.html">String</a> topdil;
00041         topdil = idstr.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][      ]*[&lt;]A[         ]+[^&gt;]*[Hh][Rr][Ee][Ff][        ]*=[    ]*\"[^\"]+"</font>+dilid),idindex+1);
00042         <font class="keywordflow">if</font> (topdil==<font class="stringliteral">""</font>) {
00043                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find full reference to "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in generate_AL_entry()\n"</font>;
00044                 <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00045         }
00046         topdil = topdil.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][  ]*[&lt;]A[         ]+[^&gt;]*[Hh][Rr][Ee][Ff][        ]*=[    ]*\""</font>));
00047         <a class="code" href="classString.html">String</a> topdilfile = topdil;
00048         topdil = basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+topdilfile.<a class="code" href="classString.html#a58">before</a>(<font class="stringliteral">"#"</font>);
00049         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(topdil,idstr)) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00050         idindex = idstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][  ]*[&lt;]A[         ]+[^&gt;]*[Nn][Aa][Mm][Ee][        ]*=[    ]*\""</font>+dilid));
00051         <font class="keywordflow">if</font> (idindex&lt;0) {
00052                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in "</font> &lt;&lt; topdil &lt;&lt; <font class="stringliteral">" in generate_AL_entry()\n"</font>;
00053                 <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00054         }
00055         idindex = idstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TR[^&gt;]*[&gt;]"</font>),idindex+1);
00056         <font class="keywordflow">if</font> (idindex&lt;0) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00057         idindex = idstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;]"</font>),idindex+1);
00058         <font class="keywordflow">if</font> (idindex&lt;0) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00059         topdil = idstr.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;]...[^\n]*"</font>),idindex);
00060         <font class="keywordflow">if</font> (topdil==<font class="stringliteral">""</font>) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
00061         topdil = topdil.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;]"</font>));
00062         topdil.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;][^&gt;]+[&gt;]"</font>),<font class="stringliteral">""</font>);
00063         <font class="keywordflow">if</font> (topdil.<a class="code" href="classString.html#a105">length</a>()&gt;100) {
00064                 topdil = topdil.<a class="code" href="classString.html#a58">before</a>(100);
00065                 topdil = topdil.<a class="code" href="classString.html#a58">before</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[      \n.,;:]"</font>),-1);
00066                 topdil += <font class="stringliteral">"..."</font>;
00067         }
00068         idstr = <font class="stringliteral">"&lt;TR"</font>;
00069         <font class="keywordflow">if</font> (ishighestpriority) idstr += <font class="stringliteral">" BGCOLOR=\"#3F5F00\""</font>;
00070         idstr += <font class="stringliteral">"&gt;&lt;TD&gt;[&lt;A HREF=\""</font>+topdilfile+<font class="stringliteral">"\"&gt;&lt;B&gt;"</font>+dilid+<font class="stringliteral">"&lt;/B&gt;&lt;/A&gt;][&lt;A HREF=\"file:///cgi-bin/dil2al?dil2al=MEI&amp;DILID="</font>+dilid+<font class="stringliteral">"\"&gt;edit&lt;/A&gt;]\n"</font>+topdil;
00071         <font class="keywordflow">return</font> idstr;
00072 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="alcomp.cc::generate_AL_full_entry"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classString.html">String</a> generate_AL_full_entry </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dilid</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>chunkfreq</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00023">23</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="templates_8defines_8hh-source.html#l00277">res</a>.
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00655">dil2al_commands</a>().
<p>
<div class="fragment"><pre>00023                                                            {
00024         <a class="code" href="classString.html">String</a> <a class="code" href="templates_8defines_8hh.html#a11">res</a>(<font class="stringliteral">"&lt;LI&gt;&lt;A HREF=\"detailed-items-by-ID.html#"</font>+dilid+<font class="stringliteral">"\"&gt;"</font>+dilid+<font class="stringliteral">"&lt;/A&gt; ("</font>+dec(chunkfreq)+<font class="stringliteral">")\n"</font>);
00025         <font class="keywordflow">return</font> res;
00026 }
</pre></div>    </td>
  </tr>
</table>
<a name="a12" doxytag="alcomp.cc::generate_EPS_cells"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void generate_EPS_cells </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">time_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>grouptd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>cumreqstr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rowreqstr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>groupreq</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>double&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>cumreq</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>time_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>t_current</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classDIL__entry.html">DIL_entry</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>de</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00941">941</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="utilities_8cc-source.html#l02617">HTML_put_form_checkbox</a>(), <a class="el" href="utilities_8cc-source.html#l02630">HTML_put_form_text</a>(), <a class="el" href="utilities_8cc-source.html#l02573">HTML_put_table_cell</a>(), <a class="el" href="dil2al_8hh-source.html#l00069">SECONDSPERDAY</a>, <a class="el" href="utilities_8cc-source.html#l01834">time_stamp</a>(), <a class="el" href="utilities_8cc-source.html#l01882">time_stamp_time_date</a>(), and <a class="el" href="utilities_8cc-source.html#l01876">time_stamp_time_of_day</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>().
<p>
<div class="fragment"><pre>00941                                                                                                                                                     {
00942 <font class="comment">// generate HTML table cells for the EPS method date presented</font>
00943 <font class="comment">// when alshowcumulativereq==true</font>
00944 <font class="comment">// (See &lt;A HREF="../../doc/html/lists.html#gS1"&gt;Earliest Possible Scheduling (EPS)&lt;/A&gt;.)</font>
00945         <font class="keywordtype">double</font> cumreqhours = (cumreq*((double) timechunksize))/60.0;
00946         <font class="keywordtype">double</font> epsdays = floor(cumreqhours/alepshours);
00947         <font class="keywordtype">double</font> epshours = cumreqhours - (epsdays*alepshours);
00948         time_t epsdayssec = ((time_t) epsdays)*<a class="code" href="dil2al_8hh.html#a4">SECONDSPERDAY</a>;
00949         time_t epshourssec = ((time_t) rint(epshours*60.0))*60; <font class="comment">// note: properly converts 0.33 and 0.67 hours to 20 and 40 minutes respectively</font>
00950         time_t epsgrouptd = t_current + epsdayssec + epshourssec;
00951         <a class="code" href="classString.html">String</a> epsgrouptreq = <a class="code" href="classString.html">String</a>((groupreq*((<font class="keywordtype">double</font>) timechunksize))/60.0,<font class="stringliteral">"%6.2f"</font>);
00952         String epsgrouptdstr = <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,epsgrouptd);
00953         <font class="keywordflow">if</font> (targetdatepreferences) { <font class="comment">// determine if the calculated target date should be modified according to stated preferences</font>
00954           <font class="keywordflow">if</font> (weekdayworkendpreferences) { <font class="comment">// preferred target times on specific days of the week</font>
00955             <font class="comment">//      cout &lt;&lt; epsgrouptdstr &lt;&lt; " --- ";</font>
00956             <font class="keywordtype">int</font> dayofweek = atoi((<font class="keyword">const</font> <font class="keywordtype">char</font> *) <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%w"</font>,epsgrouptd));
00957             <font class="keywordflow">if</font> (wdworkendprefs[dayofweek]&gt;=0) {
00958               <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a24">time_stamp_time_of_day</a>(epsgrouptdstr)&lt;wdworkendprefs[dayofweek]) { <font class="comment">// to preferred time</font>
00959                 epsgrouptd = <a class="code" href="utilities_8cc.html#a25">time_stamp_time_date</a>(epsgrouptdstr) + wdworkendprefs[dayofweek];
00960               } <font class="keywordflow">else</font> { <font class="comment">// set to preferred time on next day</font>
00961                 dayofweek++; <font class="keywordflow">if</font> (dayofweek&gt;6) dayofweek = 0;
00962                 <font class="keywordflow">if</font> (wdworkendprefs[dayofweek] &gt;= 0 ) epsgrouptd = <a class="code" href="utilities_8cc.html#a25">time_stamp_time_date</a>(epsgrouptdstr) + <a class="code" href="dil2al_8hh.html#a4">SECONDSPERDAY</a> + wdworkendprefs[dayofweek];
00963                 <font class="keywordflow">else</font> epsgrouptd = <a class="code" href="utilities_8cc.html#a25">time_stamp_time_date</a>(epsgrouptdstr) + <a class="code" href="dil2al_8hh.html#a4">SECONDSPERDAY</a> + alworkdaystart + (((time_t) rint(alepshours*60.0))*60);
00964               }
00965               epsgrouptdstr = <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,epsgrouptd);
00966             }
00967             <font class="comment">//      cout &lt;&lt; epsgrouptdstr &lt;&lt; '\n';</font>
00968           }
00969         }
00970         cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@GROUPTREQ@"</font>,epsgrouptreq);
00971         cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@GROUPEPSTD@"</font>,epsgrouptdstr);
00972         <font class="keywordflow">if</font> (rapidscheduleupdating &amp;&amp; (epsgrouptd&lt;=grouptd)) { <font class="comment">// option not to update target dates beyond the EPS suggested target dates</font>
00973                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@GROUPCHECKED@\""</font>,<font class="stringliteral">"\" checked"</font>);
00974                 rowreqstr += <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,epsgrouptreq)+
00975                            <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a75">HTML_put_form_checkbox</a>(String(<font class="stringliteral">"TDCHKBX"</font>)+de.<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"noupdate"</font>,<font class="stringliteral">""</font>,<font class="keyword">true</font>)+<a class="code" href="utilities_8cc.html#a77">HTML_put_form_text</a>(String(<font class="stringliteral">"TD"</font>)+de.<a class="code" href="classDIL__ID.html#a15">chars</a>(),epsgrouptdstr,12));
00976         } <font class="keywordflow">else</font> {
00977                 cumreqstr.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"@GROUPCHECKED@"</font>,<font class="stringliteral">""</font>);
00978                 rowreqstr += <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,epsgrouptreq)+
00979                            <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,<a class="code" href="utilities_8cc.html#a75">HTML_put_form_checkbox</a>(String(<font class="stringliteral">"TDCHKBX"</font>)+de.<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"noupdate"</font>,<font class="stringliteral">""</font>)+<a class="code" href="utilities_8cc.html#a77">HTML_put_form_text</a>(String(<font class="stringliteral">"TD"</font>)+de.<a class="code" href="classDIL__ID.html#a15">chars</a>(),epsgrouptdstr,12));
00980         }
00981         groupreq = 0.0;
00982         <font class="comment">//return epsgrouptdstr;</font>
00983 }
</pre></div>    </td>
  </tr>
</table>
<a name="a14" doxytag="alcomp.cc::get_AL_entry"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int get_AL_entry </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>alstr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>alpos</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rowcontent</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rowstart</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rowend</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l01246">1246</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="BigString_8hh-source.html#l01126">String::contains</a>(), <a class="el" href="utilities_8cc-source.html#l02455">HTML_get_table_cell</a>(), and <a class="el" href="utilities_8cc-source.html#l02462">HTML_get_table_row</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l01256">remove_AL_TC</a>().
<p>
<div class="fragment"><pre>01246                                                                                                {
01247 <font class="comment">// gets an entry from an AL table and returns whether that row</font>
01248 <font class="comment">// is a Day (0) or a TC (1), returns -1 if row cannot be obtained</font>
01249         <a class="code" href="classString.html">String</a> params, cellcontent;
01250         <font class="keywordflow">if</font> ((rowend=<a class="code" href="utilities_8cc.html#a55">HTML_get_table_row</a>(alstr,alpos,params,rowcontent,&amp;rowstart))&lt;0) <font class="keywordflow">return</font> -1;
01251         <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(rowcontent,0,params,cellcontent)&lt;0) <font class="keywordflow">return</font> -1;
01252         <font class="keywordflow">if</font> (cellcontent.<a class="code" href="classString.html#a32">contains</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[      ]+@select_TL_DIL_refs:[         ]+SKIP ROW@[    ]+--[&gt;][^(]*Day"</font>))) <font class="keywordflow">return</font> 0;
01253         <font class="keywordflow">return</font> 1;
01254 }
</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="alcomp.cc::get_topic_keywords"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int get_topic_keywords </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00006">6</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, and <a class="el" href="utilities_8cc-source.html#l02217">find_line</a>().
<p>
<div class="fragment"><pre>00006                          {
00007         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240;
00008         <font class="keywordtype">char</font> lbuf[LLEN];
00009         ifstream dilfile;
00010         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;numDILs; i++) {
00011                 dilfile.open(*(dil[i]));
00012                 <font class="keywordflow">if</font> (dilfile) {
00013                         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;dilfile,<font class="stringliteral">"Topic Keywords"</font>,lbuf,LLEN)) {
00014                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing topic keywords in "</font> &lt;&lt; *(dil[i]) &lt;&lt; <font class="stringliteral">" in get_topic_keywords()\n"</font>;
00015                                 <font class="keywordflow">return</font> 0;
00016                         }
00017                         dilfile.close();
00018                 }
00019         }
00020         <font class="keywordflow">return</font> 1;
00021 }
</pre></div>    </td>
  </tr>
</table>
<a name="a11" doxytag="alcomp.cc::Get_Worked_Estimate"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Get_Worked_Estimate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00301">301</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01238">ACW_ASK</a>, <a class="el" href="dil2al_8hh-source.html#l01236">ACW_TIME</a>, <a class="el" href="dil2al_8hh-source.html#l01237">ACW_TL</a>, <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, and <a class="el" href="utilities_8cc-source.html#l01876">time_stamp_time_of_day</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>().
<p>
<div class="fragment"><pre>00301                            {
00302 <font class="comment">// update alworked (in seconds)</font>
00303         <font class="keywordflow">if</font> (alworked&lt;0) { <font class="comment">// (alworked&gt;=0) if given on command line</font>
00304                 time_t tod;
00305                 <font class="keywordflow">switch</font> (alcurdayworkedstrategy) {
00306                         <font class="keywordflow">case</font> <a class="code" href="dil2al_8hh.html#a85">ACW_TIME</a>: <font class="comment">// estimate according to current time</font>
00307                                 tod = <a class="code" href="utilities_8cc.html#a24">time_stamp_time_of_day</a>(curtime);
00308                                 tod -= alworkdaystart;
00309                                 <font class="keywordflow">if</font> (tod&lt;0) alworked = 0; <font class="keywordflow">else</font> alworked = tod;
00310                                 <font class="keywordflow">break</font>;
00311                         <font class="keywordflow">case</font> <a class="code" href="dil2al_8hh.html#a86">ACW_TL</a>: <font class="comment">// *** obtain an estimate from task log entries</font>
00312                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: ACW_TL option not yet implemented in Get_Worked_Estimate(), setting to 0\n"</font>;
00313                                 alworked = 0;
00314                                 <font class="keywordflow">break</font>;
00315                         <font class="keywordflow">case</font> <a class="code" href="dil2al_8hh.html#a87">ACW_ASK</a>: <font class="comment">// *** ask for estimate</font>
00316                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: ACW_ASK option not yet implemented in Get_Worked_Estimate(), setting to 0\n"</font>;
00317                                 alworked = 0;
00318                                 <font class="keywordflow">break</font>;
00319                         <font class="keywordflow">default</font>: alworked = 0;
00320                 }
00321         }
00322 }
</pre></div>    </td>
  </tr>
</table>
<a name="a9" doxytag="alcomp.cc::linear_distribution"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> float linear_distribution </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>i</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>float&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>i_limit</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00268">268</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00324">AL_TC::AL_TC</a>(), and <a class="el" href="alcomp_8cc-source.html#l00557">AL_Day::set_TC_values</a>().
<p>
<div class="fragment"><pre>00268                                                   {
00269 <font class="comment">// linearly distribute TC values (see TL#200006291007.2)</font>
00270         <font class="keywordflow">return</font> 1.0 - (0.9*i/i_limit);
00271 }
</pre></div>    </td>
  </tr>
</table>
<a name="a17" doxytag="alcomp.cc::refresh_quick_load_cache"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool refresh_quick_load_cache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l01359">1359</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l01189">Detailed_Items_List::Get_All_DIL_ID_File_Parameters</a>(), and <a class="el" href="utilities_8cc-source.html#l01316">Detailed_Items_List::Get_All_Topical_DIL_Parameters</a>().
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00655">dil2al_commands</a>().
<p>
<div class="fragment"><pre>01359                                 {
01360   <font class="keywordflow">if</font> (!usequickloadcache) {
01361     <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: The usequickloadcache flag is not set in refresh_quick_load_cache()\n"</font>;
01362     <font class="keywordflow">return</font> <font class="keyword">false</font>;
01363   }
01364   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01365   <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>()&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01366   <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>)&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01367   <font class="keywordflow">return</font> <font class="keyword">true</font>;
01368 }
</pre></div>    </td>
  </tr>
</table>
<a name="a15" doxytag="alcomp.cc::remove_AL_TC"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool remove_AL_TC </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>alref</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dilid</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l01256">1256</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00253">String::alloc</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="dil2al_8hh-source.html#l01254">DEFAULTALDAYEMPHASIS</a>, <a class="el" href="dil2al_8hh-source.html#l01273">DEFAULTALFOCUSEDEMPHASIS</a>, <a class="el" href="BigString_8cc-source.html#l00843">String::del</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="alcomp_8cc-source.html#l01246">get_AL_entry</a>(), <a class="el" href="utilities_8cc-source.html#l02483">HTML_get_href</a>(), <a class="el" href="utilities_8cc-source.html#l02569">HTML_put_table_row</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>(), <a class="el" href="dil2al_8hh-source.html#l00069">SECONDSPERDAY</a>, <a class="el" href="BigRegex_8cc-source.html#l00123">BigRegex::sublen</a>(), <a class="el" href="BigRegex_8cc-source.html#l00118">BigRegex::subpos</a>(), <a class="el" href="utilities_8cc-source.html#l01842">time_stamp_GM</a>(), <a class="el" href="utilities_8cc-source.html#l01876">time_stamp_time_of_day</a>(), <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l02116">write_file_from_String</a>().
<p>
Referenced by <a class="el" href="tladmin_8cc-source.html#l00117">stop_TL_chunk</a>().
<p>
<div class="fragment"><pre>01256                                               {
01257 <font class="comment">// removes the top task chunk if it has DIL entry ID dilid</font>
01258 <font class="comment">// from the AL indicated by alref and updates the suggested</font>
01259 <font class="comment">// start time of that AL day according to the assumed time</font>
01260 <font class="comment">// taken to do the task chunk (desynchronization is noticed</font>
01261 <font class="comment">// and taken care of in select_TL_DIL_refs())</font>
01262 <font class="comment">// day rows at the top of the AL that are not followed by task</font>
01263 <font class="comment">// rows are removed</font>
01264 <font class="comment">// returns false if dilid did not match the DIL entry ID of</font>
01265 <font class="comment">// the top task chunk, or if the visible focused AL became</font>
01266 <font class="comment">// empty</font>
01267         <a class="code" href="classString.html">String</a> alstr, newalstr;
01268         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(alref,alstr)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01269         newalstr.<a class="code" href="classString.html#a107">alloc</a>(alstr.<a class="code" href="classString.html#a105">length</a>());
01270         <font class="comment">// get day row and remove empty days at top of AL</font>
01271         <font class="comment">// and find top TC to compare with dilid</font>
01272         <a class="code" href="classStringList.html">StringList</a> alentries; <font class="keywordtype">int</font> numentries = 0, alpos = 0, tcsfound = 0, tcentries[2], rowstart, rowend;
01273         <font class="keywordflow">while</font> (tcsfound&lt;2) {
01274                 <font class="keywordflow">switch</font> (<a class="code" href="alcomp_8cc.html#a14">get_AL_entry</a>(alstr,alpos,alentries[numentries],rowstart,rowend)) {
01275                         <font class="keywordflow">case</font> -1:
01276                                 <font class="comment">// *** could detect from numentries and tcsfound</font>
01277                                 <font class="comment">//     to give a different VOUT message if the</font>
01278                                 <font class="comment">//     visible AL portion contained no more TCs</font>
01279                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Missing data in AL "</font> &lt;&lt; alref &lt;&lt; <font class="stringliteral">" after position "</font> &lt;&lt; alpos &lt;&lt; <font class="stringliteral">" in remove_AL_TC()"</font>;
01280                                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01281                                 <font class="keywordflow">break</font>;
01282                         <font class="keywordflow">case</font> 0: <font class="keywordflow">break</font>;
01283                         <font class="keywordflow">case</font> 1:
01284                                 <font class="keywordflow">if</font> (numentries==0) {
01285                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"TC without preceding Day ID in "</font> &lt;&lt; alref &lt;&lt; <font class="stringliteral">" after position "</font> &lt;&lt; alpos &lt;&lt; <font class="stringliteral">" in remove_AL_TC()"</font>;
01286                                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
01287                                 }
01288                                 <font class="keywordflow">if</font> (tcsfound==0) {
01289                                         <a class="code" href="classString.html">String</a> alhrefurl, alhreftext;
01290                                         <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a58">HTML_get_href</a>(alentries[numentries],0,alhrefurl,alhreftext)&lt;0) {
01291                                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Missing DIL ID reference in "</font> &lt;&lt; alref &lt;&lt; <font class="stringliteral">" after position "</font> &lt;&lt; alpos &lt;&lt; <font class="stringliteral">" in remove_AL_TC()"</font>;
01292                                                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01293                                         }
01294                                         <font class="keywordflow">if</font> (alhreftext!=dilid) { <font class="comment">// different task</font>
01295                                                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Top of AL "</font> &lt;&lt; alref &lt;&lt; <font class="stringliteral">" does not match DIL entry "</font> &lt;&lt; dilid &lt;&lt; <font class="charliteral">'\n'</font>;
01296                                                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01297                                         }
01298                                 }
01299                                 tcentries[tcsfound] = numentries;
01300                                 tcsfound++;
01301                                 <font class="keywordflow">break</font>;
01302                 }
01303                 <font class="keywordflow">if</font> (alpos==0) newalstr = alstr.<a class="code" href="classString.html#a51">at</a>(0,rowstart); <font class="comment">// copy head of AL</font>
01304                 numentries++; alpos = rowend;
01305         }
01306         <font class="keywordflow">if</font> (tcentries[1]==(tcentries[0]+1)) { <font class="comment">// next TC on same day, modify daystart</font>
01307                 <a class="code" href="classBigRegex.html">BigRegex</a> rds(<font class="stringliteral">"(suggested start[         ]+\\([0-9][0-9]:[0-9][0-9]\\)"</font>);
01308                 <font class="keywordtype">int</font> didx = tcentries[0]-1, dstimepos;
01309                 <font class="keywordflow">if</font> ((dstimepos=alentries[didx].index(rds))&lt;0) {
01310                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Missing suggested start in AL "</font> &lt;&lt; alref &lt;&lt; <font class="stringliteral">" at row "</font> &lt;&lt; didx &lt;&lt; <font class="stringliteral">" in remove_AL_TC()\n"</font>;
01311                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
01312                 }
01313                 <a class="code" href="classString.html">String</a> daystartstr = alentries[didx].at(rds.<a class="code" href="classBigRegex.html#a5">subpos</a>(1),rds.<a class="code" href="classBigRegex.html#a6">sublen</a>(1));
01314                 daystartstr.<a class="code" href="classString.html#a83">del</a>(<font class="charliteral">':'</font>);
01315                 time_t tds = <a class="code" href="utilities_8cc.html#a24">time_stamp_time_of_day</a>(daystartstr) + ((time_t) (timechunksize*60));
01316                 <font class="keywordflow">if</font> (tds&gt;=<a class="code" href="dil2al_8hh.html#a4">SECONDSPERDAY</a>) {
01317                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Updated suggested start time exceeds length of day, limiting to 23:59\n"</font>;
01318                         tds = <a class="code" href="dil2al_8hh.html#a4">SECONDSPERDAY</a>-1;
01319                 }
01320                 daystartstr = <a class="code" href="utilities_8cc.html#a21">time_stamp_GM</a>(<font class="stringliteral">"%H:%M"</font>,tds);
01321                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;5; i++) alentries[didx][rds.<a class="code" href="classBigRegex.html#a5">subpos</a>(1)+i] = daystartstr[i];
01322         }
01323         <font class="comment">// determine day before second TC and write it</font>
01324         <font class="keywordtype">int</font> didx = tcentries[1]-1;
01325         <font class="keywordflow">if</font> (didx==tcentries[0]) didx--;
01326         newalstr += <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<a class="code" href="dil2al_8hh.html#a98">DEFAULTALDAYEMPHASIS</a>,alentries[didx]) + <font class="charliteral">'\n'</font>;
01327         <font class="comment">// write second TC with top TC colors</font>
01328         newalstr += <a class="code" href="utilities_8cc.html#a64">HTML_put_table_row</a>(<a class="code" href="dil2al_8hh.html#a101">DEFAULTALFOCUSEDEMPHASIS</a>,alentries[tcentries[1]]) + <font class="charliteral">'\n'</font>;
01329         <font class="comment">// copy remainder of AL</font>
01330         newalstr += alstr.<a class="code" href="classString.html#a51">at</a>(alpos,alstr.<a class="code" href="classString.html#a105">length</a>()-alpos);
01331         <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(alref,newalstr,<font class="stringliteral">"AL"</font>);
01332 }
</pre></div>    </td>
  </tr>
</table>
<a name="a16" doxytag="alcomp.cc::update_DIL_to_AL"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool update_DIL_to_AL </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l01334">1334</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="classPLLHandle.html#a9">PLLHandle&lt; DIL_entry &gt;::fulllength</a>(), <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>(), and <a class="el" href="utilities_8cc-source.html#l01681">Detailed_Items_List::Sort_by_Target_Date</a>().
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00434">Detect_Form_Input</a>(), and <a class="el" href="dil2al_8cc-source.html#l00655">dil2al_commands</a>().
<p>
<div class="fragment"><pre>01334                         {
01335 <font class="comment">// generate an updated AL from the DIL hierarchy</font>
01336 <font class="comment">// uses generatealmaxt and generatealtcs</font>
01337         <font class="comment">/*</font>
01338 <font class="comment">        When computing priorities, also parse for ALs and refresh AL parameters</font>
01339 <font class="comment">        for all detail items if prefixed with E (``automatic estimate'').</font>
01340 <font class="comment">        */</font>
01341         <font class="comment">// *** can make this first part prepare in the background</font>
01342         <font class="comment">//     before a TC is completed</font>
01343         <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01344         <a class="code" href="classDIL__entry.html">DIL_entry</a> ** dep = dilist.<a class="code" href="classDetailed__Items__List.html#a4">Sort_by_Target_Date</a>(<font class="keyword">true</font>);
01345 <font class="preprocessor">#ifdef DEBUG</font>
01346 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (dep) {
01347                 <font class="keywordtype">int</font> entrynum = dep[0]-&gt;<a class="code" href="classPLLHandle.html#a9">fulllength</a>();
01348                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;entrynum; i++) cerr &lt;&lt; dep[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\n'</font>;
01349         }
01350 <font class="preprocessor">#endif</font>
01351 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (!<a class="code" href="alcomp_8cc.html#a13">generate_AL</a>(dep)) {
01352                 <font class="keyword">delete</font>[] dep;
01353                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01354         }
01355         <font class="keyword">delete</font>[] dep; <font class="comment">// may not be necessary here</font>
01356         <font class="keywordflow">return</font> <font class="keyword">true</font>;
01357 }
</pre></div>    </td>
  </tr>
</table>
<a name="a8" doxytag="alcomp.cc::update_main_ALs"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool update_main_ALs </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDIL__entry.html">DIL_entry</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>superior</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="alcomp_8cc-source.html#l00209">209</a> of file <a class="el" href="alcomp_8cc-source.html">alcomp.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="BigString_8hh-source.html#l01028">capitalize</a>(), <a class="el" href="dil2al_8hh-source.html#l00444">DIL_ID::chars</a>(), <a class="el" href="utilities_8cc-source.html#l02634">Elipsis_At</a>(), <a class="el" href="dil2al_8hh-source.html#l00684">DIL_entry::Entry_Text</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="BigString_8cc-source.html#l00911">String::from</a>(), <a class="el" href="utilities_8cc-source.html#l02483">HTML_get_href</a>(), <a class="el" href="utilities_8cc-source.html#l02469">HTML_get_list</a>(), <a class="el" href="utilities_8cc-source.html#l02476">HTML_get_list_item</a>(), <a class="el" href="utilities_8cc-source.html#l02506">HTML_get_name</a>(), <a class="el" href="utilities_8cc-source.html#l02585">HTML_put_href</a>(), <a class="el" href="utilities_8cc-source.html#l02577">HTML_put_list</a>(), <a class="el" href="utilities_8cc-source.html#l02581">HTML_put_list_item</a>(), <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>(), <a class="el" href="dil2al_8hh-source.html#l01180">RELLISTSDIR</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>, and <a class="el" href="utilities_8cc-source.html#l02116">write_file_from_String</a>().
<p>
Referenced by <a class="el" href="alcomp_8cc-source.html#l00985">generate_AL</a>().
<p>
<div class="fragment"><pre>00209                                            {
00210 <font class="comment">// add or modify a link to the AL referred to by superior on</font>
00211 <font class="comment">// the main page (NULL = AL created with all DIL entries)</font>
00212         <a class="code" href="classString.html">String</a> mainstr, tag, text, supstr, supfilestr;
00213         <font class="keywordflow">if</font> (superior) supstr = superior-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(); <font class="keywordflow">else</font> supstr = <font class="stringliteral">"all"</font>;
00214         supfilestr = <a class="code" href="utilities_8cc.html#a30">relurl</a>(listfile,basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+(<font class="stringliteral">"active-list."</font>+supstr+<font class="stringliteral">".html"</font>));
00215         <font class="comment">// get main lists file</font>
00216         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(listfile,mainstr)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00217         <font class="keywordtype">int</font> mainloc = 0;
00218         <font class="comment">// locate list of ALs</font>
00219         <font class="keywordflow">do</font> <font class="keywordflow">if</font> ((mainloc=<a class="code" href="utilities_8cc.html#a59">HTML_get_name</a>(mainstr,mainloc,tag,text))&lt;0) {
00220                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find HTML anchor ``AL'' in "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">" in update_main_ALs()\n"</font>;
00221                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00222         } <font class="keywordflow">while</font> (tag!=<font class="stringliteral">"AL"</font>);
00223         <font class="comment">// get list of ALs</font>
00224         <font class="keywordtype">int</font> liststart;
00225         <font class="keywordflow">if</font> ((mainloc=<a class="code" href="utilities_8cc.html#a56">HTML_get_list</a>(mainstr,mainloc,tag,text,&amp;liststart))&lt;0) {
00226                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing list of ALs in "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">" in update_main_ALs()\n"</font>;
00227                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00228         }
00229         <font class="comment">// find list item with link to AL corresponding with superior</font>
00230         <font class="keywordtype">int</font> listloc = 0; <a class="code" href="classString.html">String</a> itemtext,hreftext;
00231         <font class="keywordflow">do</font> <font class="keywordflow">if</font> ((listloc=<a class="code" href="utilities_8cc.html#a57">HTML_get_list_item</a>(text,listloc,tag,itemtext))&gt;=0) 
00232                 <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a58">HTML_get_href</a>(itemtext,0,tag,hreftext)&lt;0) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing HREF to AL in "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">" in update_main_ALs(), continuing\n"</font>;
00233         <font class="keywordflow">while</font> ((listloc&gt;=0) &amp;&amp; (tag!=supfilestr));
00234         <font class="keywordflow">if</font> (listloc&gt;=0) <font class="keywordflow">return</font> <font class="keyword">true</font>; <font class="comment">// link already exists</font>
00235         <font class="comment">// if new, add link to AL corresponding with superior</font>
00236         <a class="code" href="classString.html">String</a> newmainstr(mainstr.<a class="code" href="classString.html#a58">before</a>(liststart));
00237         <font class="keywordflow">if</font> (superior) {
00238                 <font class="keywordflow">if</font> (superior-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()) {
00239                         tag = *(superior-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>());
00240                         <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(tag,100);
00241                 } <font class="keywordflow">else</font> {
00242                         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Warning - No text content available for description of AL in update_main_ALs(), continuing as is\n"</font>;
00243                         tag = <font class="stringliteral">"(No description available.)"</font>;
00244                 }
00245         } <font class="keywordflow">else</font> tag = <font class="stringliteral">"A list of tasks created with all DIL entries."</font>;
00246         <font class="comment">// *** perhaps don't use relaxedhtml, despite possible unexpected</font>
00247         <font class="comment">//     behaviour by older function that read the main lists page</font>
00248         text += <a class="code" href="utilities_8cc.html#a67">HTML_put_list_item</a>(<a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(supfilestr,<font class="stringliteral">"Active List: "</font>+<a class="code" href="BigString_8hh.html#a84">capitalize</a>(supstr))+<font class="stringliteral">"&lt;BR&gt;\n"</font>+tag+<font class="charliteral">'\n'</font>,<font class="keyword">true</font>)+<font class="stringliteral">"&lt;P&gt;\n"</font>;
00249         newmainstr += <a class="code" href="utilities_8cc.html#a66">HTML_put_list</a>(<font class="charliteral">'U'</font>,text) + mainstr.<a class="code" href="classString.html#a70">from</a>(mainloc);
00250         <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(listfile,newmainstr,<font class="stringliteral">"Main Lists"</font>);
00251 }
</pre></div>    </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Mon Sep 13 14:53:12 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
