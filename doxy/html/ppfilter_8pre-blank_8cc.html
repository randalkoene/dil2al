<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ppfilter.pre-blank.cc File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>ppfilter.pre-blank.cc File Reference</h1><code>#include "<a class="el" href="dil2al_8hh-source.html">dil2al.hh</a>"</code><br>

<p>
<a href="ppfilter_8pre-blank_8cc-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a0">get_file_in_list</a> (<a class="el" href="classString.html">String</a> &amp;fname, <a class="el" href="classStringList.html">StringList</a> &amp;srcf, <a class="el" href="classStringList.html">StringList</a> &amp;srcfname, int &amp;srcfnum)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a1">get_figure_data</a> (<a class="el" href="classString.html">String</a> &amp;figfile, <a class="el" href="classString.html">String</a> &amp;figlabel, <a class="el" href="classString.html">String</a> &amp;figcaption, <a class="el" href="classString.html">String</a> &amp;psconversions, <a class="el" href="classStringList.html">StringList</a> &amp;srcf, <a class="el" href="classStringList.html">StringList</a> &amp;srcfname, int &amp;srcfnum)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a2">get_Paper_Plans_Section_IDs</a> (<a class="el" href="classStringList.html">StringList</a> &amp;ppsectionids, <a class="el" href="classStringList.html">StringList</a> &amp;ppsectiontitles)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a3">clean_paper_outline</a> (<a class="el" href="classString.html">String</a> &amp;pouttext)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a4">extract_required_item_to_paper</a> (<a class="el" href="classString.html">String</a> &amp;ostrtext, <a class="el" href="classString.html">String</a> refurl, <a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm, <a class="el" href="classString.html">String</a> &amp;sectitle, <a class="el" href="classString.html">String</a> &amp;requireditems, <a class="el" href="classString.html">String</a> &amp;pprevtext)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a5">extract_hierarchy_depth_increase_to_paper</a> (<a class="el" href="classString.html">String</a> &amp;ostrtext, <a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a6">extract_hierarchy_depth_decrease_to_paper</a> (<a class="el" href="classString.html">String</a> &amp;ostrtext, <a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a7">item_content_between_range_tags</a> (<a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm, int nidx, <a class="el" href="classString.html">String</a> &amp;src, <a class="el" href="classString.html">String</a> &amp;ic)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a8">item_content_within_TL_chunk</a> (int nidx, <a class="el" href="classString.html">String</a> &amp;src, <a class="el" href="classString.html">String</a> &amp;ic)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a9">item_content_within_DIL_entry</a> (int nidx, <a class="el" href="classString.html">String</a> &amp;src, <a class="el" href="classString.html">String</a> &amp;ic)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a10">item_content_within_paragraph</a> (int nidx, <a class="el" href="classString.html">String</a> &amp;src, <a class="el" href="classString.html">String</a> &amp;ic)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a11">convert_item_content_to_TeX</a> (<a class="el" href="classString.html">String</a> &amp;itemcontent)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a12">extract_recursively</a> (<a class="el" href="classString.html">String</a> &amp;ostrtext, <a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm, <a class="el" href="classStringList.html">StringList</a> &amp;srcf, <a class="el" href="classStringList.html">StringList</a> &amp;srcfname, int &amp;srcfnum, int depth, <a class="el" href="classNovelty__Marker__List.html">Novelty_Marker_List</a> &amp;visited, <a class="el" href="classString.html">String</a> &amp;poutline, <a class="el" href="classString.html">String</a> &amp;pprevtext)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a13">extract_novelty_item_to_paper</a> (<a class="el" href="classString.html">String</a> &amp;ostrtext, <a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;nm, <a class="el" href="classStringList.html">StringList</a> &amp;srcf, <a class="el" href="classStringList.html">StringList</a> &amp;srcfname, int &amp;srcfnum, <a class="el" href="classString.html">String</a> &amp;poutline, <a class="el" href="classString.html">String</a> &amp;pprevtext)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a14">extract_paper_plan_to_paper</a> (<a class="el" href="classString.html">String</a> ppname, <a class="el" href="classString.html">String</a> poutline, <a class="el" href="classString.html">String</a> pprevious)</td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="ppfilter_8pre-blank_8cc.html#a15">cmdline_extract_paper_plan_to_paper</a> (<a class="el" href="classString.html">String</a> ppfile)</td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a3" doxytag="ppfilter.pre-blank.cc::clean_paper_outline"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool clean_paper_outline </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>pouttext</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00104">104</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="BigString_8cc-source.html#l00911">String::from</a>(), <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>, and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
<div class="fragment"><pre>00104                                             {
00105 <font class="comment">// removes content from previous paper extractions to make room for a possible</font>
00106 <font class="comment">// new subsection hierarchy</font>
00107 <font class="comment">//*** removal of sections may be added if sections are automatically placed by</font>
00108 <font class="comment">//*** checking Section qualifiers in Novelty items (see extract_paper_plan_to_paper</font>
00109 <font class="comment">//*** usage comments)</font>
00110 <font class="comment">//*** How about positioning protected parts in places other than at the top of</font>
00111 <font class="comment">//*** a section? How about manually added subtopics or subtopics without tags?</font>
00112         <a class="code" href="classString.html">String</a> poutold(pouttext);
00113         pouttext = <font class="stringliteral">""</font>;
00114         <font class="keywordtype">int</font> nextextr, nextreq, nextsubstart, nextsubend, nextprot, p = 0, pp = 0, x = 0, r = 0, h = 0, t = 0, P = 0, depth = 0;
00115         <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Cleaning outline: "</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00116         <font class="keywordflow">while</font> (pp&gt;=0) {
00117                 <font class="comment">// find nearest identifier</font>
00118                 nextextr = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[  ]*%[    ]*@Begin[       ]+\\(REWRITTEN[         ]+\\)?EXTRACTED[^@]*:[^@]*@"</font>),p);
00119                 pp = nextextr;
00120                 nextreq = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[   ]*%[    ]*@Begin[       ]+\\(REWRITTEN[         ]+\\)?REQUIRED[^@]*@"</font>),p);
00121                 <font class="keywordflow">if</font> ((nextreq&gt;=0) &amp;&amp; ((nextreq&lt;pp) || (pp&lt;0))) pp = nextreq;
00122                 nextsubstart = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[      ]*%[    ]*@Begin[       ]+SUBTOPIC[^@]*:[^@]*@"</font>),p);
00123                 <font class="keywordflow">if</font> ((nextsubstart&gt;=0) &amp;&amp; ((nextsubstart&lt;pp) || (pp&lt;0))) pp = nextsubstart;
00124                 nextsubend = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[        ]*%[    ]*@End[         ]+\\([^         \n]*SUBSECTION[         ]+CONTENT\\|SUBTOPIC[^@]*:\\)[^@]*@"</font>),p);
00125                 <font class="keywordflow">if</font> ((nextsubend&gt;=0) &amp;&amp; ((nextsubend&lt;pp) || (pp&lt;0))) pp = nextsubend;
00126                 nextprot = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[  ]*%[    ]*@Begin[       ]+PROTECTED[^@]*@"</font>),p);
00127                 <font class="keywordflow">if</font> ((nextprot&gt;=0) &amp;&amp; ((nextprot&lt;pp) || (pp&lt;0))) pp = nextprot;
00128                 <font class="keywordflow">if</font> (pp&gt;=0) {
00129                         <font class="comment">// copy up to identifier location</font>
00130                         <font class="keywordflow">if</font> (pp&gt;p) pouttext += poutold.<a class="code" href="classString.html#a51">at</a>(p,pp-p);
00131                         <font class="comment">// process identifier</font>
00132                         <font class="keywordflow">if</font> (pp==nextextr) { <font class="comment">// clean up EXTRACTED</font>
00133                                 <font class="keywordtype">int</font> endextr;
00134                                 <font class="keywordflow">if</font> ((endextr = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[      ]*%[    ]*@End[         ]+\\(REWRITTEN[         ]+\\)?EXTRACTED[^@]*:[^@]*@"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0) {
00135                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: @End EXTRACTED...@ not found in clean_paper_outline()\n"</font>;
00136                                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00137                                 }
00138                                 p = endextr; x++;
00139                                 <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"-x"</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00140                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (pp==nextreq) { <font class="comment">// clean up REQUIRED</font>
00141                                 <font class="keywordtype">int</font> endreq;
00142                                 <font class="keywordflow">if</font> ((endreq = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[       ]*%[    ]*@End[         ]+\\(REWRITTEN[         ]+\\)?REQUIRED[^@]*@"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0) {
00143                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: @End REQUIRED@ not found in clean_paper_outline()\n"</font>;
00144                                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00145                                 }
00146                                 p = endreq; r++;
00147                                 <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"-r"</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00148                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (pp==nextsubstart) { <font class="comment">// clean up SUBTOPIC head</font>
00149                                 <font class="keywordtype">int</font> headeridx;
00150 <font class="comment">//*** no subtopic begins or ends allowed between begin and this line... how about</font>
00151 <font class="comment">//*** other codes?</font>
00152 <font class="comment">/*</font>
00153 <font class="comment">- have to be able to rewrite topic headers as well, in which case you somehow have</font>
00154 <font class="comment">  to make sure that the old header with its template content is reused, both at</font>
00155 <font class="comment">  the head and the tail</font>
00156 <font class="comment">- when cleaning, make sure the head and tail of a template are removed, but make</font>
00157 <font class="comment">  sure they really belong to the topic begin or topic end</font>
00158 <font class="comment">- why bother cleaning if you clean away basically everything before filling everything</font>
00159 <font class="comment">  back in again??? Why not start blank and fill in all the rewritten information?</font>
00160 <font class="comment">  </font>
00161 <font class="comment">YES: start blank, use all available templates, place what is indicated by sections,</font>
00162 <font class="comment">topics and items, before placing something (anything) check if a rewritten version</font>
00163 <font class="comment">is already available (make sure the indicators are very clear, i.e. section+context</font>
00164 <font class="comment">and begin and end markers with IDs), add in arbitrary text that was marked protected</font>
00165 <font class="comment"></font>
00166 <font class="comment">1. add section title to each extracted ID</font>
00167 <font class="comment">2. add subtopic context and section to the End markers of all subtopics</font>
00168 <font class="comment">3. add section to the Begin markers of all subtopics</font>
00169 <font class="comment">4. add tests for REWRITTEN versions of *everything* to the functions that place parts</font>
00170 <font class="comment">5. add section detection from paper plan</font>
00171 <font class="comment">6. add clear IDs to templates</font>
00172 <font class="comment">7. add placement functions for file header and footer</font>
00173 <font class="comment"></font>
00174 <font class="comment">*/</font>
00175                                 <font class="keywordflow">if</font> ((headeridx = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[    ]*%[    ]*@Begin[       ]+[^    ]*SUBSECTION[   ]+CONTENT[^@]*@[^)]*)"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0)
00176                                         <font class="keywordflow">if</font> ((headeridx = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[\\][^       \n]*\\(subsection\\|paragraph\\)[{][^\n]*[}]\n"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0) {
00177                                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Subtopic header not found in clean_paper_outline()\n"</font>;
00178                                                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00179                                         }
00180 cerr &lt;&lt; <font class="stringliteral">"&gt;&gt;&gt;"</font> &lt;&lt; poutold.<a class="code" href="classString.html#a51">at</a>(pp,headeridx-pp) &lt;&lt; <font class="stringliteral">"&lt;&lt;&lt;\n"</font>;
00181                                 p = headeridx; h++; depth++;
00182                                 <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"-h"</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00183                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (pp==nextsubend) { <font class="comment">// clean up SUBTOPIC tail</font>
00184                                 <font class="keywordtype">int</font> tailidx;
00185 <font class="comment">//*** no subtopic begins allowed between the lines</font>
00186                                 <font class="keywordflow">if</font> ((tailidx = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[      ]*%[    ]*@End[         ]+SUBTOPIC[^@]*:[^@]*@"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0) {
00187                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Subtopic tail not found in clean_paper_outline()\n"</font>;
00188                                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00189                                 }
00190 cerr &lt;&lt; <font class="stringliteral">"&gt;&gt;&gt;"</font> &lt;&lt; poutold.<a class="code" href="classString.html#a51">at</a>(pp,tailidx-pp) &lt;&lt; <font class="stringliteral">"&lt;&lt;&lt;\n"</font>;
00191                                 p = tailidx; t++; depth--;
00192                                 <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"-t"</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00193                         } <font class="keywordflow">else</font> { <font class="comment">// retain PROTECTED</font>
00194                                 <font class="keywordtype">int</font> endprot;
00195                                 <font class="keywordflow">if</font> ((endprot = poutold.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[      ]*%[    ]*@End[         ]+PROTECTED[^@]*@"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,pp))&lt;0) {
00196                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: @End PROTECTED@ not found in clean_paper_outline(), continuing as is\n"</font>;
00197                                         endprot = poutold.<a class="code" href="classString.html#a105">length</a>();
00198                                 }
00199                                 pouttext += poutold.<a class="code" href="classString.html#a51">at</a>(pp,endprot-pp);
00200                                 p = endprot; P++;
00201                                 <font class="keywordflow">if</font> (verbose) { <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"+P"</font>; <a class="code" href="dil2al_8hh.html#a108">VOUT</a>.flush(); }
00202                         }
00203                 } <font class="keywordflow">else</font> pouttext += poutold.<a class="code" href="classString.html#a70">from</a>(p); <font class="comment">// copy remaining text</font>
00204         }
00205         pouttext.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n[     ]*\n[   \n]+[   ]*\n"</font>),<font class="stringliteral">"\n\n\n"</font>); <font class="comment">// clean up spurious '\n'</font>
00206         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">", (x="</font> &lt;&lt; x &lt;&lt; <font class="stringliteral">",r="</font> &lt;&lt; r &lt;&lt; <font class="stringliteral">",h="</font> &lt;&lt; h &lt;&lt; <font class="stringliteral">",t="</font> &lt;&lt; t &lt;&lt; <font class="stringliteral">",P="</font> &lt;&lt; P &lt;&lt; <font class="stringliteral">",h-t="</font> &lt;&lt; depth &lt;&lt; <font class="stringliteral">") done\n"</font>;
00207         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00208 }
</pre></div>    </td>
  </tr>
</table>
<a name="a15" doxytag="ppfilter.pre-blank.cc::cmdline_extract_paper_plan_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool cmdline_extract_paper_plan_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ppfile</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00633">633</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00484">extract_paper_plan_to_paper</a>(), and <a class="el" href="BigString_8hh-source.html#l00849">String::prepend</a>().
<p>
Referenced by <a class="el" href="dil2al_8cc-source.html#l00655">dil2al_commands</a>().
<p>
<div class="fragment"><pre>00633                                                         {
00634 <font class="comment">// Commandline interface to extract_paper_plan_to_paper()</font>
00635         <a class="code" href="classString.html">String</a> ppname, poutline, pprevious;
00636         ppname = ppfile.<a class="code" href="classString.html#a58">before</a>(<font class="stringliteral">"+"</font>);
00637         <font class="keywordflow">if</font> (ppname == <font class="stringliteral">""</font>) {
00638                 ppname = ppfile;
00639                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Paper extraction without specific paper outline not yet supported\n"</font>;
00640                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00641         } <font class="keywordflow">else</font> {
00642                 poutline = ppfile.<a class="code" href="classString.html#a76">after</a>(<font class="stringliteral">"+"</font>);
00643                 <font class="keywordflow">if</font> (poutline == <font class="stringliteral">""</font>) {
00644                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Paper extraction without specific paper outline not yet supported\n"</font>;
00645                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00646                 } <font class="keywordflow">else</font> {
00647                         pprevious = poutline.<a class="code" href="classString.html#a76">after</a>(<font class="stringliteral">"+"</font>);
00648                         <font class="keywordflow">if</font> (pprevious != <font class="stringliteral">""</font>) {
00649                                 poutline = poutline.<a class="code" href="classString.html#a58">before</a>(<font class="stringliteral">"+"</font>);
00650                                 <font class="keywordflow">if</font> (pprevious[0]!=<font class="charliteral">'/'</font>) pprevious.<a class="code" href="classString.html#a22">prepend</a>(homedir);
00651                         }
00652                         <font class="keywordflow">if</font> (ppfile[0]!=<font class="charliteral">'/'</font>) ppfile.<a class="code" href="classString.html#a22">prepend</a>(homedir);
00653                         <font class="keywordflow">if</font> (poutline[0]!=<font class="charliteral">'/'</font>) poutline.<a class="code" href="classString.html#a22">prepend</a>(homedir);
00654                         <font class="keywordflow">return</font> <a class="code" href="ppfilter_8pre-blank_8cc.html#a14">extract_paper_plan_to_paper</a>(ppname,poutline,pprevious);
00655                 }
00656         }
00657 }
</pre></div>    </td>
  </tr>
</table>
<a name="a11" doxytag="ppfilter.pre-blank.cc::convert_item_content_to_TeX"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void convert_item_content_to_TeX </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>itemcontent</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00328">328</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00328                                                        {
00329         <font class="comment">// conversions to TeX</font>
00330         <font class="comment">//      - remove Novelty Marker tags</font>
00331         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]A[        ]+[Nn][Aa][Mm][Ee][     ]*=[    ]*\"NOVELTY-[^&gt;]*[&gt;][[][^]]*N[^]]*[]]"</font>),<font class="stringliteral">""</font>);
00332         <font class="comment">//      - identify content hyperlink references</font>
00333         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]A[        ]+[^&gt;]*[Hh][Rr][Ee][Ff][        ]*=[    ]*\"\\([^\"]+\\)\"[^&gt;]*[&gt;]"</font>),<font class="stringliteral">"@HRef::_1@"</font>,<font class="charliteral">'_'</font>);
00334         <font class="comment">//      - cite, but do not recurse into bibliography references</font>
00335         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\([[][^]]*\\)?@HRef::[^@]*"</font>+bibindexfilename+<font class="stringliteral">"#\\([^@]+:[^@]+\\)@\\([^]]*[]]\\)?"</font>),<font class="stringliteral">""</font>,<font class="charliteral">'_'</font>);
00336         <font class="comment">//      - convert paragraph and line-break codes</font>
00337         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"\n&lt;P&gt;\n"</font>,<font class="stringliteral">"\n\n"</font>);
00338         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"&lt;P&gt;"</font>,<font class="stringliteral">"\n"</font>);
00339         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\([^\n]\\)[\n]?[&lt;][Bb][Rr][&gt;]"</font>),<font class="stringliteral">"_1\\\\"</font>,<font class="charliteral">'_'</font>);
00340 <font class="comment">//*** the following two lines can be removed when Thesis Log has been converted to the Task Log format</font>
00341         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[      ]*entry Begin[  ]*--[&gt;][^]]+[]][        ]*[&lt;]/FONT[&gt;]"</font>),<font class="stringliteral">""</font>);
00342         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[      ]*chunk End[    ]*--[&gt;][        ]*[&lt;][Ii][&gt;][^&lt;]+[&lt;]/[Ii][&gt;]"</font>),<font class="stringliteral">""</font>);
00343 <font class="comment">//*** possibly remove the following conversions</font>
00344         <font class="comment">//      - convert text attribute codes</font>
00345         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]\\([Bb]\\|[Ss][Tt][Rr][Oo][Nn][Gg]\\)[&gt;]"</font>),<font class="stringliteral">"{\\bf "</font>);
00346         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]\\([Ii]\\|[Ee][Mm]\\)[&gt;]"</font>),<font class="stringliteral">"{\\em "</font>);
00347         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]/\\([Bb]\\|[Ss][Tt][Rr][Oo][Nn][Gg]\\|[Ii]\\|[Ee][Mm]\\)[&gt;]"</font>),<font class="stringliteral">"}"</font>);
00348 <font class="comment">//*** possibly remove conversions above</font>
00349         <font class="comment">//      - remove remaining HTML tags</font>
00350         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;][^&gt;]*[&gt;]"</font>),<font class="stringliteral">""</font>);
00351         <font class="comment">//      - convert HTML character codes</font>
00352         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"&amp;lt;"</font>,<font class="stringliteral">"&lt;"</font>);
00353         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"&amp;gt;"</font>,<font class="stringliteral">"&gt;"</font>);
00354         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"&amp;amp;"</font>,<font class="stringliteral">"\\&amp;"</font>);
00355         <font class="comment">//      - escape LaTeX special characters</font>
00356         itemcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\([^\\]\\)\\([#&amp;_]\\)"</font>),<font class="stringliteral">"_1\\_2"</font>,<font class="charliteral">'_'</font>);
00357 <font class="comment">//*** convert GESNlib variable names to GESN convention standard labels as found in nse.label-equivalence.tex</font>
00358 <font class="comment">//*** could do that to the source once instead</font>
00359 }
</pre></div>    </td>
  </tr>
</table>
<a name="a6" doxytag="ppfilter.pre-blank.cc::extract_hierarchy_depth_decrease_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void extract_hierarchy_depth_decrease_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ostrtext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00271">271</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l00273">Novelty_Marker::hierdepth</a>.
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01069">extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00271                                                                                        {
00272 <font class="comment">// generates output for a Topical Context Hierarchy depth decrease, suggesting</font>
00273 <font class="comment">// subtopics and indicating the TCH title in .TeX comments</font>
00274                 ostrtext = ostrtext + <font class="stringliteral">"\n% @End SUBTOPIC: [depth "</font> + dec(nm.<a class="code" href="classNovelty__Marker.html#m9">hierdepth</a>+1) + <font class="stringliteral">"]@\n\n"</font>;
00275 }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="ppfilter.pre-blank.cc::extract_hierarchy_depth_increase_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void extract_hierarchy_depth_increase_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ostrtext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00254">254</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l00110">StringList::concatenate</a>(), <a class="el" href="dil2al_8hh-source.html#l00267">Novelty_Marker::context</a>, <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, and <a class="el" href="dil2al_8hh-source.html#l00273">Novelty_Marker::hierdepth</a>.
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01069">extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00254                                                                                        {
00255 <font class="comment">// generates output for a Topical Context Hierarchy depth increase, suggesting</font>
00256 <font class="comment">// subtopics and indicating the TCH title in .TeX comments</font>
00257         ostrtext += <font class="stringliteral">"\n% @Begin SUBTOPIC: [depth "</font> + (dec(nm.<a class="code" href="classNovelty__Marker.html#m9">hierdepth</a>) + (<font class="stringliteral">"] "</font> + nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>) + <font class="stringliteral">"@\n"</font>));
00258         <font class="keywordflow">switch</font> (nm.<a class="code" href="classNovelty__Marker.html#m9">hierdepth</a>) {
00259                 <font class="keywordflow">case</font> 0: ostrtext += <font class="stringliteral">"% (Unexpected hierarchy depth at ``\\section'' level.)\n\n"</font>;
00260                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unexpected hierarchy depth at ``\\section'' level in extract_hierarchy_depth_increase_to_paper(), continuing\n"</font>;
00261                                 <font class="keywordflow">break</font>;
00262                 <font class="keywordflow">case</font> 1: ostrtext += <font class="stringliteral">"\\subsection{"</font> + nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>) + <font class="stringliteral">"}\n\n"</font>; <font class="keywordflow">break</font>;
00263                 <font class="keywordflow">case</font> 2: ostrtext += <font class="stringliteral">"\\subsubsection{"</font> + nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>) + <font class="stringliteral">"}\n\n"</font>; <font class="keywordflow">break</font>;
00264                 <font class="keywordflow">case</font> 3: ostrtext += <font class="stringliteral">"\\paragraph{"</font> + nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>) + <font class="stringliteral">"}\n\n"</font>; <font class="keywordflow">break</font>;
00265                 <font class="keywordflow">case</font> 4: ostrtext += <font class="stringliteral">"\\\\\n\n"</font>; <font class="keywordflow">break</font>;
00266                 <font class="keywordflow">default</font>:        ostrtext += <font class="stringliteral">"% (Hierarchy depth exceeds all \\LaTeX subsection levels.)\n\n"</font>;
00267                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Hierarchy depth exceeds all \\LaTeX subsection levels in extract_hierarchy_depth_increase_to_paper(), continuing\n"</font>;
00268         }
00269 }
</pre></div>    </td>
  </tr>
</table>
<a name="a13" doxytag="ppfilter.pre-blank.cc::extract_novelty_item_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void extract_novelty_item_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ostrtext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfnum</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>poutline</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pprevtext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00475">475</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00361">extract_recursively</a>(), <a class="el" href="dil2al_8hh-source.html#l00264">Novelty_Marker::marktext</a>, and <a class="el" href="dil2al_8hh-source.html#l00263">Novelty_Marker::source</a>.
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01069">extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00475                                                                                                                                                                            {
00476         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>==<font class="stringliteral">""</font>) {
00477                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing Novelty item source reference for item with text ``"</font> &lt;&lt; nm.<a class="code" href="classNovelty__Marker.html#m2">marktext</a> &lt;&lt; <font class="stringliteral">"'' in extract_paper_plan_to_paper(), continuing as is\n"</font>;
00478                 <font class="keywordflow">return</font>;
00479         }
00480         <a class="code" href="classNovelty__Marker__List.html">Novelty_Marker_List</a> visited;
00481         <a class="code" href="ppfilter_8pre-blank_8cc.html#a12">extract_recursively</a>(ostrtext,nm,srcf,srcfname,srcfnum,0,visited,poutline,pprevtext);
00482 }
</pre></div>    </td>
  </tr>
</table>
<a name="a14" doxytag="ppfilter.pre-blank.cc::extract_paper_plan_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool extract_paper_plan_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ppname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>poutline</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pprevious</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00484">484</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l01943">absurl</a>(), <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="utilities_8cc-source.html#l02016">backup_and_rename</a>(), <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="BigString_8cc-source.html#l00843">String::del</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00271">extract_hierarchy_depth_decrease_to_paper</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00254">extract_hierarchy_depth_increase_to_paper</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00475">extract_novelty_item_to_paper</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00210">extract_required_item_to_paper</a>(), <a class="el" href="BigString_8cc-source.html#l00911">String::from</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00064">get_Paper_Plans_Section_IDs</a>(), <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="utilities_8cc-source.html#l00484">Novelty_Marker_List::iselement</a>(), <a class="el" href="utilities_8cc-source.html#l00075">StringList::iselement</a>(), <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>, <a class="el" href="classNovelty__Marker.html#s8s6">Novelty_Marker::NM_REQUIRED_ITEM</a>, <a class="el" href="classNovelty__Marker.html#s8s2">Novelty_Marker::NM_TCH_DEPTH_DEC</a>, <a class="el" href="classNovelty__Marker.html#s8s1">Novelty_Marker::NM_TCH_DEPTH_INC</a>, <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>(), <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>, <a class="el" href="BigString_8hh-source.html#l01018">String::upcase</a>, and <a class="el" href="dil2al_8hh-source.html#l01407">VOUT</a>.
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01253">cmdline_extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00484                                                                                    {
00485 <font class="comment">// uses information in a paper plan to generate paper content in a paper outline</font>
00486 <font class="comment">// (see DIL#20000315155709.1)</font>
00487 <font class="comment">// preparation:</font>
00488 <font class="comment">// - a sorted paper plan including required items</font>
00489 <font class="comment">// - a paper outline including paper-type specific background</font>
00490 <font class="comment">//   templates (content that is not added during extraction</font>
00491 <font class="comment">//   may already be included)</font>
00492 <font class="comment">// - outline contains sections designated to items in</font>
00493 <font class="comment">//   the paper plan (can be automatically created by parsing</font>
00494 <font class="comment">//   paper plan and using section template)</font>
00495 <font class="comment">// - an optional previous (version of the) paper, containing</font>
00496 <font class="comment">//   stylistically rewritten items</font>
00497         <a class="code" href="classString.html">String</a> pptext, pprevtext, ostrtext;
00498         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(ppname,pptext)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00499         <font class="keywordflow">if</font> (pprevious!=<font class="stringliteral">""</font>) <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(pprevious,pprevtext)) <font class="keywordflow">return</font> <font class="keyword">false</font>; <font class="comment">// safe in case new paper draft would overwrite pprevious</font>
00500         ofstream ostr(poutline+<font class="stringliteral">".new"</font>);
00501         <font class="keywordflow">if</font> (!ostr) {
00502                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create "</font> &lt;&lt; poutline &lt;&lt; <font class="stringliteral">".new in extract_paper_plan_to_paper()\n"</font>;
00503                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00504         }
00505         <a class="code" href="classString.html">String</a> istr; <font class="keywordtype">int</font> iread = 0;
00506         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(poutline,istr)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00507 <font class="comment">//WE NOW START BLANK!   if (!clean_paper_outline(istr)) return false; // clean paper outline</font>
00508         <font class="comment">// read all Novelty items from paper plan into list</font>
00509         <a class="code" href="classNovelty__Marker__List.html">Novelty_Marker_List</a> nml; <font class="keywordtype">int</font> nmend = 0, nmnum = 0, hdepth = 0;
00510         <font class="keywordflow">if</font> ((nmend = pptext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]A[       ]*[Nn][Aa][Mm][Ee][     ]*=[    ]*\"tch\""</font>),nmend))&lt;0) {
00511                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No Topical Context Hierarchy found in Paper Plan in extract_paper_plan_to_paper()\n"</font>;
00512                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00513         }
00514         <font class="keywordflow">while</font> ((nmend = nml[nmnum].Get_Novelty_from_Paper_Plan(pptext,nmend,hdepth))&gt;=0) {
00515                 hdepth = nml[nmnum].hierdepth; <font class="comment">// track Topical Context Hierarchy depth</font>
00516                 <font class="keywordflow">if</font> (hdepth&lt;0) <font class="keywordflow">break</font>;
00517                 <font class="keywordflow">if</font> (nml[nmnum].source!=<font class="stringliteral">""</font>) nml[nmnum].source = <a class="code" href="utilities_8cc.html#a31">absurl</a>(ppname,nml[nmnum].source);
00518                 nmnum++;
00519         }
00520         <font class="comment">// read Section IDs</font>
00521         <a class="code" href="classStringList.html">StringList</a> ppsectionids, ppsectiontitles;
00522         <font class="keywordflow">if</font> (!<a class="code" href="ppfilter_8pre-blank_8cc.html#a2">get_Paper_Plans_Section_IDs</a>(ppsectionids,ppsectiontitles)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00523 <font class="comment">//*** generate tentative Abstract, as specified in</font>
00524 <font class="comment">//*** DIL#20000315155709.1</font>
00525         <font class="comment">// per section</font>
00526         <font class="comment">// read outline, find section headings that match Section IDs</font>
00527         <font class="keywordtype">int</font> secidx, srcfnum = 0; <a class="code" href="classStringList.html">StringList</a> srcf, srcfname; <a class="code" href="classString.html">String</a> requireditems;
00528         <font class="keywordflow">while</font> ((secidx = istr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"\\section"</font>,iread))&gt;=0) {
00529                 <font class="comment">// get section title</font>
00530                 <a class="code" href="classString.html">String</a> sectitle = istr.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[^}]+"</font>),secidx+8);
00531                 sectitle = sectitle.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[   ]*[{][  ]*"</font>));
00532                 sectitle.<a class="code" href="classString.html#a83">del</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[        ]*$"</font>));
00533                 sectitle.<a class="code" href="classString.html#a82">upcase</a>();
00534                 <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Parsing paper outline section "</font> &lt;&lt; sectitle &lt;&lt; <font class="charliteral">'\n'</font>;
00535                 <font class="comment">// copy outline up to \section command</font>
00536                 ostrtext += istr.<a class="code" href="classString.html#a51">at</a>(iread,secidx-iread); iread = secidx;
00537                 <font class="comment">// copy section header</font>
00538                 <font class="keywordflow">if</font> ((secidx = istr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"%[^\n]*@[    ]*End[  ]+SECTION[      ]+CONTENT[      ]*@"</font>),iread))&gt;=0) {
00539                         ostrtext += istr.<a class="code" href="classString.html#a51">at</a>(iread,secidx-iread); iread = secidx;
00540                 } <font class="keywordflow">else</font> {
00541                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing @End SECTION CONTENT@ tag in extract_paper_plan_to_paper(), content placement may be incorrect, continuing\n"</font>;
00542                         secidx = istr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"\n"</font>,iread); secidx++;
00543                         ostrtext += istr.<a class="code" href="classString.html#a51">at</a>(iread,secidx-iread); iread = secidx;
00544                 }
00545                 <font class="comment">// parse items in section</font>
00546                 <font class="keywordtype">int</font> seclistidx; <a class="code" href="classString.html">String</a> refurl = <a class="code" href="utilities_8cc.html#a30">relurl</a>(poutline,ppname);
00547                 <font class="keywordflow">if</font> ((sectitle!=<font class="stringliteral">""</font>) &amp;&amp; ((seclistidx = ppsectiontitles.<a class="code" href="classStringList.html#a11">iselement</a>(sectitle))&gt;=0)) {
00548                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;nmnum; i++)
00549                          <font class="keywordflow">if</font> ((nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s1">Novelty_Marker::NM_TCH_DEPTH_INC</a>)
00550                           || (nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s2">Novelty_Marker::NM_TCH_DEPTH_DEC</a>)
00551                           || (nml[i].section.<a class="code" href="classNovelty__Marker__List.html#a9">iselement</a>(ppsectionids[seclistidx])&gt;=0)) {
00552                                 <font class="keywordflow">if</font> (nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s6">Novelty_Marker::NM_REQUIRED_ITEM</a>) <a class="code" href="ppfilter_8pre-blank_8cc.html#a4">extract_required_item_to_paper</a>(ostrtext,refurl,nml[i],sectitle,requireditems,pprevtext);
00553                                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s1">Novelty_Marker::NM_TCH_DEPTH_INC</a>) <a class="code" href="ppfilter_8pre-blank_8cc.html#a5">extract_hierarchy_depth_increase_to_paper</a>(ostrtext,nml[i]);
00554                                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s2">Novelty_Marker::NM_TCH_DEPTH_DEC</a>) <a class="code" href="ppfilter_8pre-blank_8cc.html#a6">extract_hierarchy_depth_decrease_to_paper</a>(ostrtext,nml[i]);
00555                                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (nml[i].nmtype==<a class="code" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>) <a class="code" href="ppfilter_8pre-blank_8cc.html#a13">extract_novelty_item_to_paper</a>(ostrtext,nml[i],srcf,srcfname,srcfnum,poutline,pprevtext);
00556                         }
00557                 }
00558         }
00559         <font class="comment">// add \figureloose commands</font>
00560         <font class="keywordtype">int</font> ofigidx;
00561         <font class="keywordflow">if</font> ((ofigidx = ostrtext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[\\][A-Za-z]*figurehere[{]"</font>)))&gt;=0) {
00562                 <font class="comment">// find loose figures location in outline and copy to there</font>
00563                 <font class="keywordtype">int</font> iloosefigidx, ifigend;
00564                 <font class="keywordflow">if</font> (((iloosefigidx = istr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n%[  ]*@Begin FIGURES AT END@"</font>),iread))&gt;=0)
00565                  &amp;&amp; ((ifigend = istr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\n%[       ]*@End FIGURES AT END@[^\n]*\n"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>,iread))&gt;=0)) {
00566                         ostrtext += istr.<a class="code" href="classString.html#a51">at</a>(iread,iloosefigidx-iread); iread = ifigend;
00567                 } <font class="keywordflow">else</font> {
00568                         <font class="keywordflow">if</font> ((iloosefigidx = istr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"\\end{document}"</font>,iread))&gt;=0) {
00569                                 ostrtext += istr.<a class="code" href="classString.html#a51">at</a>(iread,iloosefigidx-iread); iread = iloosefigidx;
00570                         } <font class="keywordflow">else</font> {
00571                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No \\end{document} found in outline in extract_paper_plan_to_paper(), continuing as is\n"</font>;
00572                                 ostrtext += istr.<a class="code" href="classString.html#a70">from</a>(iread); iread = istr.<a class="code" href="classString.html#a105">length</a>();
00573                         }
00574                 }
00575                 <font class="comment">// copy \figurehere data to \figureloose commands</font>
00576                 ostrtext += <font class="stringliteral">"\n% @Begin FIGURES AT END@\n\n"</font>;
00577                 <font class="keywordflow">while</font> (ofigidx&gt;=0) {
00578                         <font class="keywordflow">if</font> ((ifigend = ostrtext.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"\n"</font>,ofigidx))&lt;0) ifigend = ostrtext.<a class="code" href="classString.html#a105">length</a>();
00579                         <a class="code" href="classString.html">String</a> figdata = ostrtext.<a class="code" href="classString.html#a51">at</a>(ofigidx,ifigend-ofigidx);
00580                         figdata.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"^\\([\\][A-Za-z]*\\)figurehere[{]"</font>),<font class="stringliteral">"_1figureloose{"</font>,<font class="charliteral">'_'</font>);
00581                         ostrtext += figdata + <font class="stringliteral">"\n\n"</font>;
00582                         ofigidx = ostrtext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[\\][A-Za-z]*figurehere[{]"</font>),ifigend);
00583                 }
00584                 ostrtext += <font class="stringliteral">"% @End FIGURES AT END@\n"</font>;
00585         }
00586         <font class="comment">// copy remainder of outline</font>
00587         <font class="keywordflow">if</font> (iread&lt;istr.<a class="code" href="classString.html#a105">length</a>()) ostrtext += istr.<a class="code" href="classString.html#a70">from</a>(iread);
00588 <font class="comment">//*** add new Context items to plan-plans.html file here</font>
00589 cerr &lt;&lt; <font class="stringliteral">"Add automatic call to add Context items to plan-plans.html file here...\n"</font>;
00590         ostr &lt;&lt; ostrtext; <font class="comment">// write paper draft file</font>
00591         ostr.close();
00592 <font class="preprocessor">#ifndef DEBUG_DO_NOT_CREATE_NEW_OUTLINE</font>
00593 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a36">backup_and_rename</a>(poutline,<font class="stringliteral">"Paper Draft"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00594         <font class="comment">// find required items list in paper plan, create if not found</font>
00595         <font class="keywordtype">int</font> riidx;
00596         <font class="keywordflow">if</font> ((riidx = pptext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[     ]*@Begin REQUIRED ITEMS@[       ]*--[&gt;]\n"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&lt;0) {
00597                 <font class="comment">// create list of required items</font>
00598                 <font class="keywordflow">if</font> ((riidx = pptext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\([&lt;][Pp][&gt;][      ]*\n[&lt;][Hh][Rr][&gt;].*\\)?[&lt;]/[Bb][Oo][Dd][Yy][&gt;]"</font>)))&lt;0)
00599                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create list of required items in extract_paper_plan_to_paper(), continuing as is\n"</font>;
00600                 <font class="keywordflow">else</font> {
00601                         <a class="code" href="classString.html">String</a> pptextrest = pptext.<a class="code" href="classString.html#a51">at</a>(riidx,pptext.<a class="code" href="classString.html#a105">length</a>()-riidx);
00602                         pptext = pptext.<a class="code" href="classString.html#a58">before</a>(riidx)
00603                                         + <font class="stringliteral">"&lt;H2&gt;&lt;A HNAME=\"required-items\"&gt;Required Items&lt;/A&gt;&lt;/H2&gt;\n\n&lt;UL&gt;\n&lt;!-- @Begin REQUIRED ITEMS@ --&gt;\n&lt;!-- @End REQUIRED ITEMS@ --&gt;\n&lt;/UL&gt;\n\n"</font>
00604                                         + pptextrest;
00605                         riidx += 92; <font class="comment">// move index to start of &lt;!-- @End REQUIRED ITEMS@ --&gt; tag</font>
00606                 }
00607         }
00608         <font class="keywordflow">if</font> (riidx&gt;=0) {
00609                 <font class="comment">// update required items list</font>
00610                 <font class="keywordtype">int</font> riend;
00611                 <font class="keywordflow">if</font> ((riend = pptext.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[     ]*@End REQUIRED ITEMS@[         ]*--[&gt;]"</font>),riidx))&lt;0) {
00612                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing @End REQUIRED ITEMS@ tag in extract_paper_plan_to_paper(), placing tag\n"</font>;
00613                         <a class="code" href="classString.html">String</a> pptextrest = pptext.<a class="code" href="classString.html#a51">at</a>(riidx,pptext.<a class="code" href="classString.html#a105">length</a>()-riidx);
00614                         pptext = pptext.<a class="code" href="classString.html#a58">before</a>(riidx) + <font class="stringliteral">"&lt;!-- @End REQUIRED ITEMS@ --&gt;\n"</font> + pptextrest;
00615                         riend = riidx;
00616                 }
00617                 <a class="code" href="classString.html">String</a> pptextrest = pptext.<a class="code" href="classString.html#a51">at</a>(riend,pptext.<a class="code" href="classString.html#a105">length</a>()-riend);
00618                 pptext = pptext.<a class="code" href="classString.html#a58">before</a>(riidx) + requireditems + pptextrest;
00619                 <font class="comment">// store, backup and rename updated paper plan</font>
00620                 ostr.open(ppname+<font class="stringliteral">".new"</font>);
00621                 <font class="keywordflow">if</font> (!ostr) {
00622                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create "</font> &lt;&lt; ppname &lt;&lt; <font class="stringliteral">".new to update required items list in extract_paper_plan_to_paper(), continuing as is\n"</font>;
00623                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00624                 }
00625                 ostr &lt;&lt; pptext;
00626                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a36">backup_and_rename</a>(ppname,<font class="stringliteral">"Paper Plan"</font>))
00627                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to update required items list extract_paper_plan_to_paper(), continuing as is\n"</font>;
00628         }
00629         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00630 <font class="preprocessor">#endif</font>
00631 <font class="preprocessor"></font>}
</pre></div>    </td>
  </tr>
</table>
<a name="a12" doxytag="ppfilter.pre-blank.cc::extract_recursively"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void extract_recursively </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ostrtext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfnum</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>depth</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker__List.html">Novelty_Marker_List</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>visited</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>poutline</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pprevtext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00361">361</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l01943">absurl</a>(), <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8cc-source.html#l00896">String::before</a>(), <a class="el" href="utilities_8cc-source.html#l00110">StringList::concatenate</a>(), <a class="el" href="BigString_8hh-source.html#l01126">String::contains</a>(), <a class="el" href="dil2al_8hh-source.html#l00267">Novelty_Marker::context</a>, <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00328">convert_item_content_to_TeX</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="BigString_8cc-source.html#l00911">String::from</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00021">get_figure_data</a>(), <a class="el" href="utilities_8cc-source.html#l02101">get_file_in_list</a>(), <a class="el" href="dil2al_8hh-source.html#l00262">Novelty_Marker::id</a>, <a class="el" href="dil2al_8hh-source.html#l00268">Novelty_Marker::imp</a>, <a class="el" href="dil2al_8hh-source.html#l00269">Novelty_Marker::impnum</a>, <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="utilities_8cc-source.html#l00484">Novelty_Marker_List::iselement</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00282">item_content_between_range_tags</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00305">item_content_within_DIL_entry</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00316">item_content_within_paragraph</a>(), <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00291">item_content_within_TL_chunk</a>(), <a class="el" href="dil2al_8hh-source.html#l00270">Novelty_Marker::len</a>, <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>(), <a class="el" href="dil2al_8hh-source.html#l00303">Novelty_Marker_List::length</a>(), <a class="el" href="dil2al_8hh-source.html#l01221">MAX_RECURSIVE_PP2PD_EXTRACTION_DEPTH</a>, <a class="el" href="classNovelty__Marker.html#s8s7">Novelty_Marker::NM_CONTENT_HREF</a>, <a class="el" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>, <a class="el" href="dil2al_8hh-source.html#l00282">Novelty_Marker::nmtype</a>, <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), <a class="el" href="dil2al_8hh-source.html#l00263">Novelty_Marker::source</a>, and <a class="el" href="BigString_8cc-source.html#l00901">String::through</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00882">extract_novelty_item_to_paper</a>(), and <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00361                                                                                                                                                                                                            {
00362         <font class="comment">// keep track of places already visited to avoid infinite loops</font>
00363         <font class="keywordflow">if</font> (visited.<a class="code" href="classNovelty__Marker__List.html#a9">iselement</a>(nm)&gt;=0) {
00364                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Avoiding repetition of "</font> &lt;&lt; nm.<a class="code" href="classNovelty__Marker.html#m1">source</a> &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; nm.<a class="code" href="classNovelty__Marker.html#m0">id</a> &lt;&lt; <font class="stringliteral">" in extract_recursively(), continuing as is\n"</font>;
00365                 ostrtext += <font class="stringliteral">"% @WARNING: Repeated recursion into "</font> + nm.<a class="code" href="classNovelty__Marker.html#m1">source</a> + <font class="charliteral">'#'</font> + nm.<a class="code" href="classNovelty__Marker.html#m0">id</a> + <font class="stringliteral">"avoided@\n"</font>;
00366                 <font class="keywordflow">return</font>;
00367         }
00368         <font class="keywordtype">int</font> visitedidx = visited.<a class="code" href="classNovelty__Marker__List.html#a8">length</a>();
00369         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m10">nmtype</a>==<a class="code" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>) visitedidx--; <font class="comment">// use first list element</font>
00370         visited[visitedidx].source = nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>;
00371         visited[visitedidx].id = nm.<a class="code" href="classNovelty__Marker.html#m0">id</a>;
00372         visited[visitedidx].nmtype = nm.<a class="code" href="classNovelty__Marker.html#m10">nmtype</a>;
00373         <font class="comment">// keep track of depth</font>
00374         depth++;
00375         <font class="keywordflow">if</font> (depth&gt;<a class="code" href="dil2al_8hh.html#a74">MAX_RECURSIVE_PP2PD_EXTRACTION_DEPTH</a>) {
00376                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Maximum extraction recursion depth ("</font> &lt;&lt; <a class="code" href="dil2al_8hh.html#a74">MAX_RECURSIVE_PP2PD_EXTRACTION_DEPTH</a> &lt;&lt; <font class="stringliteral">")exceeded in extract_recursively(), continuing as is\n"</font>;
00377                 ostrtext = ostrtext + <font class="stringliteral">"% @WARNING: Maximum extraction recursion depth ("</font> + dec(<a class="code" href="dil2al_8hh.html#a74">MAX_RECURSIVE_PP2PD_EXTRACTION_DEPTH</a>) + <font class="stringliteral">")exceeded@\n"</font>;
00378                 <font class="keywordflow">return</font>;
00379         }
00380         <font class="comment">// load source document if not already loaded</font>
00381         <font class="keywordtype">int</font> srcidx;
00382         <font class="keywordflow">if</font> ((srcidx = <a class="code" href="utilities_8cc.html#a40">get_file_in_list</a>(nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>,srcf,srcfname,srcfnum))&lt;0) {
00383                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"continuing as is\n"</font>;
00384                 ostrtext += <font class="stringliteral">"% @WARNING: Recursion was unable to load source document "</font> + nm.<a class="code" href="classNovelty__Marker.html#m1">source</a> + <font class="stringliteral">"@\n"</font>;
00385                 <font class="keywordflow">return</font>;
00386         }
00387         <font class="comment">// include content in outline</font>
00388         <a class="code" href="classString.html">String</a> srcref = <a class="code" href="utilities_8cc.html#a30">relurl</a>(poutline,nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>)+<font class="charliteral">'#'</font>+nm.<a class="code" href="classNovelty__Marker.html#m0">id</a>;
00389         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m10">nmtype</a>==<a class="code" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>) {
00390 <font class="comment">//*** detect if REWRITTEN, if so copy from rewritten version and optionally</font>
00391 <font class="comment">//*** ask if new extraction should be concatenated with a marker</font>
00392 <font class="comment">//*** if (askextractconcat)</font>
00393                 ostrtext += <font class="stringliteral">"% @Begin EXTRACTED: "</font> + srcref + <font class="stringliteral">"@\n% Context: "</font>;
00394                 ostrtext += nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>);
00395                 <font class="keywordtype">char</font> fc[10];
00396                 <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>) {
00397                         sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>[0]);
00398                         ostrtext += fc;
00399                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j=1; j&lt;nm.<a class="code" href="classNovelty__Marker.html#m6">impnum</a>; j++) {
00400                                 sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>[j]);
00401                                 ostrtext += <font class="stringliteral">", "</font>; ostrtext += fc;
00402                         }
00403                 }
00404                 sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m7">len</a>);
00405                 ostrtext = ostrtext + <font class="stringliteral">"\n% Intended length: "</font> + fc + <font class="stringliteral">" pages\n"</font>;
00406         } <font class="keywordflow">else</font> ostrtext += <font class="stringliteral">"\n% @Begin CONTENT HREF: (depth "</font> + (dec(depth) + (<font class="stringliteral">") "</font> + srcref + <font class="stringliteral">"@\n"</font>));
00407         <font class="keywordtype">int</font> nidx;
00408         <font class="keywordflow">if</font> ((nidx = srcf[srcidx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]A[  ]+[Nn][Aa][Mm][Ee][     ]*=[    ]*\""</font>+nm.<a class="code" href="classNovelty__Marker.html#m0">id</a>+<font class="charliteral">'"'</font>)))&gt;=0) {
00409                 <font class="comment">// content range detection (independent of file type)</font>
00410 <font class="comment">//*** add remaining rules for content ranges</font>
00411                 <a class="code" href="classString.html">String</a> itemcontent;
00412                 <font class="keywordflow">if</font> (!<a class="code" href="ppfilter_8pre-blank_8cc.html#a7">item_content_between_range_tags</a>(nm,nidx,srcf[srcidx],itemcontent))
00413                  <font class="keywordflow">if</font> (!<a class="code" href="ppfilter_8pre-blank_8cc.html#a8">item_content_within_TL_chunk</a>(nidx,srcf[srcidx],itemcontent))
00414                   <font class="keywordflow">if</font> (!<a class="code" href="ppfilter_8pre-blank_8cc.html#a9">item_content_within_DIL_entry</a>(nidx,srcf[srcidx],itemcontent))
00415                    <a class="code" href="ppfilter_8pre-blank_8cc.html#a10">item_content_within_paragraph</a>(nidx,srcf[srcidx],itemcontent);
00416                 <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>.<a class="code" href="classString.html#a32">contains</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[.][Tt][Ee][Xx]$"</font>))) {
00417                         <font class="comment">// TeX files require no conversion but can contain \input{} references</font>
00418                         <font class="keywordtype">int</font> inputidx = -1;
00419                         <font class="keywordflow">while</font> ((inputidx = itemcontent.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"\\input{"</font>,inputidx+1))&gt;=0) {
00420                                 <a class="code" href="classString.html">String</a> inputref = itemcontent.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[^ }]*"</font>),inputidx+7);
00421                                 inputref = <a class="code" href="utilities_8cc.html#a31">absurl</a>(nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>,inputref);
00422                                 inputref = <a class="code" href="utilities_8cc.html#a30">relurl</a>(poutline,inputref);
00423                                 <a class="code" href="classString.html">String</a> afterinput = itemcontent.<a class="code" href="classString.html#a70">from</a>(<font class="stringliteral">"}"</font>,inputidx+7);
00424                                 itemcontent = itemcontent.<a class="code" href="classString.html#a58">before</a>(inputidx+7) + inputref + afterinput;
00425                         }
00426                 } <font class="keywordflow">else</font> <a class="code" href="ppfilter_8pre-blank_8cc.html#a11">convert_item_content_to_TeX</a>(itemcontent);
00427                 <font class="comment">// locate content hyperlink references</font>
00428                 <font class="keywordtype">int</font> istart=0, iend=0; <a class="code" href="classNovelty__Marker.html">Novelty_Marker</a> nmhref;
00429                 <font class="keywordflow">while</font> (iend&lt;itemcontent.<a class="code" href="classString.html#a105">length</a>()) {
00430                         <font class="keywordflow">if</font> ((iend = itemcontent.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"@HRef::"</font>,istart))&lt;0) {
00431                                 iend = itemcontent.<a class="code" href="classString.html#a105">length</a>();
00432                                 ostrtext += itemcontent.<a class="code" href="classString.html#a51">at</a>(istart,iend-istart) + <font class="charliteral">'\n'</font>;
00433                         } <font class="keywordflow">else</font> {
00434                                 ostrtext += itemcontent.<a class="code" href="classString.html#a51">at</a>(istart,iend-istart); <font class="comment">//*** could add a `\n` here</font>
00435                                 <font class="comment">// recurse content extraction for @HREF: &lt;document&gt;@ codes</font>
00436                                 <font class="comment">//*** perhaps recursively extracted content should be placed</font>
00437                                 <font class="comment">//*** after the following punctuation mark</font>
00438                                 <font class="comment">//*** buglets:</font>
00439                                 <font class="comment">//*** getting content from C++ files, file names</font>
00440                                 <font class="comment">//*** such as synapse_AMPA_NMDA.hh affected by</font>
00441                                 <font class="comment">//*** conversions</font>
00442                                 nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a> = itemcontent.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[^@]+"</font>),iend+7);
00443                                 nmhref.<a class="code" href="classNovelty__Marker.html#m0">id</a> = nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'#'</font>);
00444                                 <font class="keywordflow">if</font> (nmhref.<a class="code" href="classNovelty__Marker.html#m0">id</a>!=<font class="stringliteral">""</font>) nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a> = nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>.<a class="code" href="classString.html#a58">before</a>(<font class="stringliteral">"\\#"</font>);
00445                                 nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a> = <a class="code" href="utilities_8cc.html#a31">absurl</a>(srcfname[srcidx],nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>);
00446                                 <font class="comment">// recognize figures</font>
00447                                 <font class="keywordflow">if</font> (nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>.<a class="code" href="classString.html#a32">contains</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[.]\\([Ff][Ii][Gg]\\|[Ee]?[Pp][Ss]\\)$"</font>))) {
00448                                         nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a> = nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>.<a class="code" href="classString.html#a64">through</a>(<font class="charliteral">'.'</font>,-1) + <font class="stringliteral">"eps"</font>; <font class="comment">// use .eps not .fig</font>
00449                                         <font class="comment">// obtain label, caption and psfrag conversions</font>
00450                                         <a class="code" href="classString.html">String</a> figlabel, figcaption, psconversions;
00451                                         <a class="code" href="ppfilter_8pre-blank_8cc.html#a1">get_figure_data</a>(nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>,figlabel,figcaption,psconversions,srcf,srcfname,srcfnum);
00452                                         <font class="comment">// include figure</font>
00453 <font class="comment">//*** perhaps use a template here</font>
00454 <font class="comment">//*** intelligently choose type of figure command</font>
00455                                         ostrtext += <font class="stringliteral">"\n\\figurehere"</font>;
00456                                         <font class="keywordflow">if</font> (psconversions!=<font class="stringliteral">""</font>) ostrtext += <font class="stringliteral">"{psconversions}"</font>;
00457                                         ostrtext += <font class="charliteral">'{'</font> + figlabel + <font class="stringliteral">"}{"</font> + <a class="code" href="utilities_8cc.html#a30">relurl</a>(poutline,nmhref.<a class="code" href="classNovelty__Marker.html#m1">source</a>) + <font class="stringliteral">"}{"</font>+figcaption+<font class="stringliteral">"}\n"</font>;
00458                                 } <font class="keywordflow">else</font> {
00459                                         nmhref.<a class="code" href="classNovelty__Marker.html#m10">nmtype</a> = <a class="code" href="classNovelty__Marker.html#s8s7">Novelty_Marker::NM_CONTENT_HREF</a>;
00460                                         <a class="code" href="ppfilter_8pre-blank_8cc.html#a12">extract_recursively</a>(ostrtext,nmhref,srcf,srcfname,srcfnum,depth,visited,poutline,pprevtext);
00461                                 }
00462                                 <font class="keywordflow">if</font> ((istart = itemcontent.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"@"</font>,iend+1))&lt;0) istart = iend;
00463                                 <font class="keywordflow">else</font> istart++;
00464 <font class="comment">// *** There are some references without ID</font>
00465                         }
00466                 }
00467         } <font class="keywordflow">else</font> {
00468                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: "</font> &lt;&lt; nm.<a class="code" href="classNovelty__Marker.html#m0">id</a> &lt;&lt; <font class="stringliteral">" not found in source file in extract_paper_plan_to_paper(), continuing as is\n"</font>;
00469                 ostrtext += <font class="stringliteral">"% (Item ID "</font> + nm.<a class="code" href="classNovelty__Marker.html#m0">id</a> + <font class="stringliteral">" not found in content source file "</font> + <a class="code" href="utilities_8cc.html#a30">relurl</a>(poutline,nm.<a class="code" href="classNovelty__Marker.html#m1">source</a>) + <font class="stringliteral">") \n"</font>;
00470         }
00471         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m10">nmtype</a>==<a class="code" href="classNovelty__Marker.html#s8s0">Novelty_Marker::NM_NOVELTY_ITEM</a>) ostrtext += <font class="stringliteral">"% @End EXTRACTED: "</font> + srcref + <font class="stringliteral">"@\n\n"</font>;
00472         <font class="keywordflow">else</font> ostrtext += <font class="stringliteral">"% @End CONTENT HREF: "</font> + srcref + <font class="stringliteral">"@\n"</font>;
00473 }
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="ppfilter.pre-blank.cc::extract_required_item_to_paper"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void extract_required_item_to_paper </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ostrtext</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>refurl</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>sectitle</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>requireditems</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pprevtext</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00210">210</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="utilities_8cc-source.html#l00110">StringList::concatenate</a>(), <a class="el" href="dil2al_8hh-source.html#l00267">Novelty_Marker::context</a>, <a class="el" href="dil2al_8hh-source.html#l00268">Novelty_Marker::imp</a>, <a class="el" href="dil2al_8hh-source.html#l00269">Novelty_Marker::impnum</a>, <a class="el" href="dil2al_8hh-source.html#l00270">Novelty_Marker::len</a>, <a class="el" href="dil2al_8hh-source.html#l00264">Novelty_Marker::marktext</a>, and <a class="el" href="BigString_8hh-source.html#l00849">String::prepend</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01069">extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00210                                                                                                                                                           {
00211 <font class="comment">// generates output for a Required item with HTML tagged .TeX comments</font>
00212 <font class="comment">// indicating item qualifiers, quantifiers and additional marked text</font>
00213 <font class="comment">// additionally keeps track of a list of required items to be updated</font>
00214 <font class="comment">// in the paper plan and used for AL priority DIL entries</font>
00215         <a class="code" href="classString.html">String</a> contextconcat = nm.<a class="code" href="classNovelty__Marker.html#m4">context</a>.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">", "</font>);
00216         <a class="code" href="classString.html">String</a> impconcat;
00217         <font class="keywordtype">char</font> fc[10];
00218         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>) {
00219                 sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>[0]);
00220                 impconcat = fc;
00221                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=1; i&lt;nm.<a class="code" href="classNovelty__Marker.html#m6">impnum</a>; i++) {
00222                         sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>[i]);
00223                         impconcat += <font class="stringliteral">", "</font>; impconcat += fc;
00224                 }
00225         }
00226 <font class="comment">//*** check if in pprevtext</font>
00227 <font class="comment">//*** - some novelty items were extracted to multiple sections, but may have</font>
00228 <font class="comment">//***   been rewritten in several ways, while perhaps not having been rewritten</font>
00229 <font class="comment">//***   in some sections, so that it is important to know that the right section</font>
00230 <font class="comment">//***   is being addressed when a rewritten version is found</font>
00231 <font class="comment">//***</font>
00232 <font class="comment">//*** * fix clean up... find extra tail removed by outputting cleaned up version</font>
00233 <font class="comment">//***   and comparing with version generated from jliltm.tex.outline</font>
00234 <font class="comment">//*** * figure out how to differentiate between same-id novelty items in multiple</font>
00235 <font class="comment">//***   sections</font>
00236 <font class="comment">//*** * add use of pprevtext for extracted novelty and required items</font>
00237         ostrtext += <font class="stringliteral">"% @Begin REQUIRED@\n% Context: "</font>;
00238         ostrtext += contextconcat;
00239         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m5">imp</a>) ostrtext += <font class="stringliteral">"\n% Importance: "</font> + impconcat;
00240         sprintf(fc,<font class="stringliteral">"%4.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m7">len</a>);
00241         ostrtext += <font class="stringliteral">"\n% Intended length: "</font> + (fc + (<font class="stringliteral">" pages\n% Section: "</font> + sectitle));
00242         ostrtext += <font class="stringliteral">"\n% ["</font> + refurl + <font class="stringliteral">"]"</font>;
00243         ostrtext += <font class="stringliteral">"\n\\editnote{REQUIRED: "</font> + contextconcat;
00244         <font class="keywordflow">if</font> (nm.<a class="code" href="classNovelty__Marker.html#m2">marktext</a>!=<font class="stringliteral">""</font>) {
00245                 ostrtext += <font class="stringliteral">" ("</font> + nm.<a class="code" href="classNovelty__Marker.html#m2">marktext</a> + <font class="charliteral">')'</font>;
00246                 contextconcat.<a class="code" href="classString.html#a22">prepend</a>(<font class="stringliteral">"&lt;I&gt;"</font>+nm.<a class="code" href="classNovelty__Marker.html#m2">marktext</a>+<font class="stringliteral">";&lt;/I&gt; "</font>);
00247         }
00248         ostrtext += <font class="stringliteral">"}\n% @End REQUIRED@\n\n"</font>;
00249         <font class="comment">// collect required items for addition to paper plan</font>
00250         sprintf(fc,<font class="stringliteral">"%5.2f"</font>,nm.<a class="code" href="classNovelty__Marker.html#m7">len</a>);
00251         requireditems += <font class="stringliteral">"&lt;LI&gt;["</font>+sectitle+<font class="stringliteral">"] "</font>+contextconcat+<font class="stringliteral">" (imp: "</font>+((impconcat+<font class="stringliteral">", len: "</font>)+fc)+<font class="stringliteral">")\n"</font>;
00252 }
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="ppfilter.pre-blank.cc::get_figure_data"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void get_figure_data </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>figfile</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>figlabel</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>figcaption</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>psconversions</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfnum</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00021">21</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l02101">get_file_in_list</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="utilities_8cc-source.html#l01927">relurl</a>(), and <a class="el" href="classString.html#s2s1">String::SEARCH_END</a>.
<p>
Referenced by <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00361">extract_recursively</a>(), and <a class="el" href="ppfilter_8cc-source.html#l00716">extraction_put_figure</a>().
<p>
<div class="fragment"><pre>00021                                                                                                                                                                 {
00022 <font class="comment">// obtains missing figure data from the Figures Directory</font>
00023         <font class="keywordtype">int</font> srcidx;
00024         <font class="keywordflow">if</font> ((srcidx = <a class="code" href="utilities_8cc.html#a40">get_file_in_list</a>(figuresdirectory,srcf,srcfname,srcfnum))&lt;0)
00025                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Some figure data may be missing in get_figure_data(), continuing as is\n"</font>;
00026         <font class="keywordflow">else</font> {
00027                 <font class="comment">// find figure data</font>
00028                 <a class="code" href="classString.html">String</a> findid;
00029                 <font class="keywordflow">if</font> (figfile!=<font class="stringliteral">""</font>) findid = <a class="code" href="utilities_8cc.html#a30">relurl</a>(figuresdirectory,figfile);
00030                 <font class="keywordflow">else</font> <font class="keywordflow">if</font> (figlabel!=<font class="stringliteral">""</font>) findid = figlabel;
00031                 <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No figure file or label, some figure data may be missing in get_figure_data(), continuing as is\n"</font>;
00032                 <font class="keywordflow">if</font> (findid!=<font class="stringliteral">""</font>) {
00033                         <font class="keywordtype">int</font> figididx;
00034                         <font class="keywordflow">if</font> ((figididx = srcf[srcidx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]@Begin FIGURE DATA:[^@]*"</font>+findid+<font class="stringliteral">"[^@]*@[      ]*--[&gt;]"</font>)))&lt;0)
00035                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Figure "</font> &lt;&lt; findid &lt;&lt; <font class="stringliteral">" not found in get_figure_data(), continuing as is\n"</font>;
00036                         <font class="keywordflow">else</font> {
00037                                 <font class="keywordtype">int</font> figidend;
00038                                 <font class="keywordflow">if</font> ((figidend = srcf[srcidx].index(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]*@End FIGURE DATA@[    ]*--[&gt;]"</font>),figididx))&lt;0)
00039                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Figure "</font> &lt;&lt; findid &lt;&lt; <font class="stringliteral">" End marker missing in get_figure_data(), continuing as is\n"</font>;
00040                                 <font class="keywordflow">else</font> {
00041                                         <a class="code" href="classString.html">String</a> figdata = srcf[srcidx].at(figididx,figidend-figididx);
00042                                         figlabel = figdata.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[         ]*@Figure label@[       ]*--[&gt;][        ]*[^]&lt;  \n]+"</font>));
00043                                         figlabel = figlabel.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[     ]*@Figure label@[       ]*--[&gt;][        ]*"</font>));
00044                                         figfile = figdata.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[  ]*@Figure file@[        ]*--[&gt;][        ]*[^&lt;   \n]+"</font>));
00045                                         figfile = figfile.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[       ]*@Figure file@[        ]*--[&gt;][        ]*"</font>));
00046                                         figcaption = figdata.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[       ]*@Figure caption@[     ]*--[&gt;][        ]*[^&lt;   \n]+"</font>));
00047                                         figcaption = figcaption.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[         ]*@Figure caption@[     ]*--[&gt;][        ]*"</font>));
00048                                         <font class="keywordtype">int</font> pscidx;
00049                                         <font class="keywordflow">if</font> ((pscidx = figdata.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[   ]*@Begin Figure psconversions@[         ]*--[&gt;][        ]*"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&gt;=0) {
00050                                                 <font class="keywordtype">int</font> pscend;
00051                                                 <font class="keywordflow">if</font> ((pscend = figdata.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[   ]*@End Figure psconversions@[   ]*--[&gt;]"</font>),pscidx))&gt;=0)
00052                                                         psconversions = figdata.<a class="code" href="classString.html#a51">at</a>(pscidx,pscend-pscidx);
00053                                                         <font class="keywordflow">if</font> (psconversions==<font class="stringliteral">"\n"</font>) psconversions = <font class="stringliteral">""</font>;
00054                                         }
00055                                 }
00056                         }
00057                 }
00058         }
00059         <font class="keywordflow">if</font> (figfile==<font class="stringliteral">""</font>) figfile = homedir+<font class="stringliteral">"doc/tex/common-eps/placeholder.eps"</font>;
00060         <font class="keywordflow">if</font> (figlabel==<font class="stringliteral">""</font>) figlabel = <font class="stringliteral">"fig:unknown"</font>;
00061         <font class="keywordflow">if</font> (figcaption==<font class="stringliteral">""</font>) figcaption = <font class="stringliteral">"\\relax"</font>;
00062 }
</pre></div>    </td>
  </tr>
</table>
<a name="a0" doxytag="ppfilter.pre-blank.cc::get_file_in_list"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int get_file_in_list </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>fname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfname</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>srcfnum</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00006">6</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="utilities_8cc-source.html#l00075">StringList::iselement</a>(), and <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>().
<p>
<div class="fragment"><pre>00006                                                                                              {
00007 <font class="comment">// load a file if it is not already in a list of file-strings</font>
00008         <font class="keywordtype">int</font> srcidx;
00009         <font class="keywordflow">if</font> ((srcidx = srcfname.<a class="code" href="classStringList.html#a11">iselement</a>(fname))&lt;0) {
00010                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(fname,srcf[srcfnum])) {
00011                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to load source document "</font> &lt;&lt; fname &lt;&lt; <font class="stringliteral">" in get_file_in_list()\n"</font>;
00012                         <font class="keywordflow">return</font> -1;
00013                 }
00014                 srcfname[srcfnum] = fname;
00015                 srcidx = srcfnum;
00016                 srcfnum++;
00017         }
00018         <font class="keywordflow">return</font> srcidx;
00019 }
</pre></div>    </td>
  </tr>
</table>
<a name="a2" doxytag="ppfilter.pre-blank.cc::get_Paper_Plans_Section_IDs"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool get_Paper_Plans_Section_IDs </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ppsectionids</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classStringList.html">StringList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ppsectiontitles</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00064">64</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00906">String::after</a>(), <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8cc-source.html#l00843">String::del</a>(), <a class="el" href="dil2al_8hh-source.html#l01406">EOUT</a>, <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), <a class="el" href="utilities_8cc-source.html#l02074">read_file_into_String</a>(), and <a class="el" href="BigString_8hh-source.html#l01018">String::upcase</a>.
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l01069">extract_paper_plan_to_paper</a>().
<p>
<div class="fragment"><pre>00064                                                                                           {
00065 <font class="comment">/* obtain registered IDs of paper Sections as</font>
00066 <font class="comment">   listed in the</font>
00067 <font class="comment">   &lt;A HREF="../../doc/html/lists/paper-plans.html#PST"&gt;</font>
00068 <font class="comment">   Paper Plans</font>
00069 <font class="comment">   &lt;/A&gt; file */</font>
00070         <a class="code" href="classString.html">String</a> ppfstr;
00071         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(paperplansfile,ppfstr)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00072         <font class="keywordtype">int</font> pstidx;
00073         <font class="keywordflow">if</font> ((pstidx = ppfstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]A[      ]+[Nn][Aa][Mm][Ee][     ]*=[    ]*\"PST\""</font>)))&lt;0) {
00074                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find Paper Section Titles in Paper Plans document in get_Paper_Plans_Section_IDs()\n"</font>;
00075                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00076         }
00077         <font class="keywordflow">if</font> ((pstidx = ppfstr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"&lt;UL&gt;"</font>,pstidx))&lt;0) {
00078                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Section IDs list not found in Paper Plans document in get_Paper_Plans_Section_IDs()\n"</font>;
00079                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00080         }
00081         <font class="keywordtype">int</font> pstend = ppfstr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"&lt;/UL&gt;"</font>,pstidx);
00082         <font class="keywordtype">int</font> pstnum = 0;
00083         <a class="code" href="classString.html">String</a> pstid, psttitle;
00084         <font class="keywordflow">while</font> ((pstidx = ppfstr.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"&lt;LI&gt;"</font>,pstidx+1))&gt;=0) {
00085                 <font class="keywordflow">if</font> ((<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>) pstidx &lt; (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>) pstend) {
00086                         <font class="keywordflow">if</font> ((pstid = ppfstr.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[[]\\([&lt;][^&gt;]*[&gt;]\\)?[^]]+"</font>),pstidx))!=<font class="stringliteral">""</font>) {
00087                                 pstid.<a class="code" href="classString.html#a83">del</a>(<font class="stringliteral">"["</font>); pstid.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;][^&gt;]*[&gt;]"</font>),<font class="stringliteral">""</font>); pstid.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[  ]+"</font>),<font class="stringliteral">""</font>);
00088                                 <font class="keywordflow">if</font> ((psttitle = ppfstr.<a class="code" href="classString.html#a51">at</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[]][^\n]+"</font>),pstidx))!=<font class="stringliteral">""</font>) {
00089                                         psttitle = psttitle.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[]][        ]*"</font>));
00090                                         psttitle.<a class="code" href="classString.html#a83">del</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[        ]*$"</font>));
00091                                         psttitle.<a class="code" href="classString.html#a82">upcase</a>();
00092                                         ppsectionids[pstnum] = pstid;
00093                                         ppsectiontitles[pstnum] = psttitle;
00094                                         pstnum++;
00095                                 }
00096                         }
00097                 } <font class="keywordflow">else</font> <font class="keywordflow">break</font>;
00098         }
00099         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00100 }
</pre></div>    </td>
  </tr>
</table>
<a name="a7" doxytag="ppfilter.pre-blank.cc::item_content_between_range_tags"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool item_content_between_range_tags </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classNovelty__Marker.html">Novelty_Marker</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nm</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ic</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00282">282</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="dil2al_8hh-source.html#l00262">Novelty_Marker::id</a>, <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), and <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00282                                                                                                {
00283         <font class="comment">// 1. search for content range tags</font>
00284         <font class="keywordtype">int</font> nstartidx, nendidx;
00285         <font class="keywordflow">if</font> (((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[   ]*@Begin[       ]+"</font>+nm.<a class="code" href="classNovelty__Marker.html#m0">id</a>+<font class="stringliteral">"@[   ]*--[&gt;]"</font>),nidx-src.<a class="code" href="classString.html#a105">length</a>()))&lt;0)
00286          || ((nendidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[     ]*@End[         ]+"</font>+nm.<a class="code" href="classNovelty__Marker.html#m0">id</a>+<font class="stringliteral">"@[   ]*--[&gt;]"</font>),nidx))&lt;0)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00287         ic = src.<a class="code" href="classString.html#a51">at</a>(nstartidx,nendidx-nstartidx);
00288         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00289 }
</pre></div>    </td>
  </tr>
</table>
<a name="a9" doxytag="ppfilter.pre-blank.cc::item_content_within_DIL_entry"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool item_content_within_DIL_entry </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ic</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00305">305</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8hh-source.html#l01126">String::contains</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), and <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00305                                                                         {
00306         <font class="comment">// 5. content range when within DIL entry</font>
00307         <font class="keywordtype">int</font> nstartidx, nendidx;
00308         <font class="keywordflow">if</font> ((!src.<a class="code" href="classString.html#a32">contains</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[    ]*dil2al:[      ]*DIL begin[    ]*--[&gt;]"</font>)))
00309          || ((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TR[^&gt;]*[&gt;]"</font>),nidx-src.<a class="code" href="classString.html#a105">length</a>()))&lt;0)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00310         <font class="keywordflow">if</font> ((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TD COLSPAN[^&gt;]*[&gt;]"</font>),nstartidx))&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00311         <font class="keywordflow">if</font> ((nendidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\([&lt;]TR[^&gt;]*[&gt;]\\|[&lt;]!--[   ]*dil2al:[      ]*DIL end[      ]*--[&gt;]\\)"</font>),nstartidx))&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00312         ic = src.<a class="code" href="classString.html#a51">at</a>(nstartidx,nendidx-nstartidx);
00313         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00314 }
</pre></div>    </td>
  </tr>
</table>
<a name="a10" doxytag="ppfilter.pre-blank.cc::item_content_within_paragraph"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool item_content_within_paragraph </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ic</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00316">316</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), and <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00316                                                                         {
00317         <font class="comment">// 6. content range between &lt;P&gt;, empty lines, beginning and end of file</font>
00318         <font class="keywordtype">int</font> nstartidx, nendidx;
00319         <font class="keywordflow">if</font> ((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(\n\n\\|[&lt;][Pp][&gt;]\\)"</font>),nidx-src.<a class="code" href="classString.html#a105">length</a>()))&gt;=0) {
00320                 <font class="keywordflow">if</font> (src[nstartidx]==<font class="charliteral">'&lt;'</font>) nstartidx+=3;
00321                 <font class="keywordflow">else</font> nstartidx+=2;
00322         } <font class="keywordflow">else</font> nstartidx=0; <font class="comment">// from empty line or beginning</font>
00323         <font class="keywordflow">if</font> ((nendidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(\n\n\\|[&lt;][Pp][&gt;]\\)"</font>),nidx))&lt;0) nendidx = src.<a class="code" href="classString.html#a105">length</a>(); <font class="comment">// to empty line or end</font>
00324         ic = src.<a class="code" href="classString.html#a51">at</a>(nstartidx,nendidx-nstartidx);
00325         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00326 }
</pre></div>    </td>
  </tr>
</table>
<a name="a8" doxytag="ppfilter.pre-blank.cc::item_content_within_TL_chunk"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool item_content_within_TL_chunk </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nidx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classString.html">String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ic</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ppfilter_8pre-blank_8cc-source.html#l00291">291</a> of file <a class="el" href="ppfilter_8pre-blank_8cc-source.html">ppfilter.pre-blank.cc</a>.
<p>
References <a class="el" href="BigString_8cc-source.html#l00886">String::at</a>(), <a class="el" href="BigString_8hh-source.html#l01126">String::contains</a>(), <a class="el" href="BigString_8hh-source.html#l01234">String::gsub</a>(), <a class="el" href="BigString_8hh-source.html#l01093">String::index</a>(), and <a class="el" href="BigString_8hh-source.html#l00493">String::length</a>().
<p>
Referenced by <a class="el" href="ppfilter_8cc-source.html#l00749">extract_recursively</a>().
<p>
<div class="fragment"><pre>00291                                                                        {
00292         <font class="comment">// 4. content range when within Task Log chunk</font>
00293         <font class="keywordtype">int</font> nstartidx, nendidx;
00294         <font class="keywordflow">if</font> ((!src.<a class="code" href="classString.html#a32">contains</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]TITLE[&gt;]Task Log ([^)]*)[&lt;]/TITLE[&gt;]"</font>)))
00295          || ((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[   ]*chunk Begin[  ]*--[&gt;]"</font>),nidx-src.<a class="code" href="classString.html#a105">length</a>()))&lt;0)
00296          || ((nendidx = src.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[     ]*chunk End[    ]*--[&gt;]"</font>),nidx))&lt;0)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00297         <font class="keywordflow">if</font> ((nstartidx = src.<a class="code" href="classString.html#a26">index</a>(<font class="stringliteral">"&lt;P&gt;"</font>,nstartidx))&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00298         nstartidx+=3;
00299         ic = src.<a class="code" href="classString.html#a51">at</a>(nstartidx,nendidx-nstartidx);
00300         <font class="comment">// remove TL entry headers</font>
00301         ic.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[       ]*entry [^      ]+[     ]*--[&gt;][^\n]*\n"</font>),<font class="stringliteral">""</font>);
00302         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00303 }
</pre></div>    </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Mon Sep 13 14:53:16 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
