<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>templates.unfixed.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>templates.unfixed.hh</h1><a href="templates_8unfixed_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// Useful C++ templates</font>
00002 <font class="comment">//</font>
00003 <font class="comment">// Randal A. Koene, 20000802</font>
00004 
00005 <font class="preprocessor">#ifndef __TEMPLATES_HH</font>
00006 <font class="preprocessor"></font><font class="preprocessor">#define __TEMPLATES_HH</font>
00007 <font class="preprocessor"></font>
00008 <font class="comment">// Protected Linked List</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// A linked list with protection against breakage and floating remnants,</font>
00011 <font class="comment">// which is also type-safe by using define to create type-specific</font>
00012 <font class="comment">// code instead of type-casting from generic code.</font>
00013 <font class="comment">// The two classes that are created for each class that uses</font>
00014 <font class="comment">// this Protected Linked List template are declared as friends</font>
00015 <font class="comment">// of each other, to simplify intuitive processes for such tasks</font>
00016 <font class="comment">// as linking and unlinking, without granting any private access to</font>
00017 <font class="comment">// either the class using the Protected Linked List template or</font>
00018 <font class="comment">// any classes derived from the two additional created classes,</font>
00019 <font class="comment">// thereby effectively guarding the link structure against</font>
00020 <font class="comment">// changes that could violate the protocol.</font>
00021 <font class="comment">/* Schematic of the structure:</font>
00022 <font class="comment"></font>
00023 <font class="comment">   +----+     +----+     +----+     +----+</font>
00024 <font class="comment">   |obj1|     |obj2|     |obj3|     |obj4|</font>
00025 <font class="comment">   |inh.|     |inh.|     |inh.|     |inh.|</font>
00026 <font class="comment">   |PLL |     |PLL |     |PLL |     |PLL |</font>
00027 <font class="comment">   +----+ next+----+     +----+     +----+</font>
00028 <font class="comment">+-&gt;|PLL1|&lt;---&gt;|PLL2|&lt;---&gt;|PLL3|&lt;---&gt;|PLL4|&lt;-+</font>
00029 <font class="comment">|  +----+prev +----+     +----+     +----+  |</font>
00030 <font class="comment">|     \          \         /          /     |   PLL and</font>
00031 <font class="comment">|      \__________\_______/__________/      |   PLLRoot</font>
00032 <font class="comment">|           root      |                     |   are</font>
00033 <font class="comment">|                     v                     |   friends</font>
00034 <font class="comment">|         head  +-----------+  tail         |</font>
00035 <font class="comment">+---------------|  PLLRoot  |---------------+</font>
00036 <font class="comment">                +-----------+</font>
00037 <font class="comment">                     ### (local, global or new-allocated)</font>
00038 <font class="comment">        +----------------------------+</font>
00039 <font class="comment">        | class, function or program |</font>
00040 <font class="comment">        +----------------------------+</font>
00041 <font class="comment"></font>
00042 <font class="comment">*/</font>
00043 
00044 <font class="comment">// a - Protected Linked List class and its Root class, add these</font>
00045 <font class="comment">//     above the class header</font>
00046 
00047 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt; <font class="keyword">class </font><a class="code" href="classPLLRoot.html">PLLRoot</a>;
00048 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00049 <font class="comment">// &lt;A NAME="PLLHandle"&gt;&lt;/A&gt;</font>
00050 <font class="keyword">class </font><a class="code" href="classPLLHandle.html">PLLHandle</a> { 
00051         <font class="keyword">friend</font> <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a>;
00052         <font class="comment">//template&lt;class PLLType&gt; friend PLLRoot; </font>
00053         <font class="keyword">protected</font>: 
<a name="l00054"></a><a class="code" href="classPLLHandle.html#n10">00054</a>                 <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> * <a class="code" href="classPLLHandle.html#n0">pllroot</a>; 
<a name="l00055"></a><a class="code" href="classPLLHandle.html#n12">00055</a>                 <a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a> * <a class="code" href="classPLLHandle.html#n1">pllnext</a>, * <a class="code" href="classPLLHandle.html#n2">pllprev</a>; 
<a name="l00056"></a><a class="code" href="classPLLHandle.html#b7">00056</a>                 <a class="code" href="classPLLHandle.html#b0">PLLHandle</a>(): pllroot(NULL), pllnext(NULL), pllprev(NULL) {} 
<a name="l00057"></a><a class="code" href="classPLLHandle.html#b8">00057</a>                 <font class="keyword">virtual</font> <a class="code" href="classPLLHandle.html#b1">~PLLHandle</a>() { <font class="keyword">delete</font> pllnext; } <font class="comment">// virtual destructor calls actual complete most-derived object's destructor first</font>
00058         <font class="keyword">public</font>: 
<a name="l00059"></a><a class="code" href="classPLLHandle.html#a39">00059</a>                 <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> * <a class="code" href="classPLLHandle.html#a0">Root</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> pllroot; } 
<a name="l00060"></a><a class="code" href="classPLLHandle.html#a40">00060</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a1">Next</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(pllnext); } 
<a name="l00061"></a><a class="code" href="classPLLHandle.html#a41">00061</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a2">Prev</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(pllprev); } 
<a name="l00062"></a><a class="code" href="classPLLHandle.html#a42">00062</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a3">head</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> pllroot-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>(); } 
<a name="l00063"></a><a class="code" href="classPLLHandle.html#a43">00063</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a4">tail</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> pllroot-&gt;<a class="code" href="classPLLRoot.html#a3">tail</a>(); } 
00064                 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a5">el</a>(<font class="keywordtype">int</font> n) <font class="keyword">const</font>; 
00065 <font class="comment">/* *** Perhaps change below to inline PLLHandle&lt;PLLType&gt; *: */</font>
00066                 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a6">seek_head</a>() <font class="keyword">const</font>; 
00067                 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a7">seek_tail</a>() <font class="keyword">const</font>; 
00068                 <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classPLLHandle.html#a8">length</a>() <font class="keyword">const</font>; 
00069                 <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classPLLHandle.html#a9">fulllength</a>() <font class="keyword">const</font>; 
00070                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLHandle.html#a10">unlink_before</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> &amp; <a class="code" href="templates_8defines_8hh.html#a13">succ</a>); 
00071                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLHandle.html#a11">unlink_after</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> &amp; <a class="code" href="templates_8defines_8hh.html#a12">pred</a>); 
00072                 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLHandle.html#a12">remove</a>(); 
00073 };
00074 
00075 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00076 <font class="keyword">class </font><a class="code" href="classPLLRoot.html">PLLRoot</a> { 
00077         <font class="keyword">friend</font> <a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a>; 
00078         <font class="comment">//template&lt;class PLLType&gt; friend PLLHandle; </font>
00079         <font class="keyword">protected</font>: 
<a name="l00080"></a><a class="code" href="classPLLRoot.html#n6">00080</a>                 <a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a> * <a class="code" href="classPLLRoot.html#n0">pllhead</a>; 
<a name="l00081"></a><a class="code" href="classPLLRoot.html#n7">00081</a>                 <a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a> * <a class="code" href="classPLLRoot.html#n1">plltail</a>; 
00082                 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLRoot.html#b0">set_root</a>(<a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a> * h); 
00083         <font class="keyword">public</font>: 
<a name="l00084"></a><a class="code" href="classPLLRoot.html#a51">00084</a>                 <a class="code" href="classPLLRoot.html#a0">~PLLRoot</a>() { <font class="keyword">delete</font> pllhead; } <font class="comment">// *** perhaps also make this virtual, but delete is not usually called on a PLLRoot&lt;PLLType&gt; object</font>
<a name="l00085"></a><a class="code" href="classPLLRoot.html#a52">00085</a>                 <a class="code" href="classPLLRoot.html#a1">PLLRoot</a>(): pllhead(NULL), plltail(NULL) {} 
<a name="l00086"></a><a class="code" href="classPLLRoot.html#a53">00086</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLRoot.html#a2">head</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(pllhead); } 
<a name="l00087"></a><a class="code" href="classPLLRoot.html#a54">00087</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLRoot.html#a3">tail</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(plltail); } 
<a name="l00088"></a><a class="code" href="classPLLRoot.html#a55">00088</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLRoot.html#a4">el</a>(<font class="keywordtype">int</font> n)<font class="keyword"> const </font>{ <font class="keywordflow">if</font> (pllhead) <font class="keywordflow">return</font> pllhead-&gt;<a class="code" href="classPLLHandle.html#a5">el</a>(n); <font class="keywordflow">return</font> NULL; } 
<a name="l00089"></a><a class="code" href="classPLLRoot.html#a56">00089</a>                 <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLRoot.html#a5">operator[]</a>(<font class="keywordtype">int</font> n)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a4">el</a>(n); } 
<a name="l00090"></a><a class="code" href="classPLLRoot.html#a57">00090</a>                 <font class="keywordtype">int</font> <a class="code" href="classPLLRoot.html#a6">length</a>()<font class="keyword"> const </font>{ <font class="keywordflow">if</font> (pllhead) <font class="keywordflow">return</font> pllhead-&gt;<a class="code" href="classPLLHandle.html#a8">length</a>(); <font class="keywordflow">return</font> 0; } 
00091                 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLRoot.html#a7">update</a>(); 
00092                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a8">link_before</a>(<a class="code" href="classPLLRoot.html">PLLRoot</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>); 
00093                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a8">link_before</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>); 
00094                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a10">link_after</a>(<a class="code" href="classPLLRoot.html">PLLRoot</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>); 
00095                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a10">link_after</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>); 
00096                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a12">insert_after</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>, <a class="code" href="classPLLType.html">PLLType</a> * inshead); 
00097                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a12">insert_after</a>(<font class="keywordtype">int</font> n, <a class="code" href="classPLLType.html">PLLType</a> * inshead); 
00098                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a14">insert_before</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>, <a class="code" href="classPLLType.html">PLLType</a> * inshead); 
00099                 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a14">insert_before</a>(<font class="keywordtype">int</font> n, <a class="code" href="classPLLType.html">PLLType</a> * inshead);
00100                 <font class="comment">// *** if the clear() function is for some reason too</font>
00101                 <font class="comment">//     drastic, it can be rewritten as follows to require</font>
00102                 <font class="comment">//     subsequent manual deletion:</font>
00103                 <font class="comment">// PLLRoot&lt;PLLType&gt; * clear() { PLLRoot&lt;PLLType&gt; * clearroot = new PLLRoot&lt;PLLType&gt;; if (pllhead) pllhead-&gt;unlink_before(clearroot); return clearroot; }</font>
<a name="l00104"></a><a class="code" href="classPLLRoot.html#a67">00104</a>                 <font class="keywordtype">void</font> <a class="code" href="classPLLRoot.html#a16">clear</a>() { <font class="keyword">delete</font> pllhead; pllhead = NULL; plltail = NULL; }
00105 };
00106 
00107 <font class="comment">// b - Protected Linked List inheritance, add this into the list</font>
00108 <font class="comment">//     of inherited classes: public PLLHandle&lt;PLLType&gt;</font>
00109 
00110 <font class="comment">// c - Protected Linked List inline functions</font>
00111 <font class="comment">//     Note that the static_cast&lt;&gt;()s used below are safe, since</font>
00112 <font class="comment">//     it is assured through the creation mechanisms of PLLHandle&lt;PLLType&gt;</font>
00113 <font class="comment">//     and PLLRoot&lt;PLLType&gt; that all elements are of the derived class</font>
00114 <font class="comment">//     PLLType with base PLLHandle&lt;PLLType&gt;. Also see corresponding</font>
00115 <font class="comment">//     &lt;A HREF="../../nnmodels/nnmodels.html"&gt;notes&lt;/A&gt;.</font>
00116 
00117 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00118 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLHandle.html#a10">PLLHandle&lt;PLLType&gt;::unlink_before</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> &amp; <a class="code" href="templates_8defines_8hh.html#a13">succ</a>) { 
00119 <font class="comment">// unlinks before this and gives this and after</font>
00120 <font class="comment">// the new root succ</font>
00121 <font class="comment">// succ is currently required to be an empty list</font>
00122         <font class="keywordflow">if</font> (succ.<a class="code" href="classPLLRoot.html#a2">head</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00123         <font class="keywordflow">if</font> (pllprev) <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>-&gt;pllnext = NULL; 
00124         succ.<a class="code" href="classPLLRoot.html#n0">pllhead</a> = <font class="keyword">this</font>; 
00125         <font class="keywordflow">if</font> (pllroot) { 
00126                 succ.<a class="code" href="classPLLRoot.html#n1">plltail</a> = pllroot-&gt;tail(); 
00127                 pllroot-&gt;plltail = <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>; 
00128                 <font class="keywordflow">if</font> (!<a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>) pllroot-&gt;pllhead = NULL; 
00129         } <font class="keywordflow">else</font> succ.<a class="code" href="classPLLRoot.html#n1">plltail</a> = seek_tail(); 
00130         <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a> = NULL; 
00131         succ.<a class="code" href="classPLLRoot.html#b0">set_root</a>(<font class="keyword">this</font>); 
00132         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00133 } 
00134 
00135 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00136 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLHandle.html#a11">PLLHandle&lt;PLLType&gt;::unlink_after</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> &amp; <a class="code" href="templates_8defines_8hh.html#a12">pred</a>) { 
00137 <font class="comment">// unlinks after this and gives this and before</font>
00138 <font class="comment">// the new root pred</font>
00139 <font class="comment">// pred is currently required to be an empty list</font>
00140         <font class="keywordflow">if</font> (pred.<a class="code" href="classPLLRoot.html#a2">head</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00141         <font class="keywordflow">if</font> (pllnext) <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>-&gt;pllprev = NULL; 
00142         pred.<a class="code" href="classPLLRoot.html#n1">plltail</a> = <font class="keyword">this</font>; 
00143         <font class="keywordflow">if</font> (pllroot) { 
00144                 pred.<a class="code" href="classPLLRoot.html#n0">pllhead</a> = pllroot-&gt;head(); 
00145                 pllroot-&gt;pllhead = <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>; 
00146                 <font class="keywordflow">if</font> (!<a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>) pllroot-&gt;plltail = NULL; 
00147         } <font class="keywordflow">else</font> pred.<a class="code" href="classPLLRoot.html#n0">pllhead</a> = seek_head(); 
00148         <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a> = NULL; 
00149         pred.<a class="code" href="classPLLRoot.html#b0">set_root</a>(pred.<a class="code" href="classPLLRoot.html#a2">head</a>()); 
00150         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00151 } 
00152 
00153 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00154 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLHandle.html#a12">PLLHandle&lt;PLLType&gt;::remove</a>() { 
00155 <font class="comment">// unlink and delete Protected Linked List element</font>
00156 <font class="comment">// and update head and tail</font>
00157         <font class="keywordflow">if</font> (!pllroot) { 
00158                 <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>-&gt;pllnext = <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>; 
00159                 <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>-&gt;pllprev = <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>; 
00160                 <a class="code" href="classPLLType.html">PLLType</a> * pn = static_cast&lt;PLLType *&gt;(pllnext); 
00161                 <font class="keyword">delete</font> <font class="keyword">this</font>;
00162                 <font class="keywordflow">return</font>;
00163         } 
00164         <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> * h = pllroot, r, t; 
00165         <a class="code" href="templates_8defines_8hh.html#a19">unlink_before</a>(t); 
00166         <a class="code" href="templates_8defines_8hh.html#a24">unlink_after</a>(r); 
00167         h-&gt;<a class="code" href="classPLLRoot.html#a8">link_before</a>(&amp;t); <font class="comment">// deletion occurs as r and t are destroyed</font>
00168 } 
00169 
00170 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00171 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a5">PLLHandle&lt;PLLType&gt;::el</a>(<font class="keywordtype">int</font> n)<font class="keyword"> const </font>{ 
00172         <font class="keywordflow">if</font> (!n) <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(this); 
00173         <font class="keywordflow">if</font> (n&gt;0) { 
00174                 <font class="keywordflow">if</font> (pllnext) <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>-&gt;el(n-1); 
00175                 <font class="keywordflow">else</font> <font class="keywordflow">return</font> NULL; 
00176         } <font class="keywordflow">else</font> { 
00177                 <font class="keywordflow">if</font> (pllprev) <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>-&gt;el(n+1); 
00178                 <font class="keywordflow">else</font> <font class="keywordflow">return</font> NULL; 
00179         } 
00180 } 
00181 
00182 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00183 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a6">PLLHandle&lt;PLLType&gt;::seek_head</a>()<font class="keyword"> const </font>{ 
00184         <font class="keywordflow">if</font> (!<a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>) <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(this); 
00185         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a8">pllprev</a>-&gt;seek_head(); 
00186 } 
00187 
00188 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00189 <font class="keyword">inline</font> <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="classPLLHandle.html#a7">PLLHandle&lt;PLLType&gt;::seek_tail</a>()<font class="keyword"> const </font>{ 
00190         <font class="keywordflow">if</font> (!<a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>) <font class="keywordflow">return</font> static_cast&lt;PLLType *&gt;(this); 
00191         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a10">pllnext</a>-&gt;seek_tail(); 
00192 } 
00193 
00194 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00195 <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classPLLHandle.html#a8">PLLHandle&lt;PLLType&gt;::length</a>()<font class="keyword"> const </font>{ 
00196         <font class="keywordflow">if</font> (Next()) <font class="keywordflow">return</font> 1 + Next()-&gt;length(); 
00197         <font class="keywordflow">return</font> 1; 
00198 } 
00199 
00200 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00201 <font class="keyword">inline</font> <font class="keywordtype">int</font> <a class="code" href="classPLLHandle.html#a9">PLLHandle&lt;PLLType&gt;::fulllength</a>()<font class="keyword"> const </font>{ 
00202         <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classPLLType.html#a8">length</a>(); 
00203 } 
00204 
00205 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00206 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLRoot.html#b0">PLLRoot&lt;PLLType&gt;::set_root</a>(<a class="code" href="classPLLHandle.html">PLLHandle&lt;PLLType&gt;</a> * h) { 
00207         <font class="keywordflow">for</font> (; (h); h = h-&gt;<a class="code" href="classPLLHandle.html#a1">Next</a>()) h-&gt;<a class="code" href="classPLLHandle.html#n0">pllroot</a> = <font class="keyword">this</font>; 
00208 } 
00209 
00210 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00211 <font class="keyword">inline</font> <font class="keywordtype">void</font> <a class="code" href="classPLLRoot.html#a7">PLLRoot&lt;PLLType&gt;::update</a>() { 
00212 <font class="comment">// clears head and tail if elements were linked to another root</font>
00213 <font class="comment">// or fixes head and tail if either one pointed to an element with</font>
00214 <font class="comment">// a different root</font>
00215         <font class="keywordflow">if</font> (pllhead) <font class="keywordflow">if</font> (<a class="code" href="classPLLRoot.html#n0">pllhead</a>-&gt;Root()!=<font class="keyword">this</font>) <a class="code" href="classPLLRoot.html#n0">pllhead</a> = NULL; 
00216         <font class="keywordflow">if</font> (plltail) { 
00217                 <font class="keywordflow">if</font> (<a class="code" href="classPLLRoot.html#n1">plltail</a>-&gt;Root()!=<font class="keyword">this</font>) { 
00218                         <font class="keywordflow">if</font> (!<a class="code" href="classPLLRoot.html#n0">pllhead</a>) <a class="code" href="classPLLRoot.html#n1">plltail</a> = NULL; 
00219                         <font class="keywordflow">else</font> <a class="code" href="classPLLRoot.html#n1">plltail</a> = <a class="code" href="classPLLRoot.html#n0">pllhead</a>-&gt;seek_tail(); 
00220                 } <font class="keywordflow">else</font> { 
00221                         <font class="keywordflow">if</font> (!<a class="code" href="classPLLRoot.html#n0">pllhead</a>) <a class="code" href="classPLLRoot.html#n0">pllhead</a> = <a class="code" href="classPLLRoot.html#n1">plltail</a>-&gt;seek_head(); 
00222                 } 
00223         } 
00224 } 
00225 
00226 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00227 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a8">PLLRoot&lt;PLLType&gt;::link_before</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>) { 
00228         <font class="keywordflow">if</font> (!succ) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00229         <font class="keywordflow">if</font> (!succ-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00230         <font class="comment">// *** could call update() here first to insure that pllhead and plltail</font>
00231         <font class="comment">//     are correct</font>
00232         <font class="keywordflow">if</font> (plltail) { 
00233                 <a class="code" href="classPLLRoot.html#n1">plltail</a>-&gt;pllnext = succ-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>(); 
00234                 succ-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classPLLType.html#n1">pllprev</a> = <a class="code" href="classPLLRoot.html#n1">plltail</a>; 
00235         } <font class="keywordflow">else</font> <a class="code" href="classPLLRoot.html#n0">pllhead</a> = succ-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>(); 
00236         <a class="code" href="classPLLRoot.html#n1">plltail</a> = succ-&gt;<a class="code" href="classPLLRoot.html#a3">tail</a>(); 
00237         <a class="code" href="classPLLRoot.html#b0">set_root</a>(succ-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>()); 
00238         succ-&gt;<a class="code" href="classPLLRoot.html#a7">update</a>(); 
00239         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00240 } 
00241 
00242 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00243 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a8">PLLRoot&lt;PLLType&gt;::link_before</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>) { 
00244 <font class="comment">// when succ-&gt;Root()==NULL, this allows previously</font>
00245 <font class="comment">// unprotected lists or newly created PLLType elements</font>
00246 <font class="comment">// to be linked</font>
00247         <font class="keywordflow">if</font> (!succ) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00248         <font class="keywordflow">if</font> (succ-&gt;Root()) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a8">link_before</a>(succ-&gt;Root()); 
00249         <font class="keywordflow">if</font> (plltail) { 
00250                 <a class="code" href="classPLLRoot.html#n1">plltail</a>-&gt;pllnext = succ;
00251                 succ-&gt;<a class="code" href="classPLLType.html#n1">pllprev</a> = <a class="code" href="classPLLRoot.html#n1">plltail</a>; 
00252         } <font class="keywordflow">else</font> <a class="code" href="classPLLRoot.html#n0">pllhead</a> = succ; 
00253         <a class="code" href="classPLLRoot.html#n1">plltail</a> = succ; <font class="comment">// *** this may need to be succ-&gt;seek_tail(), unless lists without root cannot exist</font>
00254         <a class="code" href="classPLLRoot.html#b0">set_root</a>(succ); 
00255         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00256 } 
00257 
00258 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00259 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a10">PLLRoot&lt;PLLType&gt;::link_after</a>(<a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>) { 
00260         <font class="keywordflow">if</font> (!pred) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00261         <font class="keywordflow">if</font> (!pred-&gt;<a class="code" href="classPLLRoot.html#a3">tail</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00262         <font class="comment">// *** could call update() here first to insure that pllhead and plltail</font>
00263         <font class="comment">//     are correct</font>
00264         <font class="keywordflow">if</font> (pllhead) { 
00265                 <a class="code" href="classPLLRoot.html#n0">pllhead</a>-&gt;pllprev = pred-&gt;<a class="code" href="classPLLRoot.html#a3">tail</a>(); 
00266                 pred-&gt;<a class="code" href="classPLLRoot.html#a3">tail</a>()-&gt;<a class="code" href="classPLLType.html#n0">pllnext</a> = <a class="code" href="classPLLRoot.html#n0">pllhead</a>; 
00267         } <font class="keywordflow">else</font> <a class="code" href="classPLLRoot.html#n1">plltail</a> = pred-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>(); 
00268         <a class="code" href="classPLLRoot.html#n0">pllhead</a> = pred-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>(); 
00269         <a class="code" href="classPLLRoot.html#b0">set_root</a>(pred-&gt;<a class="code" href="classPLLRoot.html#a2">head</a>()); 
00270         pred-&gt;<a class="code" href="classPLLRoot.html#a7">update</a>(); 
00271         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00272 }
00273 
00274 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00275 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a10">PLLRoot&lt;PLLType&gt;::link_after</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>) { 
00276 <font class="comment">// when succ-&gt;Root()==NULL, this allows previously</font>
00277 <font class="comment">// unprotected lists or newly created PLLType elements</font>
00278 <font class="comment">// to be linked</font>
00279         <font class="keywordflow">if</font> (!pred) <font class="keywordflow">return</font> <font class="keyword">false</font>; 
00280         <font class="keywordflow">if</font> (pred-&gt;Root()) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a10">link_after</a>(pred-&gt;Root()); 
00281         <font class="keywordflow">if</font> (pllhead) { 
00282                 <a class="code" href="classPLLRoot.html#n0">pllhead</a>-&gt;pllprev = pred; 
00283                 pred-&gt;<a class="code" href="classPLLType.html#n0">pllnext</a> = <a class="code" href="classPLLRoot.html#n0">pllhead</a>; 
00284         } <font class="keywordflow">else</font> <a class="code" href="classPLLRoot.html#n1">plltail</a> = pred; 
00285         <a class="code" href="classPLLRoot.html#n0">pllhead</a> = pred;  <font class="comment">// *** this may need to be pred-&gt;seek_head(), unless lists without root cannot exist</font>
00286         <a class="code" href="classPLLRoot.html#b0">set_root</a>(pred); 
00287         <font class="keywordflow">return</font> <font class="keyword">true</font>; 
00288 }
00289 
00290 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00291 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a12">PLLRoot&lt;PLLType&gt;::insert_after</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a>, <a class="code" href="classPLLType.html">PLLType</a> * inshead) {
00292 <font class="comment">// inserts inshead after element pred in this list</font>
00293 <font class="comment">// if pred==NULL or pred-&gt;Root()!=this, inserts at tail of list</font>
00294         <font class="keywordflow">if</font> (!pred) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a8">link_before</a>(inshead); <font class="comment">// link inshead to tail of this</font>
00295         <font class="keywordflow">if</font> (pred-&gt;Root()!=<font class="keyword">this</font>) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a8">link_before</a>(inshead); <font class="comment">// link inshead to tail of this</font>
00296         <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> h;
00297         pred-&gt;<a class="code" href="classPLLType.html#a11">unlink_after</a>(h); <font class="comment">// get head of list up to pred into h</font>
00298         <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = h.<a class="code" href="classPLLRoot.html#a8">link_before</a>(inshead); <font class="comment">// link inshead to tail of h</font>
00299         <a class="code" href="classPLLRoot.html#a10">link_after</a>(&amp;h); <font class="comment">// link h to head of this</font>
00300         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
00301 } 
00302 
00303 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00304 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a12">PLLRoot&lt;PLLType&gt;::insert_after</a>(<font class="keywordtype">int</font> n, <a class="code" href="classPLLType.html">PLLType</a> * inshead) {
00305 <font class="comment">// inserts inshead after the nth element in this list</font>
00306 <font class="comment">// if nth element does not exist, inserts at tail of list</font>
00307         <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a12">pred</a> = <a class="code" href="classPLLRoot.html#a4">el</a>(n);
00308         <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a12">insert_after</a>(pred,inshead);
00309 } 
00310 
00311 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00312 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a14">PLLRoot&lt;PLLType&gt;::insert_before</a>(<a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a>, <a class="code" href="classPLLType.html">PLLType</a> * inshead) {
00313 <font class="comment">// inserts inshead before element succ in this list</font>
00314 <font class="comment">// if succ==NULL or succ-&gt;Root()!=this, inserts at head of list</font>
00315         <font class="keywordflow">if</font> (!succ) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a10">link_after</a>(inshead); <font class="comment">// link inshead to head of this</font>
00316         <font class="keywordflow">if</font> (succ-&gt;Root()!=<font class="keyword">this</font>) <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a10">link_after</a>(inshead); <font class="comment">// link inshead to head of this</font>
00317         <a class="code" href="classPLLRoot.html">PLLRoot&lt;PLLType&gt;</a> t;
00318         succ-&gt;<a class="code" href="classPLLType.html#a10">unlink_before</a>(t); <font class="comment">// get tail of list from succ into t</font>
00319         <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = t.<a class="code" href="classPLLRoot.html#a10">link_after</a>(inshead); <font class="comment">// link inshead to head of t</font>
00320         <a class="code" href="classPLLRoot.html#a8">link_before</a>(&amp;t); <font class="comment">// link t to tail of this</font>
00321         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
00322 } 
00323 
00324 <font class="keyword">template</font> &lt;<font class="keyword">class</font> PLLType&gt;
00325 <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="classPLLRoot.html#a14">PLLRoot&lt;PLLType&gt;::insert_before</a>(<font class="keywordtype">int</font> n, <a class="code" href="classPLLType.html">PLLType</a> * inshead) {
00326 <font class="comment">// inserts inshead before the nth element in this list</font>
00327 <font class="comment">// if nth element does not exist, inserts at head of list</font>
00328         <a class="code" href="classPLLType.html">PLLType</a> * <a class="code" href="templates_8defines_8hh.html#a13">succ</a> = <a class="code" href="classPLLRoot.html#a4">el</a>(n);
00329         <font class="keywordflow">return</font> <a class="code" href="classPLLRoot.html#a14">insert_before</a>(succ,inshead);
00330 } 
00331 
00332 <font class="comment">// d - Protected Linked List macro that can be used to</font>
00333 <font class="comment">//     access functions in linked elements at a relative</font>
00334 <font class="comment">//     distance n from an element</font>
<a name="l00335"></a><a class="code" href="templates_8unfixed_8hh.html#a0">00335</a> <font class="preprocessor">#define Protected_Linked_List_Indexed_Access(PLLType,Here,There) \</font>
00336 <font class="preprocessor">        if (!n) return Here; \</font>
00337 <font class="preprocessor">        if (PLLType * e = el(n)) return e-&gt;There; else return NULL \</font>
00338 <font class="preprocessor"></font>
00339 <font class="preprocessor"></font><font class="comment">// e - Protected Linked List macro that loops forward through</font>
00340 <font class="comment">//     linked elements contingent upon a test, providing the</font>
00341 <font class="comment">//     pointer e to the current element</font>
<a name="l00342"></a><a class="code" href="templates_8unfixed_8hh.html#a1">00342</a> <font class="preprocessor">#define PLL_LOOP_FORWARD(PLLType,Init_El,Extra_Test) \</font>
00343 <font class="preprocessor">        for (PLLType * e = Init_El; ((e) &amp;&amp; (Extra_Test)); e = e-&gt;Next())</font>
00344 <font class="preprocessor"></font>
00345 <font class="comment">// f - Protected Linked List macro that loops forward through</font>
00346 <font class="comment">//     linked elements contingent upon a test, providing the</font>
00347 <font class="comment">//     pointer to the current element in a specified variable</font>
00348 <font class="comment">//     to enable nesting of PLL_LOOP_FORWARD_NESTED calls</font>
<a name="l00349"></a><a class="code" href="templates_8unfixed_8hh.html#a2">00349</a> <font class="preprocessor">#define PLL_LOOP_FORWARD_NESTED(PLLType,Init_El,Extra_Test,RefVar) \</font>
00350 <font class="preprocessor">        for (PLLType * RefVar = Init_El; ((RefVar) &amp;&amp; (Extra_Test)); RefVar = RefVar-&gt;Next())</font>
00351 <font class="preprocessor"></font>
00352 <font class="preprocessor">#endif</font>
</pre></div><hr><address align="right"><small>Generated on Mon Sep 13 14:53:11 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
