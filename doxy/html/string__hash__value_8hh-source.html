<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>string_hash_value.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>string_hash_value.hh</h1><a href="string__hash__value_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/* This was originally intended to work together with the Quick_String_Hash</font>
00002 <font class="comment">   class defined in ~/src/dil2al/dil2al.hh, but would require some more</font>
00003 <font class="comment">   virtualization at that end.</font>
00004 <font class="comment">*/</font>
00005 
00006 <font class="preprocessor">#ifndef CONST_QUICK_STRING_HASH_ENDNODE</font>
<a name="l00007"></a><a class="code" href="classString__Hash__Value.html">00007</a> <font class="preprocessor"></font><font class="keyword">class </font><a class="code" href="classString__Hash__Value.html">String_Hash_Value</a>: <font class="keyword">public</font> <a class="code" href="classQuick__String__Hash.html">Quick_String_Hash</a> {
00008         <font class="comment">// Stores a value with every hashed string</font>
00009         <font class="keyword">protected</font>:
<a name="l00010"></a><a class="code" href="classString__Hash__Value.html#n0">00010</a>                 <font class="keywordtype">int</font> <a class="code" href="classString__Hash__Value.html#n0">val</a>;
00011         <font class="keyword">public</font>:
00012                 <font class="comment">// constructor</font>
<a name="l00013"></a><a class="code" href="classString__Hash__Value.html#a0">00013</a>                 <a class="code" href="classString__Hash__Value.html#a0">String_Hash_Value</a>(): <a class="code" href="classQuick__String__Hash.html">Quick_String_Hash</a>(), <a class="code" href="classString__Hash__Value.html#n0">val</a>(0) {}
00014                 <font class="comment">// functions</font>
00015                 <a class="code" href="classString__Hash__Value.html">String_Hash_Value</a> &amp; <a class="code" href="classString__Hash__Value.html#a1">insert_value</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *s, <font class="keywordtype">int</font> v);
00016                 <font class="keywordtype">int</font> <a class="code" href="classString__Hash__Value.html#a2">read_value</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> * s) <font class="keyword">const</font>;
00017 };
00018 <font class="preprocessor">#endif</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#ifndef CONST_QUICK_STRING_HASH_ENDNODE</font>
<a name="l00021"></a><a class="code" href="classString__Hash__Value.html#a1">00021</a> <font class="preprocessor"></font><a class="code" href="classString__Hash__Value.html">String_Hash_Value</a> &amp; <a class="code" href="classString__Hash__Value.html#a1">String_Hash_Value::insert_value</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> * s, <font class="keywordtype">int</font> v) {
00022         <font class="keywordflow">if</font> (s[0]==<font class="charliteral">'\0'</font>) {
00023                 <a class="code" href="classString__Hash__Value.html#n0">val</a> = v;
00024                 <font class="keywordflow">return</font> (*this);
00025         }
00026         <font class="keywordtype">int</font> i = ((int) s[0]);   <font class="comment">// implied list coordinate</font>
00027         <font class="keywordtype">int</font> r = i - <a class="code" href="classQuick__String__Hash.html#n1">offset</a>;             <font class="comment">// real list coordinate</font>
00028         <font class="keywordflow">if</font> (r&lt;0) {
00029                 <font class="keywordflow">if</font> (<a class="code" href="classQuick__String__Hash.html#b0">add_list_element</a>(i)==NULL) <font class="keywordflow">return</font> (*this);
00030                 r = i - <a class="code" href="classQuick__String__Hash.html#n1">offset</a>; <font class="comment">// adjust to new offset</font>
00031         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (r&gt;=<a class="code" href="classQuick__String__Hash.html#n2">len</a>) {
00032                 <font class="keywordflow">if</font> (<a class="code" href="classQuick__String__Hash.html#b0">add_list_element</a>(i)==NULL) <font class="keywordflow">return</font> (*this); <font class="comment">// this also takes care of the case where the list is unallocated</font>
00033                 r = i - <a class="code" href="classQuick__String__Hash.html#n1">offset</a>; <font class="comment">// adjust to new offset</font>
00034         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (!<a class="code" href="classQuick__String__Hash.html#n0">list</a>[r]) {
00035                 <font class="keywordflow">if</font> (<a class="code" href="classQuick__String__Hash.html#b0">add_list_element</a>(i)==NULL) <font class="keywordflow">return</font> (*this);
00036         }
00037         <a class="code" href="classQuick__String__Hash.html#n0">list</a>[r]-&gt;<a class="code" href="classQuick__String__Hash.html#a2">insert</a>(&amp;s[1]);
00038         <font class="keywordflow">return</font> (*this);
00039 }
00040 
<a name="l00041"></a><a class="code" href="classString__Hash__Value.html#a2">00041</a> <font class="keywordtype">int</font> <a class="code" href="classString__Hash__Value.html#a2">String_Hash_Value::read_value</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> * s)<font class="keyword"> const </font>{
00042         <font class="keywordtype">int</font> i; <font class="keyword">const</font> <a class="code" href="classString__Hash__Value.html">String_Hash_Value</a> * qsh = <font class="keyword">this</font>;
00043         <font class="keywordflow">for</font> (<font class="keyword">const</font> <font class="keywordtype">char</font> * c = s; (*c!=<font class="charliteral">'\0'</font>); c++) {
00044                 i = ((int) *c); <font class="comment">// implied list coordinate</font>
00045                 <font class="keywordflow">if</font> (i&lt;qsh-&gt;<a class="code" href="classQuick__String__Hash.html#n1">offset</a>) <font class="keywordflow">return</font> 0;
00046                 i -= qsh-&gt;<a class="code" href="classQuick__String__Hash.html#n1">offset</a>;       <font class="comment">// real list coordinate</font>
00047                 <font class="keywordflow">if</font> (i&gt;=qsh-&gt;<a class="code" href="classQuick__String__Hash.html#n2">len</a>) <font class="keywordflow">return</font> 0; <font class="comment">// this also takes care of the case where the list is unallocated</font>
00048                 <font class="keywordflow">if</font> (!qsh-&gt;<a class="code" href="classQuick__String__Hash.html#n0">list</a>[i]) <font class="keywordflow">return</font> 0;
00049                 qsh = qsh-&gt;<a class="code" href="classQuick__String__Hash.html#n0">list</a>[i];     <font class="comment">// traverse tree</font>
00050         }
00051         <font class="keywordflow">return</font> qsh-&gt;<a class="code" href="classString__Hash__Value.html#n0">val</a>;
00052 }
00053 <font class="preprocessor">#endif</font>
00054 <font class="preprocessor"></font>
</pre></div><hr><address align="right"><small>Generated on Mon Sep 13 14:53:10 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
