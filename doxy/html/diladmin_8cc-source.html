<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>diladmin.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>diladmin.cc</h1><a href="diladmin_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// diladmin.cc</font>
00002 <font class="comment">// Randal A. Koene, 20000304</font>
00003 
00004 <font class="preprocessor">#include "<a class="code" href="dil2al_8hh.html">dil2al.hh</a>"</font>
00005 
00006 <font class="comment">//#define DEBUGTIER1</font>
00007 <font class="comment">//#define DEBUGTIER2</font>
00008 <font class="comment">//#define DEBUG_HIERARCHY_EXPRESSIONS</font>
00009 <font class="comment">//#define DEBUG_PLAN_ENTRY</font>
00010 
00011 <font class="comment">// Topical_DIL_Files Class member files (see dil2al.hh)</font>
00012 
<a name="l00013"></a><a class="code" href="classTopical__DIL__Files.html#b0">00013</a> <font class="keywordtype">void</font> <a class="code" href="classTopical__DIL__Files.html#b0">Topical_DIL_Files::Set_File</a>(<a class="code" href="classString.html">String</a> file, <font class="keywordtype">int</font> n = 0) {
00014         <font class="keywordflow">if</font> (!n) { <a class="code" href="classTopical__DIL__Files.html#n0">ft</a>.<a class="code" href="structfiletitle__t.html#m0">file</a> = file; <a class="code" href="classTopical__DIL__Files.html#n1">updated</a>=<font class="keyword">true</font>; <font class="keywordflow">return</font>; }
00015         <font class="keywordflow">if</font> (n&gt;0) {
00016                 <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a1">Next</a>()) <a class="code" href="classPLLHandle.html#a1">Next</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b0">Set_File</a>(file,n-1);
00017                 <font class="keywordflow">else</font> {
00018                         <a class="code" href="classTopical__DIL__Files.html">Topical_DIL_Files</a> * tdf = <font class="keyword">new</font> <a class="code" href="classTopical__DIL__Files.html#a0">Topical_DIL_Files</a>();
00019                         <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a0">Root</a>()-&gt;<a class="code" href="classPLLRoot.html#a8">link_before</a>(tdf)) <a class="code" href="classPLLHandle.html#a1">Next</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b0">Set_File</a>(file,n-1);
00020                 }
00021         } <font class="keywordflow">else</font> {
00022                 <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a2">Prev</a>()) <a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b0">Set_File</a>(file,n+1);
00023                 <font class="keywordflow">else</font> {
00024                         <a class="code" href="classTopical__DIL__Files.html">Topical_DIL_Files</a> * tdf = <font class="keyword">new</font> <a class="code" href="classTopical__DIL__Files.html#a0">Topical_DIL_Files</a>();
00025                         <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a0">Root</a>()-&gt;<a class="code" href="classPLLRoot.html#a10">link_after</a>(tdf)) <a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b0">Set_File</a>(file,n+1);
00026                 }
00027         }
00028 }
00029 
<a name="l00030"></a><a class="code" href="classTopical__DIL__Files.html#b1">00030</a> <font class="keywordtype">void</font> <a class="code" href="classTopical__DIL__Files.html#b1">Topical_DIL_Files::Set_Title</a>(<a class="code" href="classString.html">String</a> title, <font class="keywordtype">int</font> n = 0) {
00031         <font class="keywordflow">if</font> (!n) { <a class="code" href="classTopical__DIL__Files.html#n0">ft</a>.<a class="code" href="structfiletitle__t.html#m1">title</a> = title; <a class="code" href="classTopical__DIL__Files.html#n1">updated</a>=<font class="keyword">true</font>; <font class="keywordflow">return</font>; }
00032         <font class="keywordflow">if</font> (n&gt;0) {
00033                 <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a1">Next</a>()) <a class="code" href="classPLLHandle.html#a1">Next</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b1">Set_Title</a>(title,n-1);
00034                 <font class="keywordflow">else</font> {
00035                         <a class="code" href="classTopical__DIL__Files.html">Topical_DIL_Files</a> * tdf = <font class="keyword">new</font> <a class="code" href="classTopical__DIL__Files.html#a0">Topical_DIL_Files</a>();
00036                         <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a0">Root</a>()-&gt;<a class="code" href="classPLLRoot.html#a8">link_before</a>(tdf)) <a class="code" href="classPLLHandle.html#a1">Next</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b1">Set_Title</a>(title,n-1);
00037                 }
00038         } <font class="keywordflow">else</font> {
00039                 <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a2">Prev</a>()) <a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b1">Set_Title</a>(title,n+1);
00040                 <font class="keywordflow">else</font> {
00041                         <a class="code" href="classTopical__DIL__Files.html">Topical_DIL_Files</a> * tdf = <font class="keyword">new</font> <a class="code" href="classTopical__DIL__Files.html#a0">Topical_DIL_Files</a>();
00042                         <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a0">Root</a>()-&gt;<a class="code" href="classPLLRoot.html#a10">link_after</a>(tdf)) <a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#b1">Set_Title</a>(title,n+1);
00043                 }
00044         }
00045 }
00046 
<a name="l00047"></a><a class="code" href="classTopical__DIL__Files.html#a7">00047</a> <font class="keywordtype">int</font> <a class="code" href="classTopical__DIL__Files.html#a7">Topical_DIL_Files::Refresh</a>() {
00048 <font class="comment">// Clear and reload Topical DIL files list</font>
00049         <font class="keywordflow">if</font> (<a class="code" href="classPLLHandle.html#a2">Prev</a>()) <font class="keywordflow">return</font> <a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classTopical__DIL__Files.html#a7">Refresh</a>(); <font class="comment">// seek head of list</font>
00050         <font class="keyword">delete</font> <a class="code" href="classPLLHandle.html#a1">Next</a>(); <font class="comment">// clear list</font>
00051         <a class="code" href="classTopical__DIL__Files.html#n0">ft</a>.<a class="code" href="structfiletitle__t.html#m0">file</a>=<font class="stringliteral">""</font>; <a class="code" href="classTopical__DIL__Files.html#n0">ft</a>.<a class="code" href="structfiletitle__t.html#m1">title</a>=<font class="stringliteral">""</font>;
00052         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240, SLEN = 1024;
00053         <font class="keywordtype">char</font> lbuf[LLEN], sbuf[SLEN];
00054         ifstream lf(listfile);
00055         regex_t re;
00056         regmatch_t rm[3];
00057         <font class="keywordtype">int</font> mres;
00058         numDILs = 0;
00059         <font class="keywordflow">if</font> (lf) {
00060                 <font class="comment">// find DIL header</font>
00061                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;lf,<font class="stringliteral">"&lt;H1&gt;&lt;A NAME=\"DIL\"&gt;"</font>,lbuf,LLEN)) <font class="keywordflow">return</font> 0;
00062                 <font class="comment">// find &lt;UL&gt;</font>
00063                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;lf,<font class="stringliteral">"&lt;UL&gt;"</font>,lbuf,LLEN)) <font class="keywordflow">return</font> 0;
00064                 <font class="comment">// get DILs</font>
00065                 <font class="keywordflow">if</font> (regcomp(&amp;re,<font class="stringliteral">"&lt;LI&gt;&lt;A +HREF=\"([^\"]*)\"&gt;([^&lt;]*)&lt;"</font>, REG_EXTENDED) != 0) {
00066                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to compile regular expression in get_topical_DILs()\n"</font>;
00067                         <font class="keywordflow">return</font> 0;
00068                 }
00069                 <font class="keywordflow">do</font> {
00070                         <font class="keywordflow">if</font> (lf.eof()) {
00071                                 regfree(&amp;re);
00072                                 <font class="keywordflow">return</font> numDILs;
00073                         }
00074                         lf.getline(lbuf,LLEN);
00075                         mres = regexec(&amp;re,lbuf, (size_t) 3, rm, 0);
00076                         <font class="keywordflow">if</font> ((mres != 0) &amp;&amp; (mres != REG_NOMATCH)) {
00077                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Internal error while matching in get_topical_DILs()\n"</font>;
00078                                 regfree(&amp;re);
00079                                 <font class="keywordflow">return</font> 0;
00080                         }
00081                         <font class="keywordflow">if</font> (!mres) {
00082                                 <font class="keywordflow">if</font> (rm[2].rm_so==-1) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Wrong number of substring matches in get_topical_DILs()\n"</font>;
00083                                 <font class="keywordflow">else</font> {
00084                                         strncpy(sbuf,&amp;lbuf[rm[1].rm_so],rm[1].rm_eo-rm[1].rm_so);
00085                                         sbuf[rm[1].rm_eo-rm[1].rm_so]=<font class="charliteral">'\0'</font>;
00086                                         <a class="code" href="classTopical__DIL__Files.html#b0">Set_File</a>(<a class="code" href="utilities_8cc.html#a31">absurl</a>(listfile,sbuf),numDILs);
00087                                         strncpy(sbuf,&amp;lbuf[rm[2].rm_so],rm[2].rm_eo-rm[2].rm_so);
00088                                         sbuf[rm[2].rm_eo-rm[2].rm_so]=<font class="charliteral">'\0'</font>;
00089                                         <a class="code" href="classTopical__DIL__Files.html#b1">Set_Title</a>(sbuf,numDILs);
00090                                         numDILs++;
00091                                 }
00092                         }
00093                 } <font class="keywordflow">while</font> (!<a class="code" href="utilities_8cc.html#a44">pattern_in_line</a>(<font class="stringliteral">"&lt;/UL&gt;"</font>,lbuf));
00094                 regfree(&amp;re);
00095                 <font class="keywordflow">return</font> numDILs;
00096         } <font class="keywordflow">else</font> {
00097                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Error - "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">" not found\n"</font>;
00098                 <font class="keywordflow">return</font> 0;
00099         }
00100 }
00101 
<a name="l00102"></a><a class="code" href="classDIL__Visualize__with__Tabs.html#a2">00102</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__Tabs.html#a2">DIL_Visualize_with_Tabs::Visualize_Element</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de, <font class="keywordtype">int</font> depth) {
00103         <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00104         <a class="code" href="classDIL__Visualize__with__Tabs.html#n0">s</a> += <font class="stringliteral">"DIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()) + <font class="charliteral">'\n'</font>;
00105         <a class="code" href="classDIL__Visualize__with__Tabs.html#n1">content</a> += <font class="stringliteral">"\nDIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()) + <font class="stringliteral">":\n"</font>;
00106         <a class="code" href="classString.html">String</a> * ctxt = de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>();
00107         <font class="keywordflow">if</font> (ctxt) {
00108                 <a class="code" href="classString.html">String</a> ptxtcontent(*ctxt);
00109                 <a class="code" href="classDIL__Visualize__with__Tabs.html#n1">content</a> += (*<a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(ptxtcontent));
00110         }
00111         <a class="code" href="classDIL__Visualize__with__Tabs.html#n1">content</a> += <font class="charliteral">'\n'</font>;
00112 }
00113 
<a name="l00114"></a><a class="code" href="classDIL__Visualize__with__Tabs.html#a3">00114</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__Tabs.html#a3">DIL_Visualize_with_Tabs::Visualize_NotShown</a>(<font class="keywordtype">int</font> numdependencies, <font class="keywordtype">int</font> depth) {
00115   <font class="keywordflow">if</font> (numdependencies&gt;0) {
00116     <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00117     <a class="code" href="classDIL__Visualize__with__Tabs.html#n0">s</a> += <font class="charliteral">'['</font>+<a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) numdependencies)+<font class="stringliteral">" dependencies...]\n"</font>;
00118   }
00119 }
00120 
<a name="l00121"></a><a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a2">00121</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a2">DIL_Visualize_with_HTML_Tabs::Visualize_Element</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de, <font class="keywordtype">int</font> depth) {
00122   <a class="code" href="classString.html">String</a> ptxtcontent;
00123   <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n1">content</a> += <font class="stringliteral">"\nDIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()) + <font class="stringliteral">":\n"</font>;
00124   <a class="code" href="classString.html">String</a> * ctxt = de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>();
00125   <font class="keywordflow">if</font> (ctxt) {
00126     ptxtcontent = (*ctxt);
00127     <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n1">content</a> += (*<a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(ptxtcontent));
00128     <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(ptxtcontent,hierarchyexcerptlength);
00129     ptxtcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="charliteral">'\n'</font>,<font class="charliteral">' '</font>);
00130   } <font class="keywordflow">else</font> ptxtcontent = <font class="stringliteral">"&lt;!-- excerpt requires content file option --&gt;"</font>;
00131   <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n1">content</a> += <font class="charliteral">'\n'</font>;
00132   <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00133   <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((de-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(0)-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m0">file</a>+<font class="charliteral">'#'</font>)+de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"DIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>())) + <font class="stringliteral">": "</font> + ptxtcontent + <font class="charliteral">'\n'</font>;
00134 }
00135 
<a name="l00136"></a><a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a3">00136</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a3">DIL_Visualize_with_HTML_Tabs::Visualize_NotShown</a>(<font class="keywordtype">int</font> numdependencies, <font class="keywordtype">int</font> depth) {
00137   <font class="keywordflow">if</font> (numdependencies&gt;0) {
00138     <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00139     <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <font class="charliteral">'['</font>+<a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) numdependencies);
00140     <font class="keywordflow">if</font> (reversehierarchy) <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <font class="stringliteral">" superiors...]\n"</font>;
00141     <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#n0">s</a> += <font class="stringliteral">" dependencies...]\n"</font>;
00142   }
00143 }
00144 
<a name="l00145"></a><a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#b0">00145</a> <font class="keywordtype">bool</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#b0">DIL_Visualize_with_FORM_Tabs::Visualize_Plan_Entry</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de) {
00146   <font class="comment">// returns false mostly just to indicate when a regular content editing</font>
00147   <font class="comment">// link should be added to s</font>
00148   <font class="keywordflow">if</font> ((!de) || (!<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>())) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00149   <font class="keywordflow">if</font> (hierarchyplanparse) { <font class="comment">// additional parsing requested</font>
00150     <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()==<a class="code" href="dil2al_8hh.html#a11">PLAN_ENTRY_TYPE_ACTION</a>) {
00151 <font class="preprocessor">#ifdef DEBUG_PLAN_ENTRY</font>
00152 <font class="preprocessor"></font>      <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="charliteral">'['</font> + <a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) de-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()) + <font class="charliteral">']'</font>;
00153 <font class="preprocessor">#endif</font>
00154 <font class="preprocessor"></font>      <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()) {
00155         <a class="code" href="classDIL__entry.html">DIL_entry</a> * pe = <a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#a1">Entry</a>();
00156         <font class="keywordflow">if</font> (pe-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()==<a class="code" href="dil2al_8hh.html#a12">PLAN_ENTRY_TYPE_GOAL</a>)
00157           <font class="keywordflow">if</font> (pe-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#a3">Get_Plan_Entry_Content</a>()-&gt;<a class="code" href="classPlan__entry__content.html#a2">Decision</a>()==(*de)) {
00158             <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&lt;B&gt;{!}&lt;/B&gt;"</font>;
00159           }
00160       }
00161     }
00162 <font class="preprocessor">#ifdef DEBUG_PLAN_ENTRY</font>
00163 <font class="preprocessor"></font>    <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="charliteral">'{'</font> + <a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) de-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()) + <font class="charliteral">'}'</font>;
00164 <font class="preprocessor">#endif</font>
00165 <font class="preprocessor"></font>  }
00166   <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m0">likelihood</a>&gt;<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>) {
00167     <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#n0">cumlikelihood</a>==0.0) <a class="code" href="classDIL__Visualize.html#n0">cumlikelihood</a> = <a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m0">likelihood</a>;
00168     <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize.html#n0">cumlikelihood</a> *= <a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m0">likelihood</a>;
00169     <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">" ("</font>;
00170     <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>) {
00171       <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&lt;A HREF=\"file:///cgi-bin/dil2al?dil2al=MEI&amp;DILID="</font>+de-&gt;<a class="code" href="classDIL__ID.html#a14">str</a>()+<font class="stringliteral">"\"&gt;"</font>; <font class="comment">// open link to modification interface</font>
00172       <font class="keywordtype">double</font> desirability = de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;PLAN_OUTCOME_DESIRABILITY;
00173       <font class="keywordflow">if</font> (desirability&gt;0.0) {
00174         <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&lt;B&gt;"</font> + <a class="code" href="classString.html">String</a>(desirability,<font class="stringliteral">"%3.1f"</font>) + <font class="stringliteral">"&lt;/B&gt;,"</font>;
00175         <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()) <a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m1">benefit</a> += (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m0">likelihood</a>*desirability);
00176       } <font class="keywordflow">else</font> {
00177         <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="classString.html">String</a>(desirability,<font class="stringliteral">"%3.1f"</font>) + <font class="charliteral">','</font>;
00178         <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()) <a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classPLLHandle.html#a2">Prev</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m2">risk</a> += (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#m0">likelihood</a>*(-desirability));
00179       }
00180       <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&lt;/A&gt;"</font>; <font class="comment">//close link to modification interface</font>
00181     } 
00182     <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="classString.html">String</a>(<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;likelihood,<font class="stringliteral">"%4.2f"</font>) + <font class="charliteral">'|'</font> + <a class="code" href="classString.html">String</a>(<a class="code" href="classDIL__Visualize.html#n0">cumlikelihood</a>,<font class="stringliteral">"%5.3f"</font>) + <font class="charliteral">')'</font>;
00183   } <font class="keywordflow">else</font> <font class="keywordflow">return</font> <font class="keyword">false</font>;
00184   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00185 }
00186 
<a name="l00187"></a><a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a2">00187</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a2">DIL_Visualize_with_FORM_Tabs::Visualize_Element</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de, <font class="keywordtype">int</font> depth) {
00188   <a class="code" href="classString.html">String</a> ptxtcontent;
00189   <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n1">content</a> += <font class="stringliteral">"\nDIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()) + <font class="stringliteral">":\n"</font>;
00190   <a class="code" href="classString.html">String</a> * ctxt = de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>();
00191   <font class="keywordflow">if</font> (ctxt) {
00192     ptxtcontent = (*ctxt);
00193     <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n1">content</a> += (*<a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(ptxtcontent));
00194     <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(ptxtcontent,hierarchyexcerptlength);
00195     ptxtcontent.<a class="code" href="classString.html#a89">gsub</a>(<font class="charliteral">'\n'</font>,<font class="charliteral">' '</font>);
00196   } <font class="keywordflow">else</font> ptxtcontent = <font class="stringliteral">"&lt;!-- excerpt requires content file option --&gt;"</font>;
00197   <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n1">content</a> += <font class="charliteral">'\n'</font>;
00198   <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00199   <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize.html#n0">cumlikelihood</a> = 0.0;
00200   <font class="comment">// differentiation of display depending on completion status</font>
00201   <font class="keywordtype">bool</font> pending = <font class="keyword">true</font>;
00202   <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>) pending = ((de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m2">completion</a>&gt;=0.0) &amp;&amp; (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m2">completion</a>&lt;1.0));
00203   <font class="comment">// show checkbox and DIL ID reference</font>
00204   <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&lt;INPUT type=\"checkbox\" name=\"DILIDCHKBX"</font>+<a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>())+<font class="stringliteral">"\" value=\"extract\"&gt;"</font>;
00205   <font class="keywordflow">if</font> (pending) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((de-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(0)-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m0">file</a>+<font class="charliteral">'#'</font>)+de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"&lt;B&gt;DIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()) + <font class="stringliteral">"&lt;/B&gt;"</font>);
00206   <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>((de-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(0)-&gt;<a class="code" href="classDIL__Topical__List.html#m0">dil</a>.<a class="code" href="structfiletitle__t.html#m0">file</a>+<font class="charliteral">'#'</font>)+de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<font class="stringliteral">"DIL#"</font> + <a class="code" href="classString.html">String</a>(de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>()));
00207   <font class="comment">// show level-specific data</font>
00208   <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()) { <font class="comment">// visualization that depends on level-specific data</font>
00209     <font class="keywordflow">if</font> (!<a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#b0">Visualize_Plan_Entry</a>(de)) <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"[&lt;A HREF=\"file:///cgi-bin/dil2al?dil2al=MEI&amp;DILID="</font>+de-&gt;<a class="code" href="classDIL__ID.html#a14">str</a>()+<font class="stringliteral">"\"&gt;edit&lt;/A&gt;]"</font>;
00210   }
00211   <font class="comment">// show DIL entry text content</font>
00212   <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">": "</font> + ptxtcontent + <font class="charliteral">'\n'</font>;
00213 }
00214 
<a name="l00215"></a><a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a3">00215</a> <font class="keywordtype">void</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a3">DIL_Visualize_with_FORM_Tabs::Visualize_NotShown</a>(<font class="keywordtype">int</font> numdependencies, <font class="keywordtype">int</font> depth) {
00216   <font class="keywordflow">if</font> (numdependencies&gt;0) {
00217     <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00218     <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="charliteral">'['</font>+<a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) numdependencies);
00219     <font class="keywordflow">if</font> (reversehierarchy) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">" superiors...]\n"</font>;
00220     <font class="keywordflow">else</font> <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">" dependencies...]\n"</font>;
00221   }
00222   <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>())
00223     <font class="keywordflow">if</font> (<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;<a class="code" href="classDIL__Hierarchy__Level__Data.html#a3">has_benefit_risk</a>()) {
00224       <font class="keywordflow">if</font> (depth&gt;0) <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <a class="code" href="BigString_8cc.html#a39">replicate</a>(<font class="charliteral">'\t'</font>,depth);
00225       <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#n0">s</a> += <font class="stringliteral">"&amp;lt;"</font> + <a class="code" href="classString.html">String</a>(<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;benefit,<font class="stringliteral">"%3.1f"</font>) + <font class="charliteral">'/'</font> + <a class="code" href="classString.html">String</a>(<a class="code" href="classDIL__Visualize.html#a4">Level_Data</a>()-&gt;risk,<font class="stringliteral">"%3.1f"</font>) + <font class="stringliteral">"&amp;gt;\n"</font>;
00226     }
00227 }
00228 
00229 <font class="comment">// DIL administration functions</font>
00230 
<a name="l00231"></a><a class="code" href="diladmin_8cc.html#a1">00231</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a1">get_active_DIL_IDs</a>(<a class="code" href="classStringList.html">StringList</a> &amp; idfileids, <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> * resnumidfileids = NULL) {
00232 <font class="comment">// obtains all DIL IDs from the DIL-by-ID file</font>
00233 <font class="comment">// optionally adds the number of IDs found to resnumidfileids</font>
00234         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240;
00235         <font class="keywordtype">char</font> lbuf[LLEN];
00236         <a class="code" href="classString.html">String</a> dilid[2];
00237         <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> numidfileids = 0;
00238         <font class="keywordtype">int</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
00239         ifstream df(idfile);
00240         <font class="keywordflow">if</font> (df) {
00241                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;df,<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL ID *begin *--[&gt;]"</font>,lbuf,LLEN)) {
00242                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Tag &lt;!-- dil2al: DIL ID begin --&gt; not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">"in get_active_DIL_IDs()\n"</font>;
00243                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00244                 }
00245                 <font class="keywordflow">do</font> {
00246                         <font class="keywordflow">if</font> ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>=<a class="code" href="utilities_8cc.html#a48">find_in_line</a>(&amp;df,<font class="stringliteral">"[&lt;]TR[&gt;]"</font>,0,NULL,<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL ID *end *--[&gt;]"</font>,lbuf,LLEN))==1) {
00247                                 <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <a class="code" href="utilities_8cc.html#a48">find_in_line</a>(&amp;df,<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][&lt;]A +NAME=\"([.0-9]+)\""</font>,2,dilid,<font class="stringliteral">"[&lt;]TR[&gt;]|[&lt;]!-- *dil2al: *DIL ID *end *--[&gt;]"</font>,lbuf,LLEN);
00248                                 <font class="keywordflow">if</font> (<a class="code" href="templates_8defines_8hh.html#a11">res</a>&lt;-1) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00249                                 idfileids[numidfileids++] = dilid[1];
00250                         } <font class="keywordflow">else</font> {
00251                                 <font class="keywordflow">if</font> (<a class="code" href="templates_8defines_8hh.html#a11">res</a>&gt;=-1) <a class="code" href="templates_8defines_8hh.html#a11">res</a>=-1;
00252                                 <font class="keywordflow">else</font> <font class="keywordflow">return</font> <font class="keyword">false</font>;
00253                         }
00254                 } <font class="keywordflow">while</font> ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>&gt;0) || ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>==0) &amp;&amp; (!<a class="code" href="utilities_8cc.html#a44">pattern_in_line</a>(<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL ID *end *--[&gt;]"</font>,lbuf))));
00255                 df.close();
00256         } <font class="keywordflow">else</font> {
00257                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to open DIL ID file "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">"in get_active_DIL_IDs()\n"</font>;
00258                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00259         }
00260         <font class="keywordflow">if</font> (resnumidfileids) (*resnumidfileids) += numidfileids;
00261         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00262 }
00263 
<a name="l00264"></a><a class="code" href="diladmin_8cc.html#a2">00264</a> <a class="code" href="classString.html">String</a> <a class="code" href="diladmin_8cc.html#a2">superior_reference_info</a>(<a class="code" href="classStringList.html">StringList</a> * supinfoptr) {
00265 <font class="comment">// add superior DIL entry references to DIL-by-ID entry</font>
00266         <a class="code" href="classString.html">String</a> <a class="code" href="templates_8defines_8hh.html#a11">res</a>(<font class="stringliteral">"&lt;/A&gt; ("</font>);
00267         <font class="keywordflow">if</font> (supinfoptr) {
00268                 <font class="keywordtype">int</font> suprefsadded = 0;
00269                 res += <font class="stringliteral">"1.0)\n&lt;TD&gt;"</font>;
00270                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> sr=0; sr&lt;supinfoptr-&gt;<a class="code" href="classStringList.html#a10">length</a>(); sr++) <font class="keywordflow">if</font> ((*supinfoptr)[sr]!=<font class="stringliteral">""</font>) {
00271                         <font class="keywordflow">if</font> (suprefsadded&gt;0) res += <font class="stringliteral">", "</font>;
00272                         res += (*supinfoptr)[sr];
00273                         suprefsadded++;
00274                 }
00275                 res += <font class="stringliteral">"\n\n"</font>;
00276                 <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; suprefsadded &lt;&lt; <font class="stringliteral">" superior DIL entry references added\n"</font>;
00277         } <font class="keywordflow">else</font> res += <font class="stringliteral">"?.?)\n&lt;TD&gt;&amp;nbsp;\n\n"</font>;
00278         <font class="keywordflow">return</font> res;
00279 }
00280 
<a name="l00281"></a><a class="code" href="diladmin_8cc.html#a3">00281</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a3">add_new_to_DIL</a>(<a class="code" href="classString.html">String</a> dilfile, <a class="code" href="classStringList.html">StringList</a> * supinfoptr) {
00282 <font class="comment">// Adds all new DIL entry ID references to the DIL-by-ID file,</font>
00283 <font class="comment">// with superior DIL entry information if provided in supinfoptr</font>
00284         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240;
00285         <font class="keywordtype">char</font> lbuf[LLEN];
00286         <a class="code" href="classString.html">String</a> dilid[2], dilfilename, dilfiletitle;
00287         <a class="code" href="classStringList.html">StringList</a> dilfileids, idfileids, beforeid;
00288         <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> numdilfileids = 0, numidfileids = 0, newdils = 0;
00289         <font class="keywordtype">int</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
00290         <font class="comment">// get name of DIL file</font>
00291         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a45">substring_from_line</a>(<font class="stringliteral">"([^/]+)$"</font>,2,dilid,(<font class="keyword">const</font> <font class="keywordtype">char</font> *) dilfile)) {
00292                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to parse name from DIL file path in add_new_to_DIL()\n"</font>;
00293                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00294         } <font class="keywordflow">else</font> dilfilename = dilid[1];
00295         dilfile=basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+dilfilename;
00296         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Adding new DIL ID from "</font> &lt;&lt; dilfile &lt;&lt; <font class="charliteral">'\n'</font>;
00297         ifstream df(dilfile);
00298         <font class="keywordflow">if</font> (df) {
00299                 <font class="comment">// get title of DIL file</font>
00300                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;df,<font class="stringliteral">"[&lt;]TITLE[&gt;] *DIL: *"</font>,lbuf,LLEN)) {
00301                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to find title of DIL file in add_new_to_DIL()\n"</font>;
00302                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00303                 }
00304                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a45">substring_from_line</a>(<font class="stringliteral">"[&lt;]TITLE[&gt;] *DIL: *([^&lt;]+)"</font>,2,dilid,lbuf)) {
00305                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to parse title from title line of DIL file in add_new_to_DIL()\n"</font>;
00306                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00307                 } <font class="keywordflow">else</font> dilfiletitle = dilid[1];
00308                 <font class="comment">// collect all DIL IDs in dilfile</font>
00309                 <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a46">find_line</a>(&amp;df,<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL *begin *--[&gt;]"</font>,lbuf,LLEN)) {
00310                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Tag &lt;!-- dil2al: DIL begin --&gt; not found in "</font> &lt;&lt; dilfile &lt;&lt; <font class="charliteral">'\n'</font>;
00311                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00312                 }
00313                 <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Reading DIL IDs\n"</font>;
00314                 <font class="keywordflow">do</font> {
00315                         <font class="keywordflow">if</font> ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>=<a class="code" href="utilities_8cc.html#a48">find_in_line</a>(&amp;df,<font class="stringliteral">"[&lt;]TR +BGCOLOR=\"#00005F"</font>,0,NULL,<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL *end *--[&gt;]"</font>,lbuf,LLEN))==1) {
00316                                 <a class="code" href="templates_8defines_8hh.html#a11">res</a> = <a class="code" href="utilities_8cc.html#a48">find_in_line</a>(&amp;df,<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][&lt;]A +NAME=\"([.0-9]+)\""</font>,2,dilid,<font class="stringliteral">"[&lt;]TR +BGCOLOR=\"#00005F|[&lt;]!-- *dil2al: *DIL *end *--[&gt;]"</font>,lbuf,LLEN);
00317                                 <font class="keywordflow">if</font> (<a class="code" href="templates_8defines_8hh.html#a11">res</a>&lt;-1) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00318                                 <font class="keywordflow">if</font> (numdilfileids) {
00319                                         <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> i;
00320                                         <font class="keywordflow">for</font> (i=0; ((i&lt;numdilfileids) &amp;&amp; (dilid[1]&gt;dilfileids[i])); i++);
00321                                         dilfileids.<a class="code" href="classStringList.html#a9">insert</a>(i,dilid[1]);
00322                                 } <font class="keywordflow">else</font> dilfileids[0]=dilid[1];
00323                                 numdilfileids++;
00324                         } <font class="keywordflow">else</font> {
00325                                 <font class="keywordflow">if</font> (<a class="code" href="templates_8defines_8hh.html#a11">res</a>&gt;=-1) <a class="code" href="templates_8defines_8hh.html#a11">res</a>=-1;
00326                                 <font class="keywordflow">else</font> <font class="keywordflow">return</font> <font class="keyword">false</font>;
00327                         }
00328                 } <font class="keywordflow">while</font> ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>&gt;0) || ((<a class="code" href="templates_8defines_8hh.html#a11">res</a>==0) &amp;&amp; (!<a class="code" href="utilities_8cc.html#a44">pattern_in_line</a>(<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL *end *--[&gt;]"</font>,lbuf))));
00329                 df.close();
00330         } <font class="keywordflow">else</font> {
00331                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to open DIL file "</font> &lt;&lt; dilfile &lt;&lt; <font class="charliteral">'\n'</font>;
00332                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00333         }
00334         <font class="comment">// compare with all DIL IDs in detailed-items-by-ID.html</font>
00335         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Comparing with DIL IDs in "</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'\n'</font>;
00336         <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a1">get_active_DIL_IDs</a>(idfileids,&amp;numidfileids)) {
00337                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to obtain DIL IDs from "</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'\n'</font>;
00338                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00339         }
00340 <font class="comment">//      for (int i=0; i&lt;numidfileids; i++) cout &lt;&lt; idfileids[i] &lt;&lt; '\n';</font>
00341         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Removing existing IDs from batch to add\n"</font>;
00342 <font class="comment">//*** THIS IS WHERE IT *SHOULD* STILL ADD ADDITIONAL DIL REFERENCES TO THE</font>
00343 <font class="comment">//*** DIL-BY-ID LIST IF AN ITEM OCCURS IN MORE THAN ONE DIL!!!</font>
00344 <font class="comment">//*** SEE DIL 20000124180439.1, WHICH OCCURS IN BOTH components.html and experiments.html</font>
00345 <font class="comment">//*** (NOTE ALSO THAT SENDTODIL DID NOT WORK PROPERLY FOR THE SECOND OCCURRANCE!)</font>
00346         newdils=numdilfileids;
00347         <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> i=0; i&lt;numdilfileids; i++)
00348                 <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> j=0; j&lt;numidfileids; j++)
00349                         <font class="keywordflow">if</font> ((dilfileids[i])==(idfileids[j])) {
00350                                 dilfileids[i]=<font class="stringliteral">""</font>; <font class="comment">// avoid adding multiples</font>
00351                                 newdils--;
00352                                 <font class="keywordflow">break</font>;
00353                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((idfileids[j]&gt;dilfileids[i]) &amp;&amp; (beforeid[i]==<font class="stringliteral">""</font>)) beforeid[i]=idfileids[j];
00354         <font class="keywordflow">if</font> (newdils&gt;0) {
00355                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Number of new DILs: "</font> &lt;&lt; newdils &lt;&lt; <font class="charliteral">'\n'</font>;
00356 <font class="comment">//              for (int i=0; i&lt;numdilfileids; i++) cout &lt;&lt; dilfileids[i] &lt;&lt; ',' &lt;&lt; beforeid[i] &lt;&lt; '\n';</font>
00357                 <font class="comment">// copy idfile and add new DILs in sorted locations (beforeid[i]=="" implies place at end)</font>
00358                 df.open(idfile);
00359                 <font class="keywordflow">if</font> (!df) {
00360                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to open DIL ID file "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">"in add_new_to_DIL()\n"</font>;
00361                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00362                 }
00363                 ofstream ndf(idfile+<font class="stringliteral">".new"</font>);
00364                 <font class="keywordflow">if</font> (ndf) {
00365                         <font class="comment">//df.seekg(0);</font>
00366                         <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> i;
00367                         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Inserting new IDs\n"</font>;
00368                         <font class="comment">// find first new DIL to insert</font>
00369                         <font class="keywordflow">for</font> (i=0; (i&lt;numdilfileids) &amp;&amp; (dilfileids[i]==<font class="stringliteral">""</font>); i++);
00370                         <font class="keywordflow">while</font> (!df.eof()) {
00371                                 df.getline(lbuf,LLEN);
00372                                 <font class="keywordflow">if</font> (newdils) {
00373                                         <font class="comment">// test if found an insertion location</font>
00374                                         <font class="keywordflow">if</font> ((beforeid[i]!=<font class="stringliteral">""</font>) &amp;&amp; (<a class="code" href="utilities_8cc.html#a44">pattern_in_line</a>(<font class="stringliteral">"[&lt;]TD[^&gt;]*[&gt;][&lt;]A +NAME=\""</font>+beforeid[i],lbuf))) {
00375                                                 <font class="comment">// insert</font>
00376                                                 ndf &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;A NAME=\""</font> &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"\"&gt;"</font>
00377                                                         &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"&lt;/A&gt;\n&lt;TD&gt;&lt;A HREF=\""</font>
00378                                                         &lt;&lt; dilfilename &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"\"&gt;"</font>
00379                                                         &lt;&lt; dilfiletitle &lt;&lt; <a class="code" href="diladmin_8cc.html#a2">superior_reference_info</a>(supinfoptr) &lt;&lt; <font class="stringliteral">"&lt;TR&gt;\n"</font>;
00380                                                 <font class="comment">// find next DIL to insert</font>
00381                                                 <font class="keywordflow">for</font> (i++; (i&lt;numdilfileids) &amp;&amp; (dilfileids[i]==<font class="stringliteral">""</font>); i++);
00382                                                 newdils--;
00383                                         }
00384                                         <font class="comment">// test if found end of DILs (insert rest here)</font>
00385                                         <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a44">pattern_in_line</a>(<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL ID *end *--[&gt;]"</font>,lbuf)) {
00386                                                 <font class="keywordflow">do</font> {
00387                                                         ndf &lt;&lt; <font class="stringliteral">"&lt;TR&gt;\n&lt;TD&gt;&lt;A NAME=\""</font> &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"\"&gt;"</font>
00388                                                                 &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"&lt;/A&gt;\n&lt;TD&gt;&lt;A HREF=\""</font>
00389                                                                 &lt;&lt; dilfilename &lt;&lt; <font class="charliteral">'#'</font> &lt;&lt; dilfileids[i] &lt;&lt; <font class="stringliteral">"\"&gt;"</font>
00390                                                                 &lt;&lt; dilfiletitle &lt;&lt; <a class="code" href="diladmin_8cc.html#a2">superior_reference_info</a>(supinfoptr);
00391                                                         <font class="keywordflow">for</font> (i++; (i&lt;numdilfileids) &amp;&amp; (dilfileids[i]==<font class="stringliteral">""</font>); i++);
00392                                                         newdils--;
00393                                                 } <font class="keywordflow">while</font> (newdils);
00394                                         }
00395                                 }
00396                                 <font class="keywordflow">if</font> (!df.eof()) ndf &lt;&lt; lbuf &lt;&lt; endl;
00397                         }
00398                         df.close();
00399                         ndf.close();
00400                         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a36">backup_and_rename</a>(idfile,<font class="stringliteral">"DIL ID"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00401                 } <font class="keywordflow">else</font> {
00402                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create file "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">".new in add_new_to_DIL()\n"</font>;
00403                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00404                 }
00405         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No new IDs to add\n"</font>;
00406         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00407 }
00408 
<a name="l00409"></a><a class="code" href="diladmin_8cc.html#a4">00409</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a4">create_new_DIL</a>(<a class="code" href="classString.html">String</a> dilfile) {
00410         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240;
00411         <font class="keywordtype">char</font> lbuf[LLEN];
00412         <a class="code" href="classString.html">String</a> dilid[2], dilfilename, diltitle;
00413         <font class="comment">// get name of DIL file regardless of whether it was a relative or absolute path</font>
00414         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a45">substring_from_line</a>(<font class="stringliteral">"([^/]+)$"</font>,2,dilid,(<font class="keyword">const</font> <font class="keywordtype">char</font> *) dilfile)) {
00415                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to parse name from DIL file path in create_new_DIL()\n"</font>;
00416                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00417         } <font class="keywordflow">else</font> dilfilename = dilid[1];
00418         dilfile=basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+dilfilename;
00419         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Creating new DIL file "</font> &lt;&lt; dilfile &lt;&lt; <font class="charliteral">'\n'</font>;
00420         ifstream df(dilfile);
00421         <font class="keywordflow">if</font> (df) {
00422                 df.close();
00423                 cout &lt;&lt; <font class="stringliteral">"DIL file "</font> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">" already exists, overwrite? (y/N) "</font>;
00424                 cin.getline(lbuf,LLEN);
00425                 <font class="keywordflow">if</font> ((lbuf[0]!=<font class="charliteral">'y'</font>) &amp;&amp; (lbuf[0]!=<font class="charliteral">'Y'</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00426         }
00427         ofstream ndf(dilfile);
00428         <font class="keywordflow">if</font> (ndf) {
00429                 <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Initializing new DIL file\n"</font>;
00430                 cout &lt;&lt; <font class="stringliteral">"DIL title for "</font> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">": "</font>;
00431                 cin.getline(lbuf,LLEN); diltitle = lbuf;
00432                 ndf &lt;&lt; <font class="stringliteral">"&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;DIL: "</font> &lt;&lt; diltitle &lt;&lt; <font class="stringliteral">"&lt;/TITLE&gt;\n"</font>;
00433                 ndf &lt;&lt; <font class="stringliteral">"&lt;/HEAD&gt;\n&lt;BODY BGCOLOR=\"#000000\" TEXT=\"#F0E0A0\" LINK=\"#AFAFFF\" VLINK=\"#7F7FFF\"&gt;\n"</font>;
00434                 ndf &lt;&lt; <font class="stringliteral">"&lt;H1&gt;&lt;FONT COLOR=\"#00FF00\"&gt;DIL: "</font> &lt;&lt; diltitle &lt;&lt; <font class="stringliteral">"&lt;/FONT&gt;&lt;/H1&gt;\n\n"</font>;
00435                 cout &lt;&lt; <font class="stringliteral">"DIL keywords and relevance, e.g. neuron (1.0), synapse (1.0): "</font>;
00436                 cin.getline(lbuf,LLEN);
00437                 ndf &lt;&lt; <font class="stringliteral">"&lt;B&gt;Topic Keywords, k_{top} (and relevance in [0,1]):&lt;/B&gt; "</font> &lt;&lt; lbuf &lt;&lt; <font class="stringliteral">"\n&lt;P&gt;\n\n"</font>;
00438                 ndf &lt;&lt; <font class="stringliteral">"&lt;TABLE WIDTH=\"100%\" CELLPADDING=3 BORDER=2&gt;\n&lt;!-- dil2al: DIL begin --&gt;\n\n&lt;!-- dil2al: DIL end --&gt;\n&lt;/TABLE&gt;\n\n\n"</font>;
00439                 ndf &lt;&lt; <font class="stringliteral">"&lt;LI&gt;&lt;A HREF=\"detailed-items-by-ID.html\"&gt;Detailed Items by ID&lt;/A&gt;\n&lt;LI&gt;&lt;A HREF=\"../lists.html#DIL\"&gt;Topical Detailed Items Lists&lt;/A&gt;\n&lt;P&gt;\n"</font>;
00440                 ndf &lt;&lt; <font class="stringliteral">"&lt;HR&gt;~/doc/&lt;A HREF=\"../maincont.html\"&gt;html&lt;/A&gt;/&lt;A HREF=\"../lists.html\"&gt;lists&lt;/A&gt;/"</font>
00441                         &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">" &lt;FONT COLOR=\"#AFAFAF\"&gt;&lt;I&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;(created "</font> &lt;&lt; curdate &lt;&lt; <font class="stringliteral">", Randal A. Koene)&lt;/I&gt;&lt;/FONT&gt;\n\n&lt;/BODY&gt;\n"</font>;
00442                 ndf.close();
00443         } <font class="keywordflow">else</font> {
00444                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create file "</font> &lt;&lt; dilfile &lt;&lt; <font class="stringliteral">" in create_new_DIL()\n"</font>;
00445                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00446         }
00447         <font class="comment">// Add DIL title and reference to list.html</font>
00448         df.open(listfile);
00449         <font class="keywordflow">if</font> (!df) {
00450                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to open "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">" in create_new_DIL()\n"</font>;
00451                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00452         }
00453         ndf.open(listfile+<font class="stringliteral">".new"</font>);
00454         <font class="keywordflow">if</font> (!ndf) {
00455                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create "</font> &lt;&lt; listfile &lt;&lt; <font class="stringliteral">".new in create_new_DIL()\n"</font>;
00456                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00457         }
00458         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Adding new DIL to "</font> &lt;&lt; listfile &lt;&lt; <font class="charliteral">'\n'</font>;
00459         <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a47">copy_until_line</a>(&amp;df,&amp;ndf,<font class="stringliteral">"&lt;H1&gt;&lt;A NAME=\"DIL\"&gt;"</font>,lbuf,LLEN)&lt;=0) {
00460                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No DIL header ``&lt;H1&gt;&lt;A NAME=\"DIL\"&gt;'' found in create_new_DIL()\n"</font>;
00461                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00462         }
00463         ndf &lt;&lt; lbuf &lt;&lt; endl;
00464         <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a47">copy_until_line</a>(&amp;df,&amp;ndf,<font class="stringliteral">"&lt;/UL&gt;"</font>,lbuf,LLEN)&lt;=0) {
00465                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No DIL list end ``&lt;/UL&gt;'' found in create_new_DIL()\n"</font>;
00466                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00467         }
00468         ndf &lt;&lt; <font class="stringliteral">"&lt;LI&gt;&lt;A HREF=\""</font> &lt;&lt; <a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">"\"&gt;"</font> &lt;&lt; diltitle &lt;&lt; <font class="stringliteral">"&lt;/A&gt;\n"</font>;
00469         ndf &lt;&lt; lbuf &lt;&lt; endl;
00470         ndf &lt;&lt; df.rdbuf();
00471         df.close();
00472         ndf.close();
00473         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a36">backup_and_rename</a>(listfile,<font class="stringliteral">"lists index"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00474         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00475 }
00476 
<a name="l00477"></a><a class="code" href="diladmin_8cc.html#a5">00477</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a5">send_dil_to_DIL</a>(<a class="code" href="classString.html">String</a> dilfile) {
00478         <font class="keyword">const</font> <font class="keywordtype">int</font> LLEN = 10240;
00479         <font class="keywordtype">char</font> lbuf[LLEN];
00480         <a class="code" href="classString.html">String</a> dilid[2], dilfilename;
00481         <font class="comment">// read entry data into string buffer (to avoid confusion in case stdin and create file requests)</font>
00482         <a class="code" href="classString.html">String</a> dentrybuf;
00483         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Reading DIL entry content\n"</font>;
00484         <a class="code" href="utilities_8cc.html#a42">read_data_from_stream</a>(<a class="code" href="dil2al_8hh.html#a106">DIN</a>,dentrybuf,<font class="stringliteral">"@End of DIL entry@"</font>);
00485         <font class="comment">// get inline tag information and remove those inline tags</font>
00486         <a class="code" href="classString.html">String</a> supinfotag(<font class="stringliteral">"DESUP"</font>); supinfotag = <a class="code" href="utilities_8cc.html#a18">RX_Search_Safe</a>(<a class="code" href="dil2al_8cc.html#a103">generate_tag</a>(supinfotag)); <font class="comment">// get standardized tag</font>
00487         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">":[    ]*"</font>),<font class="stringliteral">":[%_%]*\\("</font>);
00488         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">" "</font>,<font class="stringliteral">"[  ]+"</font>);
00489         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"%_%"</font>,<font class="stringliteral">"         "</font>);
00490         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<font class="stringliteral">"SUPid"</font>,<font class="stringliteral">"[.0-9]+"</font>);
00491         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"SI[^,)]*"</font>),<font class="stringliteral">"[^,)]*"</font>);
00492         supinfotag.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(.\\)@"</font>),<font class="stringliteral">"_1\\)@"</font>,<font class="charliteral">'_'</font>);
00493         <a class="code" href="classBigRegex.html">BigRegex</a> si(supinfotag); <a class="code" href="classStringList.html">StringList</a> supinfo; <font class="keywordtype">int</font> supnum = 0;
00494         <font class="keywordflow">while</font> (dentrybuf.<a class="code" href="classString.html#a26">index</a>(si)&gt;=0) {
00495                 supinfo[supnum] = dentrybuf.<a class="code" href="classString.html#a51">at</a>(si.<a class="code" href="classBigRegex.html#a5">subpos</a>(1),si.<a class="code" href="classBigRegex.html#a6">sublen</a>(1)); <font class="comment">// get superior id and information</font>
00496                 dentrybuf.<a class="code" href="classString.html#a83">del</a>(si.<a class="code" href="classBigRegex.html#a5">subpos</a>(0),si.<a class="code" href="classBigRegex.html#a6">sublen</a>(0)); <font class="comment">// remove tag</font>
00497                 supnum++;
00498         }
00499         <font class="comment">// get name of DIL file regardless of whether it was a relative or absolute path</font>
00500         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a45">substring_from_line</a>(<font class="stringliteral">"([^/]+)$"</font>,2,dilid,(<font class="keyword">const</font> <font class="keywordtype">char</font> *) dilfile)) {
00501                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to parse name from DIL file path in send_dil_to_DIL()\n"</font>;
00502                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00503         } <font class="keywordflow">else</font> dilfilename = dilid[1];
00504         dilfile=basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>+dilfilename;
00505         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Sending DIL entry to "</font> &lt;&lt; dilfile &lt;&lt; <font class="charliteral">'\n'</font>;
00506         ifstream df(dilfile);
00507         <font class="keywordflow">if</font> (!df) {
00508                 <font class="comment">// optionally create new DIL file</font>
00509                 cout &lt;&lt; <font class="stringliteral">"DIL file "</font> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">" does not exist, create? (y/N) "</font>;
00510                 cin.getline(lbuf,LLEN);
00511                 <font class="keywordflow">if</font> ((lbuf[0]==<font class="charliteral">'y'</font>) || (lbuf[0]==<font class="charliteral">'Y'</font>)) {
00512                         <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a4">create_new_DIL</a>(dilfilename)) {
00513                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create new DIL file "</font> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">" in send_dil_to_DIL()\n"</font>;
00514                                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00515                         }
00516                         df.open(dilfile);
00517                 } <font class="keywordflow">else</font> <font class="keywordflow">return</font> <font class="keyword">false</font>;
00518         }
00519         <font class="keywordflow">if</font> (df) {
00520                 ofstream ndf(dilfile+<font class="stringliteral">".new"</font>);
00521                 <font class="keywordflow">if</font> (!ndf) {
00522                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to create "</font> &lt;&lt; dilfile &lt;&lt; <font class="stringliteral">".new in send_dil_to_DIL()\n"</font>;
00523                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00524                 }
00525                 <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Copying DIL to "</font> &lt;&lt; dilfile &lt;&lt; <font class="stringliteral">".new and adding new entry\n"</font>;
00526                 <font class="comment">// copy content up to bottom of DIL table</font>
00527                 <font class="keywordflow">if</font> (<a class="code" href="utilities_8cc.html#a47">copy_until_line</a>(&amp;df,&amp;ndf,<font class="stringliteral">"[&lt;]!-- *dil2al: *DIL *end *--[&gt;]"</font>,lbuf,LLEN)&lt;=0) {
00528                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: End of DIL table ``&lt;!-- dil2al: DIL end --&gt;'' not found in send_dil_to_DIL()\n"</font>;
00529                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00530                 }
00531                 <font class="comment">// add new DIL content</font>
00532                 ndf &lt;&lt; dentrybuf;
00533                 <font class="comment">// place end of DIL table marker</font>
00534                 ndf &lt;&lt; lbuf &lt;&lt; endl;
00535                 <font class="comment">// copy rest of DIL file</font>
00536                 ndf &lt;&lt; df.rdbuf();
00537                 df.close();
00538                 ndf.close();
00539         } <font class="keywordflow">else</font> {
00540                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to open new DIL file "</font> &lt;&lt; dilfilename &lt;&lt; <font class="stringliteral">" in send_dil_to_DIL()\n"</font>;
00541                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00542         }
00543         <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a36">backup_and_rename</a>(dilfile,<font class="stringliteral">"DIL"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00544         <a class="code" href="classStringList.html">StringList</a> * supinfoptr = NULL;
00545         <font class="keywordflow">if</font> (supinfo[0]!=<font class="stringliteral">""</font>) supinfoptr = &amp;supinfo;
00546         <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a3">add_new_to_DIL</a>(dilfile,supinfoptr)) {
00547                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to add new item from "</font> &lt;&lt; dilfile &lt;&lt; <font class="stringliteral">" to DIL in send_dil_to_DIL()\n"</font>;
00548                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
00549         }
00550         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00551 }
00552 
<a name="l00553"></a><a class="code" href="diladmin_8cc.html#a6">00553</a> <a class="code" href="classString.html">String</a> <a class="code" href="diladmin_8cc.html#a301">get_new_DIL_ID</a>() {
00554 <font class="comment">// generates a new DIL ID based on the current time</font>
00555 <font class="comment">// and the next single decimal available with that</font>
00556 <font class="comment">// time stamp (in the unlikely event that there are</font>
00557 <font class="comment">// already 9 items with that time stamp, it will</font>
00558 <font class="comment">// try an ID based on another time stamp)</font>
00559         <font class="comment">// obtain all existing DIL IDs</font>
00560         <a class="code" href="classStringList.html">StringList</a> idfileids;
00561         <font class="keywordtype">unsigned</font> <font class="keywordtype">long</font> numidfileids = 0;
00562         <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a1">get_active_DIL_IDs</a>(idfileids,&amp;numidfileids)) {
00563                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to obtain DIL IDs from "</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'\n'</font>;
00564                 <font class="keywordflow">return</font> <font class="stringliteral">""</font>;
00565         }
00566         <font class="comment">// generate a new time stamped DIL ID</font>
00567         <a class="code" href="classString.html">String</a> newdilid;
00568         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> loopescape=60; (loopescape); loopescape--) { 
00569                 <a class="code" href="classString.html">String</a> idtimestamp = <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M%S"</font>);
00570                 <font class="comment">// try ID decimal indices</font>
00571                 <font class="keywordflow">for</font> (<font class="keywordtype">char</font> decimalindex = <font class="charliteral">'1'</font>; decimalindex &lt;= <font class="charliteral">'9'</font>; decimalindex++) {
00572                         newdilid = idtimestamp + <font class="charliteral">'.'</font> + decimalindex;
00573                         <font class="keywordflow">for</font> (<a class="code" href="classStringList.html">StringList</a> * idfileentry = &amp;idfileids; (idfileentry); idfileentry=idfileentry-&gt;<a class="code" href="classStringList.html#a6">get_Next</a>()) {
00574                                 <font class="keywordflow">if</font> (newdilid==(*idfileentry)[0]) {
00575                                         newdilid=<font class="stringliteral">""</font>;
00576                                         <font class="keywordflow">break</font>;
00577                                 }
00578                         }
00579                         <font class="keywordflow">if</font> (newdilid!=<font class="stringliteral">""</font>) <font class="keywordflow">break</font>;
00580                 }
00581                 <font class="keywordflow">if</font> (newdilid!=<font class="stringliteral">""</font>) <font class="keywordflow">break</font>;
00582                 <font class="keywordflow">if</font> (loopescape&gt;1) {
00583 <font class="comment">// #ifdef SYSV</font>
00584 <font class="comment">//                      poll((struct poll *) 0, (size_t) 0, 1000); /* 1000 msec */</font>
00585 <font class="comment">// #else</font>
00586                         sleep(1); <font class="comment">/* usleep(1000000L); 1000000 microsec */</font>
00587 <font class="comment">// #endif</font>
00588                 }
00589         }
00590         <font class="keywordflow">return</font> newdilid;
00591 }
00592 
<a name="l00593"></a><a class="code" href="diladmin_8cc.html#a7">00593</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a7">generate_modify_element_FORM_interface_DIL_entry_content</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de) {
00594   <font class="comment">// generates FORM components specific to editing the content elements of</font>
00595   <font class="comment">// a DIL entry</font>
00596   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;FORM METHOD=\"POST\" ACTION=\"/cgi-bin/dil2al\"&gt;&lt;INPUT type=\"hidden\" name=\"dil2al\" value=\"MEi\"&gt;\n&lt;P&gt;\n"</font>;
00597   <font class="comment">// ID</font>
00598   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;B&gt;DIL ID# "</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"&lt;/B&gt; Content &lt;INPUT type=\"hidden\" name=\"DILID\" value=\""</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"\"&gt;\n&lt;P&gt;\n"</font>;
00599   <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>) {
00600     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TABLE&gt;\n"</font>;
00601     <font class="comment">// valuation</font>
00602     <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()==<a class="code" href="dil2al_8hh.html#a14">PLAN_ENTRY_TYPE_OUTCOME</a>) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TR&gt;&lt;TD ALIGN=RIGHT&gt;&lt;B&gt;desirability&lt;/B&gt; = &lt;TD&gt;"</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;PLAN_OUTCOME_DESIRABILITY,<font class="stringliteral">"%.2f"</font>) &lt;&lt; <font class="stringliteral">" &lt;TD&gt;&lt;INPUT type=\"text\" name=\"valuation\" maxlength=5&gt;&lt;TD&gt;&amp;nbsp;\n&lt;P&gt;\n"</font>;
00603     <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TR&gt;&lt;TD ALIGN=RIGHT&gt;valuation = &lt;TD&gt;"</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m3">valuation</a>,<font class="stringliteral">"%.2f"</font>) &lt;&lt; <font class="stringliteral">" &lt;TD&gt;&lt;INPUT type=\"text\" name=\"valuation\" maxlength=5&gt;&lt;TD&gt;&amp;nbsp;\n&lt;P&gt;\n"</font>;
00604     <font class="comment">// completion ratio</font>
00605     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TR&gt;&lt;TD ALIGN=RIGHT&gt;completion ratio = &lt;TD&gt;"</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m2">completion</a>,<font class="stringliteral">"%.2f"</font>) &lt;&lt; <font class="stringliteral">" &lt;TD&gt;&lt;INPUT type=\"text\" name=\"completion\" maxlength=5&gt;&lt;TD&gt;special completion values:\n&lt;UL&gt;\n&lt;LI&gt;-1 = obsolete\n&lt;LI&gt;-2 = replaced\n&lt;LI&gt;-3 = done differently\n&lt;LI&gt;-4 = no longer possible / did not come to pass\n&lt;/UL&gt;\n&lt;P&gt;\n"</font>;
00606     <font class="comment">// time required</font>
00607     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TR&gt;&lt;TD ALIGN=RIGHT&gt;time required = &lt;TD&gt;"</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) (de-&gt;<a class="code" href="classDIL__entry.html#m0">content</a>-&gt;<a class="code" href="classDIL__entry__content.html#m1">required</a>/3600.0),<font class="stringliteral">"%.2f"</font>) &lt;&lt; <font class="stringliteral">" &lt;TD&gt;&lt;INPUT type=\"text\" name=\"required\" maxlength=5&gt;&lt;TD&gt;&amp;nbsp;\n&lt;P&gt;\n"</font>;
00608     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/TABLE&gt;\n"</font>;
00609   } <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;B&gt;No content found!&lt;/B&gt;\n&lt;P&gt;\n"</font>;
00610   <font class="comment">// text</font>
00611   <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()) {
00612     <a class="code" href="classString.html">String</a> textstr(<font class="stringliteral">""</font>),hrefurl,hreftext; <font class="keywordtype">int</font> hrefstart,hrefend = 0,hrefnextend; 
00613     <font class="keywordflow">while</font> ((hrefnextend=<a class="code" href="utilities_8cc.html#a58">HTML_get_href</a>(*(de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()),hrefend,hrefurl,hreftext,&amp;hrefstart))&gt;=0) {
00614       <font class="keywordflow">if</font> (hrefstart&gt;hrefend) textstr += de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()-&gt;<a class="code" href="classString.html#a51">at</a>(hrefend,hrefstart-hrefend);
00615       hrefurl = <a class="code" href="utilities_8cc.html#a31">absurl</a>(basedir+<a class="code" href="dil2al_8hh.html#a34">RELLISTSDIR</a>,hrefurl);
00616       textstr += <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(hrefurl,hreftext);
00617       hrefend = hrefnextend;
00618     }
00619     <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()-&gt;<a class="code" href="classString.html#a105">length</a>()&gt;hrefend) textstr += de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()-&gt;<a class="code" href="classString.html#a51">at</a>(hrefend,de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()-&gt;<a class="code" href="classString.html#a105">length</a>()-hrefend);
00620     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; textstr &lt;&lt; <font class="stringliteral">"\n&lt;P&gt;\n"</font>;
00621     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TEXTAREA name=\"contenttext\" rows=\"20\" cols=\"80\"&gt;\n"</font> &lt;&lt; *(de-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()) &lt;&lt; <font class="stringliteral">"\n&lt;/TEXTAREA&gt;\n&lt;P&gt;\n"</font>;
00622   }
00623   <font class="comment">// close FORM</font>
00624   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;BR&gt;&lt;INPUT type=\"submit\" value=\"Process Content\"&gt; &lt;INPUT type=\"reset\"&gt;&lt;/FORM&gt;\n"</font>;
00625 }
00626 
<a name="l00627"></a><a class="code" href="diladmin_8cc.html#a8">00627</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a8">generate_modify_element_FORM_interface_DIL_Superiors</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * sup, <a class="code" href="classString.html">String</a> dilstr, <font class="keywordtype">bool</font> isplanoutcome = <font class="keyword">false</font>, <a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup = NULL) {
00628   <font class="comment">// shows superior data (where available) and provides input tags for data</font>
00629   <font class="comment">// entry</font>
00630   <font class="keywordflow">if</font> (!sup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"*WARNING - This does not appear to be a valid reference!*\n"</font>;
00631   <font class="keywordflow">else</font> {
00632     <font class="keywordflow">if</font> (sup-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()) {
00633       <a class="code" href="classString.html">String</a> suptext(*(sup-&gt;<a class="code" href="classDIL__entry.html#a16">Entry_Text</a>()));
00634       <a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(suptext);
00635       <a class="code" href="utilities_8cc.html#a81">remove_whitespace</a>(suptext);
00636       <a class="code" href="utilities_8cc.html#a78">Elipsis_At</a>(suptext,hierarchyexcerptlength);
00637       <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; suptext &lt;&lt; <font class="charliteral">'\n'</font>;
00638     } <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>;
00639   }
00640   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;BR&gt;&lt;TABLE&gt;\n&lt;TR&gt;&lt;TD&gt;"</font>;
00641   <font class="keywordflow">if</font> (isplanoutcome) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"likelihood&lt;TD&gt;= "</font>;
00642   <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"relevance&lt;TD&gt;= "</font>;
00643   <font class="keywordflow">if</font> (dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;relevance,<font class="stringliteral">"%.2f "</font>);
00644   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".relevance\" maxlength=5&gt;&lt;TD&gt;(0.0 = unspecified)\n&lt;TR&gt;&lt;TD&gt;unbounded importance&lt;TD&gt;= "</font>;
00645   <font class="keywordflow">if</font> (dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;unbounded,<font class="stringliteral">"%.2f "</font>);
00646   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".unbounded\" maxlength=5&gt;&lt;TD&gt;(0.0 = unspecified)\n&lt;TR&gt;&lt;TD&gt;bounded importance&lt;TD&gt;= "</font>;
00647   <font class="keywordflow">if</font> (dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;bounded,<font class="stringliteral">"%.2f "</font>);
00648   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".bounded\" maxlength=5&gt;&lt;TD&gt;(0.0 = unspecified)\n&lt;TR&gt;&lt;TD&gt;target date&lt;TD&gt;= "</font>;
00649   <font class="keywordtype">bool</font> tdvariable = <font class="keyword">true</font>;
00650   <font class="keywordflow">if</font> (dilsup) {
00651     tdvariable = (dilsup-&gt;tdproperty()!=<a class="code" href="dil2al_8hh.html#a29">DILSUPS_TDPROP_FIXED</a>);
00652     <font class="keywordflow">if</font> (dilsup-&gt;targetdate()==<a class="code" href="dil2al_8hh.html#a26">DILSUPS_TD_UNSPECIFIED</a>) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"unspecified"</font>;
00653     <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,dilsup-&gt;targetdate());
00654   }
00655   <font class="keywordflow">if</font> (tdvariable) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".targetdate\" maxlength=12&gt;"</font>;
00656   <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;(FIXED)"</font>;
00657   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;( -1 = unspecified) set property "</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a74">HTML_put_form_radio</a>(dilstr+<font class="stringliteral">".fixed"</font>,<font class="stringliteral">"fixed"</font>,<font class="stringliteral">"fixed"</font>,!tdvariable) &lt;&lt; <font class="charliteral">' '</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a74">HTML_put_form_radio</a>(dilstr+<font class="stringliteral">".fixed"</font>,<font class="stringliteral">"variable"</font>,<font class="stringliteral">"variable"</font>,tdvariable) &lt;&lt; <font class="stringliteral">"\n&lt;TR&gt;&lt;TD&gt;computed urgency&lt;TD&gt;= "</font>;
00658   <font class="keywordflow">if</font> (dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;urgency,<font class="stringliteral">"%.2f "</font>);
00659   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".urgency\" maxlength=5&gt;&lt;TD&gt;(0.0 = unspecified)\n&lt;TR&gt;&lt;TD&gt;computed priority&lt;TD&gt;= "</font>;
00660   <font class="keywordflow">if</font> (dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;priority,<font class="stringliteral">"%.2f "</font>);
00661   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;TD&gt;&lt;INPUT type=\"text\" name=\""</font> &lt;&lt; dilstr &lt;&lt; <font class="stringliteral">".priority\" maxlength=5&gt;&lt;TD&gt;(0.0 = unspecified)\n"</font>;
00662   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/TABLE&gt;\n"</font>;
00663 }
00664 
<a name="l00665"></a><a class="code" href="diladmin_8cc.html#a9">00665</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a9">generate_modify_element_FORM_interface_DIL_entry_parameters</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * de) { <font class="comment">//, Detailed_Items_List &amp; dilist) {</font>
00666   <font class="comment">// generates FORM components specific to editing the parameter elements of</font>
00667   <font class="comment">// a DIL entry</font>
00668   <font class="keywordtype">bool</font> isplanoutcome = (de-&gt;<a class="code" href="classDIL__entry.html#a21">Is_Plan_Entry</a>()==<a class="code" href="dil2al_8hh.html#a14">PLAN_ENTRY_TYPE_OUTCOME</a>);
00669   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;FORM METHOD=\"POST\" ACTION=\"/cgi-bin/dil2al\"&gt;&lt;INPUT type=\"hidden\" name=\"dil2al\" value=\"MEi\"&gt;\n&lt;P&gt;\n"</font>;
00670   <font class="comment">// ID</font>
00671   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;B&gt;DIL ID# "</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"&lt;/B&gt; Parameters &lt;INPUT type=\"hidden\" name=\"DILID\" value=\""</font> &lt;&lt; de-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"\"&gt;\n&lt;P&gt;\n"</font>;
00672   <font class="comment">// ***I can add an interface to edit topic information here</font>
00673   <font class="comment">// Current superiors/projects that may be removed</font>
00674   <a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup = de-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0);
00675   <font class="keywordflow">if</font> (!dilsup) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No current superior DIL entry references.\n&lt;P&gt;\n"</font>;
00676   <font class="keywordflow">else</font> {
00677     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;U&gt;Current superior DIL ID references&lt;/U&gt;:\n&lt;P&gt;\n&lt;OL&gt;\n"</font>;
00678     <font class="keywordflow">for</font> (; (dilsup); dilsup = dilsup-&gt;Next()) {
00679       <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;LI&gt;(remove &lt;INPUT type=\"checkbox\" name=\"suprm__EQ__"</font> &lt;&lt; dilsup-&gt;al.title &lt;&lt; <font class="stringliteral">"\"&gt;) "</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(dilsup-&gt;al.file,dilsup-&gt;al.title) &lt;&lt; <font class="stringliteral">": "</font>;
00680       <a class="code" href="diladmin_8cc.html#a8">generate_modify_element_FORM_interface_DIL_Superiors</a>(dilsup-&gt;Superiorbyid(),dilsup-&gt;al.title,isplanoutcome,dilsup);
00681     }
00682     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/OL&gt;\n&lt;P&gt;\nSelect references above to remove.\n&lt;P&gt;\n"</font>;
00683   }
00684   <font class="comment">// Possible superiors to add</font>
00685   <a class="code" href="classString.html">String</a> dilrefsupstr;
00686   <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(dilref,dilrefsupstr,<font class="keyword">false</font>)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No superior DIL entries in "</font> &lt;&lt; dilref &lt;&lt; <font class="stringliteral">" for possible addition.\n&lt;P&gt;\n"</font>;
00687   <font class="keywordflow">else</font> {
00688     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;U&gt;DIL IDs referenced in "</font> &lt;&lt; dilref &lt;&lt; <font class="stringliteral">"&lt;/U&gt;:\n&lt;P&gt;\n&lt;OL&gt;\n"</font>;
00689     dilrefsupstr.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"Current[^f]*file..."</font>),<font class="stringliteral">""</font>);
00690     <a class="code" href="classStringList.html">StringList</a> dilrefsups(dilrefsupstr,<font class="charliteral">'\n'</font>); <a class="code" href="classString.html">String</a> supid;
00691     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;dilrefsups.<a class="code" href="classStringList.html#a10">length</a>(); i++) {
00692       supid = dilrefsups[i].after(<font class="charliteral">'#'</font>);
00693       <a class="code" href="classDIL__ID.html">DIL_ID</a> did(supid);
00694       <font class="keywordflow">if</font> (did.<a class="code" href="classDIL__ID.html#a17">valid</a>()) {
00695         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;LI&gt;"</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a68">HTML_put_href</a>(dilrefsups[i],supid) &lt;&lt; <font class="stringliteral">": "</font>;
00696         <a class="code" href="diladmin_8cc.html#a8">generate_modify_element_FORM_interface_DIL_Superiors</a>(de-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(did),supid,isplanoutcome);
00697       }
00698     }
00699     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/OL&gt;\n&lt;P&gt;\n&lt;INPUT type=\"checkbox\" name=\"dilrefsups\"&gt; Add these as superior DIL entries.\n&lt;P&gt;\n"</font>;
00700   }
00701   <font class="comment">// close FORM</font>
00702   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;BR&gt;&lt;INPUT type=\"submit\" value=\"Process Parameters\"&gt; &lt;INPUT type=\"reset\"&gt;&lt;/FORM&gt;\n"</font>;
00703 }
00704 
<a name="l00705"></a><a class="code" href="diladmin_8cc.html#a10">00705</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a10">generate_modify_element_FORM_interface</a>(<a class="code" href="classStringList.html">StringList</a> * qlist = NULL) {
00706 <font class="comment">// generates an HTML FORM interface that enables modification of elements</font>
00707 <font class="comment">// of a DIL entry. The DIL entry is given by a DILID variable in qlist.</font>
00708   <font class="keywordtype">int</font> dilididx = qlist-&gt;contains(<font class="stringliteral">"DILID"</font>);
00709   <font class="keywordflow">if</font> (dilididx&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00710   <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid((*qlist)[dilididx].after(<font class="charliteral">'='</font>));
00711   <font class="keywordflow">if</font> (!dilid.<a class="code" href="classDIL__ID.html#a17">valid</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00712   <font class="keywordflow">if</font> (calledbyforminput) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/PRE&gt;&lt;!-- "</font>; <font class="comment">// clean up HTML output (dil2al processing output can still be inspected by looking at the HTML source)</font>
00713   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
00714   <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>()&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00715   <font class="keywordflow">if</font> (!dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00716   <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>)&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00717   <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid);
00718   <font class="keywordflow">if</font> (!de) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00719   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;!-- comment out process output --&gt;\n"</font>;
00720   <a class="code" href="diladmin_8cc.html#a7">generate_modify_element_FORM_interface_DIL_entry_content</a>(de);
00721   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;P&gt;&amp;nbsp;&lt;P&gt;\n&lt;HR&gt;\n&lt;P&gt;\n"</font>;
00722   <a class="code" href="diladmin_8cc.html#a9">generate_modify_element_FORM_interface_DIL_entry_parameters</a>(de); <font class="comment">//,dilist);</font>
00723   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;P&gt;&amp;nbsp;&lt;P&gt;\n"</font>;
00724   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00725 }
00726 
<a name="l00727"></a><a class="code" href="diladmin_8cc.html#a11">00727</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a11">modify_element_through_FORM_interface_DIL_Superiors</a>(<font class="keywordtype">int</font> &amp; dilididx, <a class="code" href="classStringList.html">StringList</a> * qlist, <a class="code" href="classString.html">String</a> supid, <a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup) {
00728 <font class="comment">// test if specific parameters of a DIL_Superiors object should be</font>
00729 <font class="comment">// modified and make the modification if possible</font>
00730 <font class="comment">// Note that according to the reference at</font>
00731 <font class="comment">// http://www.w3.org/TR/REC-html40/interact/forms.html#successful-controls</font>
00732 <font class="comment">// an empty text input field may or may not be treated as a successful</font>
00733 <font class="comment">// control by the user agent (e.g. w3m), so that particular user agents</font>
00734 <font class="comment">// or their particular versions may behave differently. For that reason,</font>
00735 <font class="comment">// even if the QUERY_STRING contains some of the parameter tags tested</font>
00736 <font class="comment">// below, there must also be a test for a valid value.</font>
00737   <font class="keywordflow">if</font> ((!qlist) || (!dilsup)) <font class="keywordflow">return</font>;
00738   <font class="keywordtype">bool</font> validvalue;
00739   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".relevance="</font>))&gt;=0) {
00740     dilsup-&gt;relevance = <a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),dilsup-&gt;relevance,&amp;validvalue);
00741     <font class="keywordflow">if</font> (validvalue &amp;&amp; verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".relevance = "</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;relevance,<font class="stringliteral">"%.2f\n"</font>);
00742   }
00743   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".unbounded="</font>))&gt;=0) {
00744     dilsup-&gt;unbounded = <a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),dilsup-&gt;unbounded,&amp;validvalue);
00745     <font class="keywordflow">if</font> (validvalue &amp;&amp; verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".unbounded = "</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;unbounded,<font class="stringliteral">"%.2f\n"</font>);
00746   }
00747   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".bounded="</font>))&gt;=0) {
00748     dilsup-&gt;bounded = <a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),dilsup-&gt;bounded,&amp;validvalue);
00749     <font class="keywordflow">if</font> (validvalue &amp;&amp; verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".bounded = "</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;bounded,<font class="stringliteral">"%.2f\n"</font>);
00750   }
00751   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".targetdate="</font>))&gt;=0) {
00752     <a class="code" href="classString.html">String</a> newtargetdate = (*qlist)[dilididx].after(<font class="charliteral">'='</font>);
00753     <font class="keywordflow">if</font> ((!newtargetdate.<a class="code" href="classString.html#a106">empty</a>()) &amp;&amp; (newtargetdate.<a class="code" href="classString.html#a42">matches</a>(BRXint))) {
00754       <font class="keywordflow">if</font> (!dilsup-&gt;set_targetdate(<a class="code" href="utilities_8cc.html#a23">time_stamp_time</a>(newtargetdate))) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify targetdate, targetdate property=FIXED.\n"</font>;
00755       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".targetdate = "</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M\n"</font>,dilsup-&gt;targetdate());
00756     }
00757   }
00758   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".fixed=fixed"</font>))&gt;=0) {
00759     dilsup-&gt;set_tdproperty(<a class="code" href="dil2al_8hh.html#a29">DILSUPS_TDPROP_FIXED</a>);
00760     <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".tdproperty = fixed\n"</font>;
00761   }
00762   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".fixed=variable"</font>))&gt;=0) {
00763     dilsup-&gt;set_tdproperty(0);
00764     <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".tdproperty = variable\n"</font>;
00765   }
00766   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".urgency="</font>))&gt;=0) {
00767     dilsup-&gt;urgency = <a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),dilsup-&gt;urgency,&amp;validvalue);
00768     <font class="keywordflow">if</font> (validvalue &amp;&amp; verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".urgency = "</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;urgency,<font class="stringliteral">"%.2f\n"</font>);
00769   }
00770   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;<a class="code" href="classStringList.html#a12">contains</a>(supid+<font class="stringliteral">".priority="</font>))&gt;=0) {
00771     dilsup-&gt;priority = <a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),dilsup-&gt;priority,&amp;validvalue);
00772     <font class="keywordflow">if</font> (validvalue &amp;&amp; verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  "</font> &lt;&lt; supid &lt;&lt; <font class="stringliteral">".priority = "</font> &lt;&lt; <a class="code" href="classString.html">String</a>((<font class="keywordtype">double</font>) dilsup-&gt;priority,<font class="stringliteral">"%.2f\n"</font>);
00773   }
00774 }
00775 
<a name="l00776"></a><a class="code" href="diladmin_8cc.html#a12">00776</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a12">modify_element_through_FORM_interface</a>(<a class="code" href="classStringList.html">StringList</a> * qlist = NULL) {
00777 <font class="comment">// receives information about element modifications in a DIL entry through</font>
00778 <font class="comment">// an HTML FORM interface. The DIL entry is given by a DILID variable in qlist.</font>
00779   <font class="keywordflow">if</font> (!qlist) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00780   <font class="comment">// for (int i = 0; i&lt;qlist-&gt;length(); i++) VOUT &lt;&lt; (*qlist)[i] &lt;&lt; '\n';</font>
00781   <font class="keywordtype">int</font> dilididx = qlist-&gt;contains(<font class="stringliteral">"DILID"</font>);
00782   <font class="keywordflow">if</font> (dilididx&lt;0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00783   <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid((*qlist)[dilididx].after(<font class="charliteral">'='</font>));
00784   <font class="keywordflow">if</font> (!dilid.<a class="code" href="classDIL__ID.html#a17">valid</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00785   <font class="comment">// content modifications</font>
00786   <font class="keywordtype">double</font> valuation = 0.0, completion = 0.0, required = 0.0;
00787   <font class="keywordtype">bool</font> updateval = <font class="keyword">false</font>, updatecomp = <font class="keyword">false</font>, updatereq = <font class="keyword">false</font>;
00788   <a class="code" href="classString.html">String</a> valstr;
00789   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;contains(<font class="stringliteral">"valuation="</font>))&gt;=0) valuation=<a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),valuation,&amp;updateval); <font class="comment">// modify valuation</font>
00790   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;contains(<font class="stringliteral">"completion="</font>))&gt;=0) completion=<a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),completion,&amp;updatecomp); <font class="comment">// modify completion ratio</font>
00791   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;contains(<font class="stringliteral">"required="</font>))&gt;=0) required=<a class="code" href="utilities_8cc.html#a82">get_double</a>((*qlist)[dilididx].after(<font class="charliteral">'='</font>),required,&amp;updatereq); <font class="comment">// modify time required</font>
00792   <font class="keywordflow">if</font> (updateval || updatecomp || updatereq) {
00793     <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a13">update_DIL_entry_elements</a>(dilid.<a class="code" href="classDIL__ID.html#a15">chars</a>(),valuation,updateval,completion,updatecomp,required,updatereq)) {
00794       <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify content elements of DIL entry\n"</font>;
00795       <font class="keywordflow">return</font> <font class="keyword">false</font>;
00796     }
00797     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00798   }
00799   <font class="comment">// parameters modifications</font>
00800   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist; <font class="keywordtype">int</font> entrynum;
00801   <a class="code" href="dil2al_8hh.html#a5">DIL2AL_CONDITIONAL_ERROR_RETURN</a>((entrynum=dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>())&lt;=0,<font class="stringliteral">"No DIL entries found in "</font>+idfile+<font class="stringliteral">" in modify_element_through_FORM_interface()\n"</font>);
00802   <a class="code" href="classDIL__entry.html">DIL_entry</a> * de;
00803   <a class="code" href="dil2al_8hh.html#a5">DIL2AL_CONDITIONAL_ERROR_RETURN</a>(!(de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid)),<font class="stringliteral">"The DIL entry "</font>+dilid.<a class="code" href="classDIL__ID.html#a14">str</a>()+<font class="stringliteral">" does not appear to exist in modify_element_through_FORM_interface()\n"</font>);
00804   <a class="code" href="classPLLRoot.html">PLLRoot&lt;DIL_Superiors&gt;</a> addsups;
00805   <font class="comment">// detect add</font>
00806   <font class="keywordflow">if</font> ((dilididx=qlist-&gt;contains(<font class="stringliteral">"dilrefsups="</font>))&gt;=0) { <font class="comment">// add superiors specified in dilref</font>
00807     <a class="code" href="classString.html">String</a> dilrefsupstr;
00808     <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a39">read_file_into_String</a>(dilref,dilrefsupstr,<font class="keyword">false</font>)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No superior DIL entries in "</font> &lt;&lt; dilref &lt;&lt; <font class="stringliteral">" for possible addition.\n"</font>;
00809     <font class="keywordflow">else</font> {
00810       dilrefsupstr.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"Current[^f]*file..."</font>),<font class="stringliteral">""</font>);
00811       <a class="code" href="classStringList.html">StringList</a> dilrefsups(dilrefsupstr,<font class="charliteral">'\n'</font>); <a class="code" href="classString.html">String</a> supid;
00812       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;dilrefsups.<a class="code" href="classStringList.html#a10">length</a>(); i++) {
00813         supid = dilrefsups[i].after(<font class="charliteral">'#'</font>);
00814         <a class="code" href="classDIL__ID.html">DIL_ID</a> did(supid);
00815         <font class="keywordflow">if</font> (did.<a class="code" href="classDIL__ID.html#a17">valid</a>()) {
00816           <a class="code" href="classDIL__entry.html">DIL_entry</a> * sup = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(did);
00817           <font class="keywordflow">if</font> (sup) {
00818             <a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup = <font class="keyword">new</font> <a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a>(*de);
00819             dilsup-&gt;al.title = supid;
00820             dilsup-&gt;al.file = <a class="code" href="utilities_8cc.html#a31">absurl</a>(idfile,<font class="charliteral">'#'</font>+supid);
00821             <a class="code" href="diladmin_8cc.html#a11">modify_element_through_FORM_interface_DIL_Superiors</a>(dilididx,qlist,supid,dilsup);
00822             addsups.<a class="code" href="classPLLRoot.html#a8">link_before</a>(dilsup);
00823             <font class="keywordflow">continue</font>;
00824           }
00825         }
00826         <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; supid &lt;&lt; <font class="stringliteral">"does not appear to be a valid reference!\n"</font>;
00827       }
00828     }
00829   }
00830   <font class="comment">// detect remove</font>
00831   <a class="code" href="classStringList.html">StringList</a> removesups; <font class="keywordtype">int</font> removesupsnum = 0;
00832   <font class="keywordflow">for</font> (<a class="code" href="classStringList.html">StringList</a> * qlistptr = qlist-&gt;List_Index(qlist-&gt;contains(<font class="stringliteral">"suprm="</font>)); (qlistptr); ) {
00833     removesups[removesupsnum] = (*qlistptr)[0].after(<font class="charliteral">'='</font>);
00834     <font class="keywordflow">if</font> (removesups[removesupsnum].<a class="code" href="classStringList.html#a12">contains</a>(<font class="charliteral">'='</font>)) removesups[removesupsnum] = removesups[removesupsnum].before(<font class="charliteral">'='</font>);
00835     removesupsnum++;
00836     <font class="keywordflow">if</font> (!(qlistptr=qlistptr-&gt;<a class="code" href="classStringList.html#a6">get_Next</a>())) <font class="keywordflow">break</font>;
00837     qlistptr = qlistptr-&gt;<a class="code" href="classStringList.html#a7">List_Index</a>(qlistptr-&gt;<a class="code" href="classStringList.html#a12">contains</a>(<font class="stringliteral">"suprm="</font>));
00838   }
00839   <font class="comment">// detect modify</font>
00840   <font class="keywordflow">for</font> (<a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup = de-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0); dilsup; dilsup = dilsup-&gt;Next())
00841     <a class="code" href="diladmin_8cc.html#a11">modify_element_through_FORM_interface_DIL_Superiors</a>(dilididx,qlist,dilsup-&gt;al.title,dilsup);
00842   <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a14">update_DIL_entry_parameter_elements</a>(dilist,dilid,addsups,&amp;removesups,removesupsnum)) {
00843     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify parameter elements of DIL entry\n"</font>;
00844     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00845   }
00846   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00847 }
00848 
<a name="l00849"></a><a class="code" href="diladmin_8cc.html#a13">00849</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a13">update_DIL_entry_elements</a>(<a class="code" href="classString.html">String</a> dilid, <font class="keywordtype">double</font> valuation, <font class="keywordtype">bool</font> updateval, <font class="keywordtype">double</font> completion, <font class="keywordtype">bool</font> updatecomp, <font class="keywordtype">double</font> required, <font class="keywordtype">bool</font> updatereq, time_t tdiff = -1) {
00850   <font class="comment">// update the elements of all instances of dilid, as</font>
00851   <font class="comment">// referenced in the DIL-by-ID file</font>
00852   <font class="comment">// When tdiff&gt;=0, this is used to indicate new time spent on the DIL</font>
00853   <font class="comment">// entry during a task chunk instead of the value in completion.</font>
00854   <font class="comment">// The simplest update uses the difference between current time</font>
00855   <font class="comment">// and the start time of the most recent task log chunk to compute</font>
00856   <font class="comment">// the update. More sophisticated updates apply the rules</font>
00857   <font class="comment">// specified in dil2al.html#20000815153735.1.</font>
00858   <font class="comment">// get DIL references of DIL entry</font>
00859   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist; <font class="keywordtype">int</font> entrynum;
00860   <font class="keywordflow">if</font> ((entrynum=dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>(&amp;dilid))&lt;=0) {
00861     <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in update_DIL_entry_completion_ratio(), continuing as is\n"</font>;
00862     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00863   }
00864   <font class="keywordflow">if</font> (entrynum&gt;1) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Warning - DIL entry with ID "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" occurs "</font> &lt;&lt; entrynum &lt;&lt; <font class="stringliteral">" times in "</font> &lt;&lt; idfile &lt;&lt; <font class="charliteral">'\n'</font>;
00865   <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(); <font class="keywordtype">int</font> dilidx;
00866   <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__Topical__List.html">DIL_Topical_List</a>,de-&gt;<a class="code" href="classDIL__entry.html#a6">Topics</a>(0),1) {
00867     <font class="comment">// get DIL file and update completion ratio of entry</font>
00868     <font class="keywordflow">if</font> ((dilidx=<a class="code" href="utilities_8cc.html#a40">get_file_in_list</a>(e-&gt;dil.file,dilist.<a class="code" href="classText__File__Buffers.html#m0">tf</a>,dilist.<a class="code" href="classText__File__Buffers.html#m1">tfname</a>,dilist.<a class="code" href="classText__File__Buffers.html#m2">tfnum</a>))&lt;0)
00869       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" not found in update_DIL_entry_elements(), continuing as is\n"</font>;
00870     <font class="keywordflow">else</font> {
00871       <font class="comment">// find DIL ID</font>
00872       <a class="code" href="classString.html">String</a> &amp; dilstr = dilist.<a class="code" href="classText__File__Buffers.html#m0">tf</a>[dilidx];
00873       <font class="keywordtype">int</font> dilpos, dilentryend; <a class="code" href="classString.html">String</a> cellparams, cellcontent;
00874       <font class="keywordflow">if</font> ((dilpos=dilstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"[&lt;]!--[        ]*dil2al:[      ]*DIL begin[    ]*--[&gt;]"</font>),<a class="code" href="classString.html#s2s1">String::SEARCH_END</a>))&lt;0) {
00875         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing DIL begin marker in DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" in update_DIL_entry_elements(), continuing as is\n"</font>;
00876         <font class="keywordflow">continue</font>;
00877       }
00878       <font class="keywordflow">if</font> ((dilpos=dilstr.<a class="code" href="classString.html#a26">index</a>(<a class="code" href="classBigRegex.html">BigRegex</a>((<font class="stringliteral">"[&lt;][Aa][      ]+[Nn][Aa][Mm][Ee][     ]*=[    ]*\""</font>+<a class="code" href="utilities_8cc.html#a18">RX_Search_Safe</a>(dilid))+<font class="charliteral">'"'</font>),dilpos))&lt;0) {
00879         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL entry with ID "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" not found in DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" in update_DIL_entry_elements(), continuing as is\n"</font>;
00880         <font class="keywordflow">continue</font>;
00881       }
00882       <font class="keywordflow">if</font> ((dilentryend=<a class="code" href="utilities_8cc.html#a54">HTML_get_table_cell</a>(dilstr,dilpos,cellparams,cellcontent,&amp;dilpos))&lt;0) {
00883         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Missing data at DIL entry with ID "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" in update_DIL_entry_elements(), continuing as is\n"</font>;
00884         <font class="keywordflow">continue</font>;
00885       }
00886       <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Setting:\n"</font>;
00887       <font class="keywordflow">if</font> (updateval) { <font class="comment">// modify valuation</font>
00888         <a class="code" href="classString.html">String</a> vstr(valuation,<font class="stringliteral">"_1 %4.2f"</font>);
00889         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  valuation = "</font> &lt;&lt; vstr &lt;&lt; <font class="charliteral">'\n'</font>;
00890         cellcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(valuation:[^-0-9  ]*\\)[  ]*\\([0-9]+[.][0-9]+\\|-\\)"</font>),vstr,<font class="charliteral">'_'</font>);
00891       }
00892       <font class="keywordflow">if</font> (updatecomp) { <font class="comment">// modify completion ratio</font>
00893         <a class="code" href="classString.html">String</a> crstr;
00894         <font class="keywordflow">if</font> (tdiff&gt;=0) {
00895           <font class="keywordflow">if</font> (!updatereq) {
00896             cellparams = cellcontent.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"time[      ]+required[^:   ]*[:    ]"</font>)); <a class="code" href="utilities_8cc.html#a62">HTML_remove_tags</a>(cellparams);
00897             required = atof(cellparams);
00898           }
00899           crstr = cellparams.<a class="code" href="classString.html#a76">after</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"completion[        ]+ratio[^:      ]*[:    ]"</font>));
00900           completion = atof(crstr);
00901           <font class="keywordflow">if</font> (completion&lt;0.0) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL entry with ID "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" has a completion status with special meaning that cannot be updated in update_DIL_entry_elements(), continuing as is\n"</font>;
00902           <font class="keywordflow">else</font> {
00903             <font class="keywordflow">if</font> (required==0.0) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: No time required indicated for DIL entry with ID "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" in DIL file "</font> &lt;&lt; e-&gt;dil.file &lt;&lt; <font class="stringliteral">" in update_DIL_entry_elements(), continuing as is\n"</font>;
00904             <font class="keywordflow">else</font> completion += (((double) tdiff)/(ceil(required*60.0)*60.0));
00905           }
00906         }
00907         crstr = <a class="code" href="classString.html">String</a>(completion,<font class="stringliteral">"_1 %4.2f"</font>);
00908         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  completion ratio = "</font> &lt;&lt; crstr &lt;&lt; <font class="charliteral">'\n'</font>;
00909         cellcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(completion[       ]+ratio:[^-0-9  ]*\\)[  ]*\\([0-9]+[.][0-9]+\\|-\\)"</font>),crstr,<font class="charliteral">'_'</font>);
00910       }
00911       <font class="keywordflow">if</font> (updatereq) { <font class="comment">// modify required time</font>
00912         <a class="code" href="classString.html">String</a> rstr(required,<font class="stringliteral">"_1 %4.2f"</font>);
00913         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"  required = "</font> &lt;&lt; rstr &lt;&lt; <font class="charliteral">'\n'</font>;
00914         cellcontent.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<font class="stringliteral">"\\(time[     ]+required:[^-0-9       ]*\\)[  ]*\\([0-9]+[.][0-9]+\\|-\\)"</font>),rstr,<font class="charliteral">'_'</font>);
00915       }
00916       <font class="comment">// paste modified DIL entry into topical DIL file</font>
00917       <a class="code" href="classString.html">String</a> newdilstr(dilstr.<a class="code" href="classString.html#a58">before</a>(dilpos));
00918       newdilstr += <a class="code" href="utilities_8cc.html#a65">HTML_put_table_cell</a>(<font class="stringliteral">""</font>,cellcontent,<font class="keyword">true</font>) + dilstr.<a class="code" href="classString.html#a70">from</a>(dilentryend);
00919       <font class="comment">// write modified DIL file</font>
00920       <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(e-&gt;dil.file,newdilstr,<font class="stringliteral">"DIL ``"</font>+e-&gt;dil.title+<font class="stringliteral">"''"</font>)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00921     }
00922   }
00923 <font class="preprocessor">#ifdef DEBUG</font>
00924 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Completed DIL updates\n"</font>;
00925 <font class="preprocessor">#endif</font>
00926 <font class="preprocessor"></font>  <font class="keywordflow">return</font> <font class="keyword">true</font>;
00927 }
00928 
<a name="l00929"></a><a class="code" href="diladmin_8cc.html#a14">00929</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a14">update_DIL_entry_parameter_elements</a>(<a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> &amp; dilist, <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid, <a class="code" href="classPLLRoot.html">PLLRoot&lt;DIL_Superiors&gt;</a> &amp; addsups, <a class="code" href="classStringList.html">StringList</a> * removesups, <font class="keywordtype">int</font> removesupsnum) {
00930   <font class="comment">// update elements of the DIL-by-ID parameters file</font>
00931   <font class="comment">// target date modification is currently a special case, as described in</font>
00932   <font class="comment">// the modify_DIL_entry_target_date() and modify_DIL_group_target_dates()</font>
00933   <font class="comment">// and is therefore not included in this function</font>
00934   <font class="keywordtype">int</font> entrynum = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
00935   <font class="keywordflow">if</font> (entrynum&lt;1) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00936   <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid);
00937   <font class="keywordflow">if</font> (!de) {
00938     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"The DIL entry with ID "</font> &lt;&lt; dilid.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"was not found in the Detailed_Items_List in update_DIL_entry_parameter_elements()\n"</font>;
00939     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00940   }
00941   <font class="comment">// Add superiors referenced in dilref</font>
00942   <font class="keywordflow">if</font> (addsups.<a class="code" href="classPLLRoot.html#a2">head</a>()) {
00943     <font class="comment">// modify project data to add the superiors</font>
00944     <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>) {
00945       <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" parameters not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in update_DIL_entry_parameter_elements()\n"</font>;
00946       <font class="keywordflow">return</font> <font class="keyword">false</font>;
00947     }
00948     <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Adding superior references from "</font> &lt;&lt; dilref &lt;&lt; <font class="stringliteral">":\n"</font>;
00949     <font class="keywordflow">for</font> (<a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a> * dilsup = addsups.<a class="code" href="classPLLRoot.html#a2">head</a>(); dilsup; dilsup = dilsup-&gt;Next()) {
00950       <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>-&gt;<a class="code" href="classDIL__entry__parameters.html#a3">project_append</a>(dilsup-&gt;al.file,dilsup-&gt;al.title,dilsup-&gt;relevance,dilsup-&gt;unbounded,dilsup-&gt;bounded,dilsup-&gt;targetdate(),dilsup-&gt;tdproperty(),dilsup-&gt;urgency,dilsup-&gt;priority)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to append a superior reference with ID "</font> &lt;&lt; dilsup-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
00951       <font class="keywordflow">else</font> <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"     "</font> &lt;&lt; dilsup-&gt;al.title &lt;&lt; <font class="stringliteral">" added\n"</font>;
00952     }
00953   }
00954   <font class="comment">// Remove superiors indicated in removesups</font>
00955   <font class="keywordflow">if</font> ((removesupsnum&gt;0) &amp;&amp; (removesups)) {
00956     <font class="keywordflow">if</font> (verbose) {
00957       <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Removing superior references:\n"</font>;
00958       <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;removesupsnum; i++) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"     "</font> &lt;&lt; (*removesups)[i] &lt;&lt; <font class="charliteral">'\n'</font>;
00959     }
00960     <font class="comment">// modify project data to remove the superiors</font>
00961     <font class="keywordflow">if</font> (!de-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)) {
00962       <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"The DIL entry with ID "</font> &lt;&lt; dilid.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" has no superiors, therefore none can be removed.\n"</font>;
00963       <font class="keywordflow">return</font> <font class="keyword">false</font>;
00964     }
00965     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;removesupsnum; i++) {
00966       <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a>,de-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0),1) <font class="keywordflow">if</font> (e-&gt;al.title==(*removesups)[i]) {
00967         e-&gt;remove();
00968         <font class="keywordflow">if</font> (verbose) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"     "</font> &lt;&lt; (*removesups)[i] &lt;&lt; <font class="stringliteral">" removed\n"</font>;
00969         <font class="keywordflow">break</font>;
00970       }
00971     }
00972   }
00973   <font class="keywordflow">return</font> dilist.<a class="code" href="classDetailed__Items__List.html#a5">Write_to_File</a>();
00974 }
00975 
<a name="l00976"></a><a class="code" href="diladmin_8cc.html#a15">00976</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a16">modify_DIL_entry_target_date</a>(<a class="code" href="classDIL__ID.html">DIL_ID</a> dilid, time_t tdate, <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> &amp; dilist) {
00977 <font class="comment">// modify the target date of dilid in all self- or superior-</font>
00978 <font class="comment">// references (dilid can be initialized from a String)</font>
00979 <font class="comment">// Target dates are modified locally, without regard to target</font>
00980 <font class="comment">// dates of superiors. If no target date was previously given,</font>
00981 <font class="comment">// a set of parameters is created. The target date -1 indicates</font>
00982 <font class="comment">// that target dates should be set to "?", i.e. unspecified.</font>
00983 <font class="comment">// If dilist is empty, Get_All_DIL_ID_File_Parameters() is called.</font>
00984 <font class="comment">// Modifications are made only if tdate differs from Target_Date().</font>
00985 <font class="comment">// (Note: Use `modify_DIL_group_target_date()' to update the</font>
00986 <font class="comment">// target date with minimal disturbances of relationships</font>
00987 <font class="comment">// between dependencies and superiors within a group of DIL</font>
00988 <font class="comment">// entries.)</font>
00989 <font class="comment">// *** perhaps there should be a way to `force' modification if</font>
00990 <font class="comment">//     it is used to ensure that the target date is local</font>
00991         <font class="comment">// get DIL parameter sets</font>
00992         <font class="keywordtype">int</font> entrynum;
00993 <font class="preprocessor">#ifdef DEBUGTIER1</font>
00994 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER1] Modifying for DIL#"</font> &lt;&lt; dilid.<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" to tdate="</font> &lt;&lt; tdate &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,tdate) &lt;&lt; <font class="stringliteral">")\n"</font>;
00995 <font class="preprocessor">#endif</font>
00996 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (!dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) entrynum=dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
00997         <font class="keywordflow">else</font> entrynum=dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>();
00998         <font class="keywordflow">if</font> (entrynum&lt;=0) {
00999                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"No DIL entries found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in modify_DIL_entry_target_date(), continuing as is\n"</font>;
01000                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01001         }
01002 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01003 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER2] Modification progress: 1"</font>;
01004 <font class="preprocessor">#endif</font>
01005 <font class="preprocessor"></font>        <font class="comment">// get first entry in list</font>
01006         <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>();
01007         <font class="comment">// if (!de) return false; // should never happen when entrynum&gt;0</font>
01008         <a class="code" href="classDIL__entry.html">DIL_entry</a> * did = de-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid);
01009         <font class="keywordflow">if</font> (!did) {
01010                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in modify_DIL_entry_target_date(), continuing as is\n"</font>;
01011                 <font class="keywordflow">return</font> <font class="keyword">false</font>;
01012         }
01013 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01014 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">", 2"</font>;
01015 <font class="preprocessor">#endif</font>
01016 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()!=tdate) { <font class="comment">// modify only if different</font>
01017                 <font class="keywordflow">if</font> (!did-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>) {
01018                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry "</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">" parameters not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in modify_DIL_entry_target_date(), continuing as is\n"</font>;
01019                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
01020                 }
01021 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01022 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">", 3\n"</font>;
01023 <font class="preprocessor">#endif</font>
01024 <font class="preprocessor"></font>                <font class="comment">// modify dilid target dates</font>
01025                 <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)) <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__AL__List.html">DIL_AL_List</a>,did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0),1) {
01026 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01027 <font class="preprocessor"></font>                        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"e-&gt;targetdate = tdate\n"</font>;
01028 <font class="preprocessor">#endif</font>
01029 <font class="preprocessor"></font>                        <font class="keywordflow">if</font> (!e-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; dilid &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; e-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01030                 } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tdate&gt;=0) { <font class="comment">// create self-reference for specified target date</font>
01031                         <font class="comment">// *** Modify this if the data format changes</font>
01032 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01033 <font class="preprocessor"></font>                        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"did-&gt;parameters-&gt;project_append\n"</font>;
01034 <font class="preprocessor">#endif</font>
01035 <font class="preprocessor"></font>                        did-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>-&gt;<a class="code" href="classDIL__entry__parameters.html#a3">project_append</a>(idfile+<a class="code" href="classString.html">String</a>(<font class="charliteral">'#'</font>)+did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a24">DILSUPS_UNB_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a25">DILSUPS_BND_UNSPECIFIED</a>,tdate,0,<a class="code" href="dil2al_8hh.html#a27">DILSUPS_URG_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a28">DILSUPS_PRI_UNSPECIFIED</a>);
01036                 }
01037 <font class="preprocessor">#ifdef DEBUGTIER1</font>
01038 <font class="preprocessor"></font>                <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER1] Modification performed\n"</font>;
01039 <font class="preprocessor">#endif</font>
01040 <font class="preprocessor"></font>        }
01041 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01042 <font class="preprocessor"></font>        <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">", target date already correct\n"</font>;
01043 <font class="preprocessor">#endif</font>
01044 <font class="preprocessor"></font><font class="preprocessor">#ifdef DEBUG</font>
01045 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Modified DIL entry target date\n"</font>;
01046 <font class="preprocessor">#endif</font>
01047 <font class="preprocessor"></font>        <font class="keywordflow">return</font> <font class="keyword">true</font>;
01048 }
01049 
<a name="l01050"></a><a class="code" href="diladmin_8cc.html#a16">01050</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a16">modify_DIL_entry_target_date</a>(<a class="code" href="classDIL__ID.html">DIL_ID</a> dilid, time_t tdate) {
01051 <font class="comment">// modify the target date of dilid in all self- or superior-</font>
01052 <font class="comment">// references (dilid can be initialized from a String) and</font>
01053 <font class="comment">// write to DIL ID file</font>
01054 <font class="comment">// Target dates are modified locally, without regard to target</font>
01055 <font class="comment">// dates of superiors. If no target date was previously given,</font>
01056 <font class="comment">// a set of parameters is created. The target date -1 indicates</font>
01057 <font class="comment">// that target dates should be set to "?", i.e. unspecified.</font>
01058 <font class="comment">// Modifications are made only if tdate differs from Target_Date().</font>
01059 <font class="comment">// (Note: Use `modify_DIL_group_target_date()' to update the</font>
01060 <font class="comment">// target date with minimal disturbances of relationships</font>
01061 <font class="comment">// between dependencies and superiors within a group of DIL</font>
01062 <font class="comment">// entries.)</font>
01063         <font class="comment">// modify dilid target dates</font>
01064         <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01065         <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a16">modify_DIL_entry_target_date</a>(dilid,tdate,dilist)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01066         <font class="comment">// place new data and copy rest</font>
01067 <font class="preprocessor">#ifdef VERBOSEDEBUG</font>
01068 <font class="preprocessor"></font>        <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) {
01069                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; e-&gt;chars();
01070                 <font class="keywordflow">if</font> (e-&gt;Projects(0)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'\t'</font> &lt;&lt; e-&gt;Projects(0)-&gt;targetdate();
01071                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01072         }
01073 <font class="preprocessor">#endif</font>
01074 <font class="preprocessor"></font><font class="preprocessor">#ifdef DEBUG</font>
01075 <font class="preprocessor"></font>        <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = dilist.<a class="code" href="classDetailed__Items__List.html#a5">Write_to_File</a>();
01076         <font class="keywordflow">if</font> (res) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Modified DIL entry target date and stored to DIL ID file\n"</font>;
01077         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01078 <font class="preprocessor">#else</font>
01079 <font class="preprocessor"></font>        <font class="keywordflow">return</font> dilist.<a class="code" href="classDetailed__Items__List.html#a5">Write_to_File</a>();
01080 <font class="preprocessor">#endif</font>
01081 <font class="preprocessor"></font>}
01082 
<a name="l01083"></a><a class="code" href="diladmin_8cc.html#a17">01083</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a17">modify_DIL_group_target_dates</a>(<a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> &amp; dilgroup, <font class="keywordtype">bool</font> minfragmentation = <font class="keyword">true</font>) {
01084 <font class="comment">// Adjust the target dates of DIL entries listed in dilgroup,</font>
01085 <font class="comment">// utilizing propagation rules to minimize the number of</font>
01086 <font class="comment">// locally specified target dates where superiors can be</font>
01087 <font class="comment">// modified and are members of the group. Desired target dates</font>
01088 <font class="comment">// are specified in dilgroup.list[i]-&gt;Projects(0)-&gt;_targetdate,</font>
01089 <font class="comment">// so that they can be obtained through dilgroup.list[i]-&gt;Target_Date().</font>
01090 <font class="comment">// A target date is not changed if it is the same as the</font>
01091 <font class="comment">// entry's current Target_Date() or if -2 was specified.</font>
01092 <font class="comment">// A target date specification of -1 implies that it will be</font>
01093 <font class="comment">// set to `DILSUPS_TD_UNSPECIFIED'.</font>
01094 <font class="preprocessor">#ifdef DEBUG_REPORT_DEVIATIONS</font>
01095 <font class="preprocessor"></font>        <font class="keywordtype">int</font> tdmodifdeviations = 0;
01096 <font class="preprocessor">#endif</font>
01097 <font class="preprocessor"></font>        <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist; <a class="code" href="classDIL__entry.html">DIL_entry</a> * de, * did; time_t tdate;
01098 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01099 <font class="preprocessor"></font>        time_t * oldtargetdate;
01100         <font class="keywordflow">if</font> (!dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01101         oldtargetdate = <font class="keyword">new</font> time_t[dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>()];
01102         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>(); i++) oldtargetdate[i] = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a4">el</a>(i)-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0);
01103 <font class="preprocessor">#endif</font>
01104 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (minfragmentation) { <font class="comment">// apply minimization rules</font>
01105 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01106 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER2] Applying rules to minimize fragmentation\n"</font>;
01107 <font class="preprocessor">#endif</font>
01108 <font class="preprocessor"></font>                <font class="keywordtype">int</font> entrynum=dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01109                 <font class="keywordflow">if</font> (entrynum&lt;=0) {
01110                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"No DIL entries found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in modify_DIL_group_target_dates(), continuing as is\n"</font>;
01111                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
01112                 }
01113                 <a class="code" href="classDIL__entry.html">DIL_entry</a> * de = dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>();
01114                 <font class="comment">// sort dilgroup in reverse order of desired target dates</font>
01115                 <font class="comment">// - thus superiors with the latest target date are updated first (minimizes insulations)</font>
01116                 <a class="code" href="classDIL__entry.html">DIL_entry</a> ** e = dilgroup.<a class="code" href="classDetailed__Items__List.html#a4">Sort_by_Target_Date</a>(); <font class="comment">// traverse in reverse order, highest to lowest</font>
01117 <font class="preprocessor">                #define MODIFY_DIL_GROUP_TARGET_DATES_RETURN_WITH_CLEANUP(res) delete[] e; return res</font>
01118 <font class="preprocessor"></font>                <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>()-1; i&gt;=0; i--) <font class="keywordflow">if</font> ((tdate=e[i]-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0))&gt;=-1) { <font class="comment">// iterate through dilgroup members</font>
01119                         did = de-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(*(e[i]));
01120                         <font class="keywordflow">if</font> (!did) {
01121                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry "</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" not found in "</font> &lt;&lt; idfile &lt;&lt; <font class="stringliteral">" in modify_DIL_group_target_dates(), continuing as is\n"</font>;
01122                                 MODIFY_DIL_GROUP_TARGET_DATES_RETURN_WITH_CLEANUP(<font class="keyword">false</font>);
01123                         }
01124                         <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)) <a class="code" href="templates_8classic_8hh.html#a2">PLL_LOOP_FORWARD_NESTED</a>(<a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a>,did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0),1,pe) { <font class="comment">// iterate through corresponding dilist member superiors</font>
01125                                 <font class="comment">// Note: Do this even if did-&gt;Target_Date()==tdate to insure that</font>
01126                                 <font class="comment">//       did-&gt;Target_Date()==tdate will also be true after the</font>
01127                                 <font class="comment">//       target dates of superiors may have been modified.</font>
01128                                 <font class="comment">// *** can set local target date if pe refers to self</font>
01129                                 <font class="comment">//     once superior references are pointer parameters</font>
01130                                 <font class="comment">// set `local' target date specifications to desired target date</font>
01131                                 <font class="keywordflow">if</font> (pe-&gt;targetdate()&gt;=0) { 
01132                                         <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01133                                 } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tdate&gt;=0) {
01134                                         <font class="keywordflow">if</font> (pe-&gt;IsSelfReference()) {
01135                                                 <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Warning - Correcting self-reference without local target date in modify_DIL_group_target_dates\n()"</font>;
01136                                                 <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01137                                         } <font class="keywordflow">else</font> {
01138                                                 <a class="code" href="classDIL__ID.html">DIL_ID</a> peid(pe-&gt;al.title);
01139                                                 <a class="code" href="classDIL__entry.html">DIL_entry</a> * peg = dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(peid); <font class="comment">// can't use Superiorbyid() here, since getting in dilgroup</font>
01140                                                 time_t petdate = -1;
01141                                                 <font class="keywordflow">if</font> (peg) petdate = peg-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0); <font class="comment">// to insure that code -1 is detected</font>
01142                                                 <a class="code" href="classDIL__entry.html">DIL_entry</a> * sup = pe-&gt;Superiorbyid();
01143                                                 <font class="keywordflow">if</font> (!sup) {
01144                                                         <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: DIL entry superior with ID #"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="stringliteral">" not found in modify_DIL_group_target_dates(), continuing as is\n"</font>;
01145                                                         <font class="keywordflow">continue</font>;
01146                                                 }
01147                                                 <font class="comment">// if superior pe of e is in dilgroup with same desired TD</font>
01148                                                 <font class="comment">// then pe will take care of update (beware of loops)</font>
01149                                                 <font class="keywordflow">if</font> (petdate==tdate) <font class="keywordflow">continue</font>;
01150                                                 <font class="comment">// if pe-&gt;Target_Date() is earlier than desired</font>
01151                                                 <font class="comment">// then set desired locally (don't alter superior, since</font>
01152                                                 <font class="comment">// that could affect other dependencies of that superior)</font>
01153                                                 <font class="keywordflow">if</font> (sup-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()&lt;tdate) { <font class="comment">// insulate from superior's target date</font>
01154                                                         <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01155                                                 } <font class="keywordflow">else</font> {
01156                                                         <font class="comment">// if pe in dilgroup and pe desired &lt; e desired</font>
01157                                                         <font class="comment">// and relevance not 1.0 or unspecified then set locally</font>
01158                                                         <font class="comment">// else warn incompatibility for fully relevant dependency</font>
01159                                                         <font class="keywordflow">if</font> ((peg) &amp;&amp; (petdate&lt;tdate)) {
01160                                                                 <font class="keywordflow">if</font> ((pe-&gt;relevance&lt;1.0) &amp;&amp; (pe-&gt;relevance!=<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>)) {
01161                                                                         <font class="comment">// set locally, because superior will be set to earlier</font>
01162                                                                         <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01163                                                                         <font class="keywordflow">continue</font>;
01164                                                                 } <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Warning - earlier target date requested for superior with ID #"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="stringliteral">" than for dependency with ID # "</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" in modify_DIL_group_target_dates(), continuing\n"</font>;
01165                                                         }
01166                                                         <font class="comment">// if pe is last superior and Target_Date() is still</font>
01167                                                         <font class="comment">// &gt; desired then set locally</font>
01168                                                         <font class="keywordflow">if</font> (!pe-&gt;Next()) <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()&gt;tdate) {
01169                                                                 <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01170                                                         }
01171                                                 }
01172                                         }
01173                                 }
01174                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> (tdate&gt;=0) { <font class="comment">// unless setting to unspecified, make a self-reference</font>
01175                                 <font class="comment">// *** Modify this if the data format changes</font>
01176                                 <font class="keywordflow">if</font> (!did-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>) did-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a> = <font class="keyword">new</font> <a class="code" href="classDIL__entry__parameters.html">DIL_entry_parameters</a>(*did);
01177                                 did-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>-&gt;<a class="code" href="classDIL__entry__parameters.html#a3">project_append</a>(idfile+<font class="charliteral">'#'</font>+did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>(),<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a24">DILSUPS_UNB_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a25">DILSUPS_BND_UNSPECIFIED</a>,tdate,0,<a class="code" href="dil2al_8hh.html#a27">DILSUPS_URG_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a28">DILSUPS_PRI_UNSPECIFIED</a>);
01178                         }
01179                 }
01180                 <font class="comment">// Double-check to insure that target dates are detected as requested</font>
01181                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>()-1; i&gt;=0; i--) <font class="keywordflow">if</font> ((tdate=e[i]-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0))&gt;=0) { <font class="comment">// iterate through dilgroup members</font>
01182                         did = de-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(*(e[i]));
01183                         <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()!=tdate) {
01184 <font class="preprocessor">#ifdef DEBUG_REPORT_DEVIATIONS</font>
01185 <font class="preprocessor"></font>                                tdmodifdeviations++; <font class="comment">// useful when testing functional or rule-based approach above</font>
01186 <font class="preprocessor">#endif</font>
01187 <font class="preprocessor"></font>                                <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)) {
01188                                         <font class="keywordflow">if</font> (did-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()&gt;tdate) {
01189                                                 <font class="keywordflow">if</font> (!did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)-&gt;<a class="code" href="classDIL__AL__List.html#a7">set_targetdate</a>(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)-&gt;<a class="code" href="classDIL__AL__List.html#m0">al</a>.<a class="code" href="structfiletitle__t.html#m1">title</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01190                                                 <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Forcing target date adjustment at DIL entry #"</font> &lt;&lt; did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" superior reference "</font> &lt;&lt; did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0)-&gt;<a class="code" href="classDIL__AL__List.html#m0">al</a>.<a class="code" href="structfiletitle__t.html#m1">title</a> &lt;&lt; <font class="charliteral">'\n'</font>;
01191                                         } <font class="keywordflow">else</font> <a class="code" href="templates_8classic_8hh.html#a2">PLL_LOOP_FORWARD_NESTED</a>(<a class="code" href="dil2al_8hh.html#a22">DIL_Superiors</a>,did-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0),1,pe) { <font class="comment">// iterate through corresponding dilist member superiors</font>
01192                                                 <font class="keywordflow">if</font> (pe-&gt;targetdate() &lt; tdate) {
01193                                                         <font class="keywordflow">if</font> (!pe-&gt;set_targetdate(tdate)) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Unable to modify FIXED target date of ref.#"</font> &lt;&lt; e[i]-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">"-&gt;#"</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01194                                                         <font class="keywordflow">else</font> <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Forcing target date adjustment at DIL entry #"</font> &lt;&lt; did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" superior reference "</font> &lt;&lt; pe-&gt;al.title &lt;&lt; <font class="charliteral">'\n'</font>;
01195                                                 }
01196                                         }
01197                                 }
01198                         }
01199                 }
01200                 <font class="comment">// Final test of detected target dates achieved</font>
01201                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a6">length</a>()-1; i&gt;=0; i--) <font class="keywordflow">if</font> ((tdate=e[i]-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0))&gt;=0) <font class="comment">// iterate through dilgroup members</font>
01202                         <font class="keywordflow">if</font> (de-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(*(e[i]))-&gt;<a class="code" href="classDIL__entry.html#a12">Target_Date</a>()!=tdate) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to set target date for DIL#"</font> &lt;&lt; did-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="stringliteral">" in modify_DIL_group_target_dates(), continuing as is\n"</font>;
01203                 <font class="keyword">delete</font>[] e;
01204         } <font class="keywordflow">else</font> <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) { <font class="comment">// modify target dates directly</font>
01205                 tdate = e-&gt;Local_Target_Date(0); <font class="comment">// not using Target_Date() to insure -1 and -2 codes are detected</font>
01206                 <font class="keywordflow">if</font> (tdate&gt;=-1) <font class="keywordflow">if</font> (!<a class="code" href="diladmin_8cc.html#a16">modify_DIL_entry_target_date</a>(*e,tdate,dilist)) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01207         }
01208 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01209 <font class="preprocessor"></font>        <font class="keywordtype">int</font> i = 0;
01210         <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) {
01211                 <font class="keywordflow">if</font> (e-&gt;Local_Target_Date(0)!=oldtargetdate[i]) cout &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER2] Changed DIL entry #"</font> &lt;&lt; e-&gt;chars() &lt;&lt; <font class="stringliteral">", old="</font> &lt;&lt; oldtargetdate[i] &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,oldtargetdate[i]) &lt;&lt; <font class="stringliteral">"), new="</font> &lt;&lt; e-&gt;Local_Target_Date(0) &lt;&lt; <font class="stringliteral">" ("</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,e-&gt;Local_Target_Date(0)) &lt;&lt; <font class="stringliteral">") TD="</font> &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,e-&gt;Target_Date()) &lt;&lt; <font class="charliteral">'\n'</font>;
01212                 i++;
01213         }
01214         <font class="keyword">delete</font>[] oldtargetdate;
01215 <font class="preprocessor">#endif</font>
01216 <font class="preprocessor"></font><font class="preprocessor">#ifdef DEBUG_REPORT_DEVIATIONS</font>
01217 <font class="preprocessor"></font>        <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: [DEBUG_REPORT_DEVIATIONS] Target Date Modification Deviations = "</font> &lt;&lt; tdmodifdeviations &lt;&lt; <font class="charliteral">'\n'</font>;
01218 <font class="preprocessor">#endif</font>
01219 <font class="preprocessor"></font><font class="preprocessor">#ifdef DEBUG</font>
01220 <font class="preprocessor"></font>        <font class="keywordtype">bool</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a> = dilist.<a class="code" href="classDetailed__Items__List.html#a5">Write_to_File</a>();
01221         <font class="keywordflow">if</font> (res) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Modified DIL group target dates and stored to DIL ID file\n"</font>;
01222         <font class="keywordflow">return</font> <a class="code" href="templates_8defines_8hh.html#a11">res</a>;
01223 <font class="preprocessor">#else</font>
01224 <font class="preprocessor"></font>        <font class="keywordflow">return</font> dilist.<a class="code" href="classDetailed__Items__List.html#a5">Write_to_File</a>();
01225 <font class="preprocessor">#endif</font>
01226 <font class="preprocessor"></font><font class="comment">/*</font>
01227 <font class="comment">An alternative approach</font>
01228 <font class="comment">-----------------------</font>
01229 <font class="comment">Note that the concept below needs to be worked out for the case of muiltiple</font>
01230 <font class="comment">superiors at each level, i.e. when tracking through the superiors structure,</font>
01231 <font class="comment">all path possibilities must be marked/remembered, instead of just using pe as</font>
01232 <font class="comment">a roadblock. Due to this, and the depth-search itself, it is unclear if this</font>
01233 <font class="comment">functional approach is more or less efficient than the rule-based one. It also</font>
01234 <font class="comment">remains to be seen if this approach follows all the same rules as the rule-based</font>
01235 <font class="comment">approach.</font>
01236 <font class="comment"></font>
01237 <font class="comment">From furthest TD to nearest TD in list of DIL entries:</font>
01238 <font class="comment"></font>
01239 <font class="comment">isgroupsuperior()</font>
01240 <font class="comment">        if (!pe) return false;</font>
01241 <font class="comment">        e = dilgroup.list.head()-&gt;elbyid(*pe);</font>
01242 <font class="comment">        if (!e) return false;</font>
01243 <font class="comment">        if (e-&gt;Target_Date()!=tdate) return false;</font>
01244 <font class="comment">        return true;</font>
01245 <font class="comment"></font>
01246 <font class="comment">while Target_Date()!=tdate</font>
01247 <font class="comment">        pe = NULL</font>
01248 <font class="comment">        while (!isgroupsuperior(pe)) pe = Target_Date_Specified(pe);</font>
01249 <font class="comment">        if (pe-&gt;Projects(0)) pe-&gt;Projects(0)-&gt;_targetdate = tdate;</font>
01250 <font class="comment">        else pe-&gt;parameters-&gt;add_project(...,tdate,...);</font>
01251 <font class="comment">*/</font>
01252 }
01253 
<a name="l01254"></a><a class="code" href="diladmin_8cc.html#a18">01254</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a18">modify_DIL_group_target_dates_cmd</a>(<font class="keywordtype">bool</font> minfragmentation, <a class="code" href="classStringList.html">StringList</a> * qlist = NULL) {
01255 <font class="comment">// Command line interface to modify_DIL_group_target_dates().</font>
01256 <font class="comment">// Reads pairs of DIL entry IDs and desired target dates (with</font>
01257 <font class="comment">// optional -2 code to indicate no target date modification, and</font>
01258 <font class="comment">// -1 to unspecify local target date parameters).</font>
01259 <font class="comment">// Data is read from the DIN stream.</font>
01260 <font class="comment">// If qlist is not NULL then HTML form data is obtained from qlist.</font>
01261         <font class="keyword">const</font> <a class="code" href="classBigRegex.html">BigRegex</a> td(<font class="stringliteral">"^TD\\([0-9]+[.][0-9]+\\)="</font>);
01262         <font class="keyword">const</font> <a class="code" href="classBigRegex.html">BigRegex</a> tdchkbx(<font class="stringliteral">"^TDCHKBX\\([0-9]+[.][0-9]+\\)="</font>);
01263         <font class="keyword">const</font> <a class="code" href="classBigRegex.html">BigRegex</a> pairsep(<font class="stringliteral">"[ \t,:;]+"</font>);
01264         <font class="keyword">const</font> <a class="code" href="classBigRegex.html">BigRegex</a> nonnumerals(<font class="stringliteral">"[^-0-9]"</font>);
01265         <a class="code" href="classString.html">String</a> modifdata;
01266         <font class="keywordflow">if</font> (qlist) { <font class="comment">// HTML form interface</font>
01267                 <a class="code" href="classStringList.html">StringList</a> exclude; <font class="keywordtype">int</font> excludenum = 0;
01268                 <font class="keywordtype">int</font> qnum = qlist-&gt;length()-1; <font class="comment">// *** empty element at end of StringList</font>
01269                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;qnum; i++) {
01270                 <font class="comment">// *** Beware: This code assumes that DIL entry IDs do not</font>
01271                 <font class="comment">//     occur as subsets of other DIL entry IDs, i.e. it</font>
01272                 <font class="comment">//     assumes that a move to IDs with more digits would imply</font>
01273                 <font class="comment">//     prepending older IDs with 0s. This could of course be</font>
01274                 <font class="comment">//     handled by a preprocessing loop.</font>
01275 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01276 <font class="preprocessor"></font>                        cout &lt;&lt; <font class="charliteral">'$'</font> &lt;&lt; (*qlist)[i] &lt;&lt; <font class="charliteral">'\n'</font>;
01277 <font class="preprocessor">#endif</font>
01278 <font class="preprocessor"></font>                        <font class="keywordflow">if</font> ((*qlist)[i].contains(<font class="stringliteral">"TDupdate="</font>)) {
01279                                 <font class="keywordflow">if</font> ((*qlist)[i].after(<font class="charliteral">'='</font>)==<font class="stringliteral">"direct"</font>) minfragmentation = <font class="keyword">false</font>;
01280                                 <font class="keywordflow">else</font> minfragmentation = <font class="keyword">true</font>;
01281                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((*qlist)[i].contains(td)) {
01282                                 modifdata += (*qlist)[i].<a class="code" href="classString.html#a51">at</a>(td.<a class="code" href="classBigRegex.html#a5">subpos</a>(1),td.<a class="code" href="classBigRegex.html#a6">sublen</a>(1)) + <font class="charliteral">' '</font>;
01283                                 <a class="code" href="classString.html">String</a> tdstr = (*qlist)[i].after(<font class="charliteral">'='</font>); <font class="keywordflow">if</font> (tdstr.<a class="code" href="classString.html#a105">length</a>()==0) tdstr = <font class="stringliteral">"-2"</font>;
01284                                 modifdata += tdstr + <font class="charliteral">'\n'</font>;
01285                         } <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((*qlist)[i].contains(tdchkbx)) {
01286                                 <a class="code" href="classString.html">String</a> chkbxid = (*qlist)[i].<a class="code" href="classString.html#a51">at</a>(tdchkbx.<a class="code" href="classBigRegex.html#a5">subpos</a>(1),tdchkbx.<a class="code" href="classBigRegex.html#a6">sublen</a>(1));
01287                                 <a class="code" href="classString.html">String</a> tdstr = (*qlist)[i].after(<font class="charliteral">'='</font>);
01288                                 <font class="keywordflow">if</font> (tdstr==<font class="stringliteral">"noupdate"</font>) { <font class="comment">// set corresponding desired target date to code -2</font>
01289                                         exclude[excludenum] = chkbxid;
01290                                         excludenum++;
01291                                 }
01292                         }
01293                 }
01294                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;excludenum; i++) modifdata.<a class="code" href="classString.html#a89">gsub</a>(<a class="code" href="classBigRegex.html">BigRegex</a>(<a class="code" href="utilities_8cc.html#a18">RX_Search_Safe</a>(exclude[i])+<font class="stringliteral">" [-0-9]*"</font>),exclude[i]+<font class="stringliteral">" -2"</font>);
01295         } <font class="keywordflow">else</font> {
01296                 <font class="keywordflow">if</font> (useansi) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="dil2al_8hh.html#a91">ANSI_BOLD_ON</a>;
01297                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Enter group of DIL entries to consider for target date modification.\n"</font>;
01298                 <font class="keywordflow">if</font> (useansi) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="dil2al_8hh.html#a92">ANSI_BOLD_OFF</a>;
01299                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Rows of DIL entry ID and desired target date pairs.\n\</font>
01300 <font class="stringliteral">Special desired target date codes:\n\</font>
01301 <font class="stringliteral">-1 = set to `unspecified', -2 = no desired target date (but modifiable).\n\</font>
01302 <font class="stringliteral">Separate pairs with any number of spaces, tabs, commas, colons or semicolons.\n\</font>
01303 <font class="stringliteral">End of File (Ctrl+D) or a line stating `EOF' completes data entry.\n\n"</font>;
01304                 <font class="keywordflow">if</font> (useansi) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="dil2al_8hh.html#a93">ANSI_UNDERLINE_ON</a>;
01305                 <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"DIL entry ID#\tdesired target date\n"</font>;
01306                 <font class="keywordflow">if</font> (useansi) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <a class="code" href="dil2al_8hh.html#a94">ANSI_UNDERLINE_OFF</a>;
01307                 <a class="code" href="utilities_8cc.html#a42">read_data_from_stream</a>(<a class="code" href="dil2al_8hh.html#a106">DIN</a>,modifdata,<font class="stringliteral">"EOF"</font>);
01308         }
01309         <a class="code" href="classStringList.html">StringList</a> modiflist(modifdata,<font class="charliteral">'\n'</font>);
01310         <font class="keywordtype">int</font> groupsize = modiflist.<a class="code" href="classStringList.html#a10">length</a>()-1; <font class="comment">// *** last entry empty when initializing from string with separator</font>
01311         <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilgroup; <a class="code" href="classDIL__entry.html">DIL_entry</a> * de; <a class="code" href="classString.html">String</a> did; time_t tdate;
01312 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01313 <font class="preprocessor"></font>        cout &lt;&lt; <font class="stringliteral">"Content-Type: text/plain\n\ndil2al: [DEBUGTIER2]\n"</font>;
01314         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j=0; j&lt;groupsize; j++) {
01315                 <a class="code" href="classString.html">String</a> &amp; s = modiflist[j];
01316                 cout &lt;&lt; s &lt;&lt; <font class="charliteral">'\n'</font>;
01317         }
01318         cout &lt;&lt; <font class="stringliteral">"+++\n"</font>;
01319 <font class="preprocessor">#endif</font>
01320 <font class="preprocessor"></font>        <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;groupsize; i++) {
01321                 did = modiflist[i].after(pairsep); <font class="keywordflow">if</font> (did.<a class="code" href="classString.html#a26">index</a>(nonnumerals)&gt;=0) did = did.<a class="code" href="classString.html#a58">before</a>(nonnumerals);
01322                 tdate = <a class="code" href="utilities_8cc.html#a23">time_stamp_time</a>(did);
01323                 did = modiflist[i].before(pairsep);
01324                 de = <font class="keyword">new</font> <a class="code" href="classDIL__entry.html">DIL_entry</a>(dilgroup,did);
01325                 de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a> = <font class="keyword">new</font> <a class="code" href="classDIL__entry__parameters.html">DIL_entry_parameters</a>(*de);
01326                 de-&gt;<a class="code" href="classDIL__entry.html#m1">parameters</a>-&gt;<a class="code" href="classDIL__entry__parameters.html#a3">project_append</a>(<font class="charliteral">'#'</font>+did,did,<a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a24">DILSUPS_UNB_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a25">DILSUPS_BND_UNSPECIFIED</a>,tdate,0,<a class="code" href="dil2al_8hh.html#a27">DILSUPS_URG_UNSPECIFIED</a>,<a class="code" href="dil2al_8hh.html#a28">DILSUPS_PRI_UNSPECIFIED</a>);
01327                 dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a8">link_before</a>(de);
01328         }
01329 <font class="preprocessor">#ifdef DEBUGTIER1</font>
01330 <font class="preprocessor"></font>        <font class="keywordflow">if</font> (minfragmentation) cout &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER1] Minimum fragmentation\n"</font>; <font class="keywordflow">else</font> cout &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER1] Direct\n"</font>;
01331 <font class="preprocessor">#endif</font>
01332 <font class="preprocessor"></font><font class="preprocessor">#ifdef DEBUGTIER2</font>
01333 <font class="preprocessor"></font>        <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i=0; i&lt;groupsize; i++) {
01334                 cout &lt;&lt; <font class="stringliteral">"dil2al: [DEBUGTIER2] "</font> &lt;&lt; dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a4">el</a>(i)-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\t'</font>;
01335                 <font class="keywordflow">if</font> (dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a4">el</a>(i)-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0)&lt;0) cout &lt;&lt; dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a4">el</a>(i)-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0) &lt;&lt; <font class="charliteral">'\n'</font>;
01336                 <font class="keywordflow">else</font> cout &lt;&lt; <a class="code" href="utilities_8cc.html#a20">time_stamp</a>(<font class="stringliteral">"%Y%m%d%H%M"</font>,dilgroup.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a4">el</a>(i)-&gt;<a class="code" href="classDIL__entry.html#a13">Local_Target_Date</a>(0)) &lt;&lt; <font class="charliteral">'\n'</font>;
01337         }
01338 <font class="preprocessor">#endif</font>
01339 <font class="preprocessor"></font>        <font class="keywordflow">return</font> <a class="code" href="diladmin_8cc.html#a17">modify_DIL_group_target_dates</a>(dilgroup,minfragmentation);
01340 }
01341 
<a name="l01342"></a><a class="code" href="diladmin_8cc.html#a19">01342</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a19">extract_DIL_IDs_from_form</a>(<a class="code" href="classStringList.html">StringList</a> * qlist = NULL) {
01343   <font class="comment">// Form interface that extracts DIL IDs that correspond to checked</font>
01344   <font class="comment">// checkboxes in any form.</font>
01345   <font class="comment">// Known variable names in form: dil2al, DILIDCHKBX&lt;DIL_ID&gt;, processcmd,</font>
01346   <font class="comment">// maxdepth, hierarchyfile.</font>
01347   <font class="keywordflow">if</font> (!qlist) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01348   <font class="keyword">const</font> <a class="code" href="classBigRegex.html">BigRegex</a> dilidchkbx(<font class="stringliteral">"^DILIDCHKBX\\([0-9]+[.][0-9]+\\)="</font>);
01349   <a class="code" href="classStringList.html">StringList</a> dilids; <font class="keywordtype">int</font> dilidsnum = 0;
01350   <font class="comment">// Find checked checkboxes that contain DIL IDs</font>
01351   <font class="keywordtype">int</font> qnum = qlist-&gt;length()-1; <font class="comment">// *** empty element at end of StringList</font>
01352   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;qnum; i++) {
01353     <font class="comment">// *** Beware: The same caveat about the assumed length of DIL IDs applies</font>
01354     <font class="comment">//     as in the modify_DIL_group_target_dates_cmd() function above.</font>
01355 <font class="preprocessor">#ifdef DEBUGTIER2</font>
01356 <font class="preprocessor"></font>    cout &lt;&lt; <font class="charliteral">'$'</font> &lt;&lt; (*qlist)[i] &lt;&lt; <font class="charliteral">'\n'</font>;
01357 <font class="preprocessor">#endif</font>
01358 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((*qlist)[i].contains(dilidchkbx)) {
01359       <a class="code" href="classString.html">String</a> chkbxid = (*qlist)[i].at(dilidchkbx.<a class="code" href="classBigRegex.html#a5">subpos</a>(1),dilidchkbx.<a class="code" href="classBigRegex.html#a6">sublen</a>(1));
01360       <a class="code" href="classString.html">String</a> chkbxval = (*qlist)[i].after(<font class="charliteral">'='</font>);
01361       <font class="keywordflow">if</font> (chkbxval==<font class="stringliteral">"extract"</font>) {
01362         dilids[dilidsnum] = chkbxid;
01363         dilidsnum++;
01364       }
01365     }
01366   }
01367   <font class="comment">// Check if extract or make new hierarchy</font>
01368   <font class="keywordtype">int</font> processcmdidx = qlist-&gt;<a class="code" href="classString.html#a32">contains</a>(<font class="stringliteral">"processcmd"</font>);
01369   <font class="keywordflow">if</font> (processcmdidx&gt;0) <font class="keywordflow">if</font> (<a class="code" href="classString.html">String</a>((*qlist)[processcmdidx].after(<font class="charliteral">'='</font>))==<font class="stringliteral">"newhierarchy"</font>) {
01370     <font class="keywordtype">int</font> depthidx = qlist-&gt;contains(<font class="stringliteral">"maxdepth"</font>), maxdepth = 50;
01371     <font class="keywordflow">if</font> (depthidx&gt;0) maxdepth = atol((<font class="keyword">const</font> <font class="keywordtype">char</font> *) <a class="code" href="classString.html">String</a>((*qlist)[depthidx].after(<font class="charliteral">'='</font>)));
01372     <font class="keywordtype">int</font> hierarchyfileidx = qlist-&gt;contains(<font class="stringliteral">"hierarchyfile"</font>); <a class="code" href="classString.html">String</a> hierarchyfile(<font class="stringliteral">""</font>);
01373     <font class="keywordflow">if</font> (hierarchyfileidx&gt;0) hierarchyfile = <font class="charliteral">'@'</font>+<a class="code" href="classString.html">String</a>((*qlist)[hierarchyfileidx].after(<font class="charliteral">'='</font>))+<font class="charliteral">'@'</font>;
01374     <font class="keywordtype">int</font> expressionsidx = qlist-&gt;<a class="code" href="classString.html#a32">contains</a>(<font class="stringliteral">"expressions"</font>); <a class="code" href="classString.html">String</a> expressions(<font class="stringliteral">""</font>);
01375     <font class="keywordflow">if</font> (expressionsidx&gt;0) expressions = <font class="charliteral">'#'</font>+<a class="code" href="utilities_8cc.html#a79">URI_unescape</a>(<a class="code" href="classString.html">String</a>((*qlist)[expressionsidx].after(<font class="charliteral">'='</font>)));
01376     <font class="keywordtype">int</font> contentfileidx = qlist-&gt;contains(<font class="stringliteral">"contentfile"</font>); <a class="code" href="classString.html">String</a> contentfile(<font class="stringliteral">""</font>);
01377     <font class="keywordflow">if</font> (contentfileidx&gt;0) contentfile = <font class="charliteral">'c'</font>+<a class="code" href="classString.html">String</a>((*qlist)[contentfileidx].after(<font class="charliteral">'='</font>));
01378     <font class="keywordflow">return</font> <a class="code" href="diladmin_8cc.html#a25">DIL_Hierarchy_cmd</a>(hierarchyfile+<font class="stringliteral">"FORM"</font>+dilids.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="charliteral">'+'</font>)+contentfile+expressions,maxdepth);
01379   }
01380   <font class="comment">// Write the DIL IDs to the dilref file</font>
01381   <font class="keywordflow">if</font> (dilidsnum==0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01382   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; dilids.<a class="code" href="classStringList.html#a15">concatenate</a>(<font class="stringliteral">"\n"</font>);
01383   <a class="code" href="classString.html">String</a> dilidsstr;
01384   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;dilidsnum; i++) dilidsstr += <font class="stringliteral">"Current URL      file://"</font>+idfile+<font class="charliteral">'#'</font>+dilids[i]+<font class="charliteral">'\n'</font>;
01385   <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(dilref,dilidsstr,<font class="stringliteral">"Checked DIL IDs"</font>);
01386 }
01387 
<a name="l01388"></a><a class="code" href="diladmin_8cc.html#a20">01388</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a> * topde, <a class="code" href="classDIL__Visualize.html">DIL_Visualize</a> &amp; dv, <font class="keyword">const</font> <font class="keywordtype">int</font> maxdepth, <font class="keywordtype">int</font> depth = 0, <font class="keywordtype">double</font> likelihood = <a class="code" href="dil2al_8hh.html#a23">DILSUPS_REL_UNSPECIFIED</a>) {
01389 <font class="comment">// create a visual representation of a DIL hierarchy from a DIL entry</font>
01390 <font class="comment">// topde must be part of a valid Detailed_Items_List or at least part</font>
01391 <font class="comment">// of a valid PLLHandle&lt;DIL_entry&gt; list.</font>
01392 <font class="preprocessor">#ifdef DEBUG_PLAN_ENTRY</font>
01393 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"Show "</font> &lt;&lt; topde-&gt;<a class="code" href="classDIL__ID.html#a15">chars</a>() &lt;&lt; <font class="charliteral">'\n'</font>; <a class="code" href="dil2al_8hh.html#a107">EOUT</a>.flush();
01394 <font class="preprocessor">#endif</font>
01395 <font class="preprocessor"></font>  <a class="code" href="classDIL__Hierarchy__Level__Data.html">DIL_Hierarchy_Level_Data</a> ld(*topde,likelihood);
01396   dv.<a class="code" href="classDIL__Visualize.html#m0">ldroot</a>.<a class="code" href="classPLLRoot.html#a8">link_before</a>(&amp;ld); <font class="comment">// link into list of level data in this depth first process</font>
01397   dv.<a class="code" href="classDIL__Visualize.html#a2">Attach_Level_Data</a>(ld);
01398   dv.<a class="code" href="classDIL__Visualize.html#a5">Visualize_Element</a>(topde,depth);
01399   dv.<a class="code" href="classDIL__Visualize.html#a3">Detach_Level_Data</a>();
01400   depth++;
01401   <font class="keywordtype">int</font> numdependencies = 0; <font class="keywordtype">double</font> thislevelcumlikelihood = dv.<a class="code" href="classDIL__Visualize.html#a8">get_cumlikelihood</a>();
01402   <font class="keywordflow">if</font> (reversehierarchy) {
01403     <a class="code" href="classDIL__AL__List.html">DIL_AL_List</a> * topdeproj = topde-&gt;<a class="code" href="classDIL__entry.html#a7">Projects</a>(0);
01404     <font class="keywordflow">if</font> (topdeproj) <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__AL__List.html">DIL_AL_List</a>,topdeproj,1) <font class="keywordflow">if</font> (!(e-&gt;Superiorbyid()==topde)) {
01405       <font class="keywordflow">if</font> (maxdepth&gt;=depth) {
01406         dv.<a class="code" href="classDIL__Visualize.html#a9">set_cumlikelihood</a>(thislevelcumlikelihood);
01407         <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(e-&gt;Superiorbyid(),dv,maxdepth,depth,e-&gt;PLAN_OUTCOME_LIKELIHOOD);
01408       } <font class="keywordflow">else</font> numdependencies++;
01409     }
01410   } <font class="keywordflow">else</font> {
01411     <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,topde-&gt;<a class="code" href="classPLLHandle.html#a3">head</a>(),1) <font class="keywordflow">if</font> (e-&gt;Is_Direct_Dependency_Of(topde)) {
01412       <font class="keywordflow">if</font> (maxdepth&gt;=depth) <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(e,dv,maxdepth,depth);
01413       <font class="keywordflow">else</font> numdependencies++;
01414     }
01415   }
01416   <font class="comment">// the following is used to convey benefit/risk information for PLAN</font>
01417   <font class="comment">// entries and if maxdepth was reached and there are further dependencies</font>
01418   dv.<a class="code" href="classDIL__Visualize.html#a2">Attach_Level_Data</a>(ld);
01419   dv.<a class="code" href="classDIL__Visualize.html#a6">Visualize_NotShown</a>(numdependencies,depth);
01420   dv.<a class="code" href="classDIL__Visualize.html#a3">Detach_Level_Data</a>();
01421   <font class="comment">// ld is automatically removed from list of level data in this depth first process</font>
01422 }
01423 
<a name="l01424"></a><a class="code" href="diladmin_8cc.html#a21">01424</a> <a class="code" href="classString.html">String</a> <a class="code" href="diladmin_8cc.html#a21">Tabbed_DIL_Hierarchy</a>(<a class="code" href="classString.html">String</a> dilidstr, <font class="keywordtype">int</font> maxdepth = 50) {
01425 <font class="comment">// visualize a DIL hierarchy starting at dilid with tabs indicating depth</font>
01426         <a class="code" href="classDIL__Visualize__with__Tabs.html">DIL_Visualize_with_Tabs</a> dv;
01427         <font class="comment">// 3. Get optional expressions that must occur in DIL entry content text</font>
01428         <a class="code" href="classString.html">String</a> expressions(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'#'</font>));
01429         <font class="keywordflow">if</font> (!expressions.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'#'</font>);
01430         <font class="comment">// 4. Get optional ContentFile reference</font>
01431         <a class="code" href="classString.html">String</a> contentfile(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'c'</font>));
01432         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'c'</font>);
01433         <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid(dilidstr);
01434         <font class="keywordflow">if</font> (!dilid.<a class="code" href="classDIL__ID.html#a17">valid</a>()) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
01435         <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01436         dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01437         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) dilist.<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>);
01438         <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid),dv,maxdepth);
01439         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(contentfile,dv.<a class="code" href="classDIL__Visualize__with__Tabs.html#a5">Output_Content</a>(),<font class="stringliteral">"DIL Hierarchy Content"</font>)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write "</font> &lt;&lt; contentfile &lt;&lt; <font class="stringliteral">"in Tabbed_DIL_Hierarchy(), continuing as is\n"</font>;
01440         <font class="keywordflow">return</font> dv.<a class="code" href="classDIL__Visualize__with__Tabs.html#a4">Output</a>();
01441 }
01442 
<a name="l01443"></a><a class="code" href="diladmin_8cc.html#a22">01443</a> <a class="code" href="classString.html">String</a> <a class="code" href="diladmin_8cc.html#a22">Tabbed_HTML_DIL_Hierarchy</a>(<a class="code" href="classString.html">String</a> dilidstr, <font class="keywordtype">int</font> maxdepth = 50) {
01444 <font class="comment">// visualize a DIL hierarchy starting at dilid with tabs indicating depth</font>
01445 <font class="comment">// including HREFs and other HTML code, while HTML head and tail code are</font>
01446 <font class="comment">// left to the content in which the extracted hierarchy is embedded</font>
01447 <font class="comment">// Note that since standard output does not know which file the text may</font>
01448 <font class="comment">// be embedded in, HREF file references are absolute. Post-processing may</font>
01449 <font class="comment">// convert those to relative references.</font>
01450         <a class="code" href="classDIL__Visualize__with__HTML__Tabs.html">DIL_Visualize_with_HTML_Tabs</a> dv;
01451         <font class="comment">// 3. Get optional expressions that must occur in DIL entry content text</font>
01452         <a class="code" href="classString.html">String</a> expressions(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'#'</font>));
01453         <font class="keywordflow">if</font> (!expressions.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'#'</font>);
01454         <font class="comment">// 4. Get optional ContentFile reference</font>
01455         <a class="code" href="classString.html">String</a> contentfile(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'c'</font>));
01456         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'c'</font>);
01457         <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid(dilidstr);
01458         <font class="keywordflow">if</font> (!dilid.<a class="code" href="classDIL__ID.html#a17">valid</a>()) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
01459         <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01460         dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01461         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) dilist.<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>);
01462         <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid),dv,maxdepth);
01463         <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(contentfile,dv.<a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a5">Output_Content</a>(),<font class="stringliteral">"DIL Hierarchy Content"</font>)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write "</font> &lt;&lt; contentfile &lt;&lt; <font class="stringliteral">"in Tabbed_HTML_DIL_Hierarchy(), continuing as is\n"</font>;
01464         <font class="keywordflow">return</font> <font class="stringliteral">"&lt;PRE&gt;\n"</font>+dv.<a class="code" href="classDIL__Visualize__with__HTML__Tabs.html#a4">Output</a>()+<font class="stringliteral">"&lt;/PRE&gt;\n"</font>;
01465 }
01466 
<a name="l01467"></a><a class="code" href="diladmin_8cc.html#a23">01467</a> <font class="keywordtype">void</font> <a class="code" href="diladmin_8cc.html#a23">Tabbed_FORM_DIL_Hierarchy_full</a>(<a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> &amp; dilist, <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html">DIL_Visualize_with_FORM_Tabs</a> &amp; dv, <font class="keyword">const</font> <font class="keywordtype">int</font> maxdepth, <a class="code" href="classString.html">String</a> &amp; expressions) {
01468   <font class="comment">// Show full hierarchy with possible restriction to roots containing certain expressions</font>
01469   <a class="code" href="classStringList.html">StringList</a> expressionlist(expressions,<font class="charliteral">'+'</font>);
01470   <font class="keywordtype">int</font> expressionnum = expressionlist.<a class="code" href="classStringList.html#a10">length</a>()-1; <font class="comment">// since an empty extra item is initialized in the StringList</font>
01471   <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;expressionnum; i++) expressionlist[i] = <a class="code" href="utilities_8cc.html#a79">URI_unescape</a>(expressionlist[i]);
01472 <font class="preprocessor">#ifdef DEBUG_HIERARCHY_EXPRESSIONS</font>
01473 <font class="preprocessor"></font>  <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;expressionnum; i++) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; expressionlist["</font> &lt;&lt; i &lt;&lt; <font class="stringliteral">"] = "</font> &lt;&lt; expressionlist[i] &lt;&lt; <font class="charliteral">'\n'</font>;
01474 <font class="preprocessor">#endif</font>
01475 <font class="preprocessor"></font>  <font class="keywordflow">if</font> (dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a10">Set_Semaphores</a>(1); <font class="comment">// initialize all as valid to show</font>
01476   <font class="comment">// if specific expressions are selected, test for their presence</font>
01477   <font class="keywordflow">if</font> (expressionnum&gt;0) <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) {
01478     <a class="code" href="classString.html">String</a> * cptr = e-&gt;Entry_Text();
01479     <font class="keywordflow">if</font> (!cptr) e-&gt;Set_Semaphore(0);
01480     <font class="keywordflow">else</font> <font class="keywordflow">if</font> (expressionlist.<a class="code" href="classStringList.html#a13">first_contained_in</a>(*cptr)&lt;0) e-&gt;Set_Semaphore(0);
01481   }
01482   <font class="comment">// show the desired entries of the full DIL hierarchy</font>
01483   <font class="keywordflow">if</font> (reversehierarchy) <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) {
01484     <font class="keywordflow">if</font> ((e-&gt;Get_Semaphore()&gt;0) &amp;&amp; (!dilist.<a class="code" href="classDetailed__Items__List.html#a0">Entry_Has_Dependencies</a>(e,<font class="keyword">true</font>))) <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(e,dv,maxdepth);
01485   } <font class="keywordflow">else</font> <a class="code" href="templates_8classic_8hh.html#a1">PLL_LOOP_FORWARD</a>(<a class="code" href="classDIL__entry.html">DIL_entry</a>,dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>(),1) <font class="keywordflow">if</font> ((e-&gt;Get_Semaphore()&gt;0) &amp;&amp; (!e-&gt;Has_Superiors(<font class="keyword">true</font>))) <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(e,dv,maxdepth);
01486 }
01487 
<a name="l01488"></a><a class="code" href="diladmin_8cc.html#a24">01488</a> <a class="code" href="classString.html">String</a> <a class="code" href="diladmin_8cc.html#a24">Tabbed_FORM_DIL_Hierarchy</a>(<a class="code" href="classString.html">String</a> dilidstr, <font class="keywordtype">int</font> maxdepth = 50) {
01489 <font class="comment">// Visualize a DIL hierarchy starting at dilid with tabs indicating depth</font>
01490 <font class="comment">// including HREFs and other HTML code, while HTML head and tail code are</font>
01491 <font class="comment">// left to the content in which the extracted hierarchy is embedded.</font>
01492 <font class="comment">// A comment is included that enables commenting out of process output simply</font>
01493 <font class="comment">// by appending "&lt;!-- " to the head code.</font>
01494 <font class="comment">// Note that since standard output does not know which file the text may</font>
01495 <font class="comment">// be embedded in, HREF file references are absolute. Post-processing may</font>
01496 <font class="comment">// convert those to relative references.</font>
01497 <font class="comment">// This output presents FORM check boxes and a "submit" button that extracts</font>
01498 <font class="comment">// checked DIL IDs with the aid of dil2al form processing.</font>
01499 <font class="comment">// There is also a "new hierarchy" button that uses the checked boxes as</font>
01500 <font class="comment">// the top items in new hierarchies to visualize.</font>
01501 <font class="preprocessor">#ifdef DEBUG_HIERARCHY_EXPRESSIONS</font>
01502 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; Tabbed_FORM_DIL_Hierarchy: dilidstr = "</font> &lt;&lt; dilidstr &lt;&lt; <font class="charliteral">'\n'</font>;
01503 <font class="preprocessor">#endif</font>
01504 <font class="preprocessor"></font>  <a class="code" href="classDIL__Visualize__with__FORM__Tabs.html">DIL_Visualize_with_FORM_Tabs</a> dv;
01505   <font class="comment">// 3. Get optional expressions that must occur in DIL entry content text</font>
01506   <a class="code" href="classString.html">String</a> expressions(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'#'</font>));
01507   <font class="keywordflow">if</font> (!expressions.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'#'</font>);
01508   <font class="comment">// 4. Get optional ContentFile reference</font>
01509   <a class="code" href="classString.html">String</a> contentfile(dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'c'</font>));
01510   <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) dilidstr = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'c'</font>);
01511   <font class="comment">// dilidstr may now contain no, one or several DIL IDs</font>
01512   <a class="code" href="classDetailed__Items__List.html">Detailed_Items_List</a> dilist;
01513   dilist.<a class="code" href="classDetailed__Items__List.html#a2">Get_All_DIL_ID_File_Parameters</a>();
01514   dilist.<a class="code" href="classDetailed__Items__List.html#a3">Get_All_Topical_DIL_Parameters</a>(<font class="keyword">true</font>); <font class="comment">// always get for FORM hierarchy</font>
01515   <font class="keywordflow">if</font> (!dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()) <font class="keywordflow">return</font> <a class="code" href="classString.html">String</a>(<font class="stringliteral">""</font>);
01516   <font class="keywordflow">if</font> (dilidstr.<a class="code" href="classString.html#a106">empty</a>()) { <font class="comment">// full hierarchy</font>
01517     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"No specific DIL ID, creating full hierarchy\n"</font>;
01518     <font class="comment">// *** Is implemented in ~/doc/html/lists.html: maxdepth = 5; // reduced depth for full hierarchy</font>
01519     <a class="code" href="diladmin_8cc.html#a23">Tabbed_FORM_DIL_Hierarchy_full</a>(dilist,dv,maxdepth,expressions);
01520   } <font class="keywordflow">else</font> {
01521         <a class="code" href="classStringList.html">StringList</a> dilidlist(dilidstr,<font class="charliteral">'+'</font>); <font class="keywordtype">int</font> dilidnum = dilidlist.<a class="code" href="classStringList.html#a10">length</a>();
01522         <a class="code" href="classDIL__ID.html">DIL_ID</a> dilid;
01523         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i&lt;dilidnum; i++) {
01524                 dilid = dilidlist[i];
01525                 <font class="keywordflow">if</font> (dilid.<a class="code" href="classDIL__ID.html#a17">valid</a>()) {
01526                         <a class="code" href="diladmin_8cc.html#a20">Show_DIL_Hierarchy</a>(dilist.<a class="code" href="classDetailed__Items__List.html#m0">list</a>.<a class="code" href="classPLLRoot.html#a2">head</a>()-&gt;<a class="code" href="classDIL__entry.html#a4">elbyid</a>(dilid),dv,maxdepth);
01527                         dv.<a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a6">Append</a>(<font class="stringliteral">"&lt;HR&gt;\n"</font>);
01528                 }
01529         }
01530         <font class="keywordflow">if</font> (!expressions.<a class="code" href="classString.html#a106">empty</a>()) <a class="code" href="diladmin_8cc.html#a23">Tabbed_FORM_DIL_Hierarchy_full</a>(dilist,dv,maxdepth,expressions);
01531   }
01532   <font class="keywordflow">if</font> (!contentfile.<a class="code" href="classString.html#a106">empty</a>()) <font class="keywordflow">if</font> (!<a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(contentfile,dv.<a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a5">Output_Content</a>(),<font class="stringliteral">"DIL Hierarchy Content"</font>)) <a class="code" href="dil2al_8hh.html#a107">EOUT</a> &lt;&lt; <font class="stringliteral">"dil2al: Unable to write "</font> &lt;&lt; contentfile &lt;&lt; <font class="stringliteral">"in Tabbed_HTML_DIL_Hierarchy(), continuing as is\n"</font>;
01533   <font class="comment">// prepare the FORM output</font>
01534   <a class="code" href="classString.html">String</a> formoutputstr(<font class="stringliteral">"&lt;!-- comment out process output --&gt;&lt;B&gt;Maximum Depth = "</font>);
01535   formoutputstr += <a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) maxdepth)+<font class="stringliteral">"&lt;/B&gt;\n&lt;FORM METHOD=\"GET\" ACTION=\"/cgi-bin/dil2al\"&gt;&lt;INPUT type=\"hidden\" name=\"dil2al\" value=\"D\"&gt;\n&lt;PRE&gt;\n"</font>+dv.<a class="code" href="classDIL__Visualize__with__FORM__Tabs.html#a4">Output</a>()+<font class="stringliteral">"&lt;/PRE&gt;\n&lt;P&gt;\n&lt;INPUT type=\"radio\" name=\"processcmd\" value=\"extract\"&gt; Extract\n&lt;BR&gt;&lt;INPUT type=\"radio\" name=\"processcmd\" value=\"newhierarchy\" checked&gt; New Hierarchy with depth: &lt;INPUT type=\"text\" name=\"maxdepth\" value=\""</font> + <a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) maxdepth) + <font class="stringliteral">"\" maxlength=5&gt; and excerpt length: &lt;INPUT type=\"text\" name=\"setpar__EQ__hierarchyexcerptlength\" value=\""</font>+<a class="code" href="classString.html">String</a>((<font class="keywordtype">long</font>) hierarchyexcerptlength)+<font class="stringliteral">"\" maxlength=5&gt; &lt;INPUT type=\"radio\" name=\"setpar\" value=\"noreversehierarchy\""</font>;
01536   <font class="keywordflow">if</font> (!reversehierarchy) formoutputstr += <font class="stringliteral">" checked"</font>;
01537   formoutputstr += <font class="stringliteral">"&gt; top-down &lt;INPUT type=\"radio\" name=\"setpar\" value=\"reversehierarchy hierarchyplanparse\""</font>;
01538   <font class="keywordflow">if</font> (reversehierarchy) formoutputstr += <font class="stringliteral">" checked"</font>;
01539   formoutputstr += <font class="stringliteral">"&gt; bottom-up &lt;INPUT type=\"checkbox\" name=\"expressions\" value=\"%40begin%3A%20PLAN%20DIL%20TEMPLATE\""</font>;
01540   <font class="keywordflow">if</font> (!expressions.<a class="code" href="classString.html#a106">empty</a>()) formoutputstr += <font class="stringliteral">" checked"</font>;
01541   formoutputstr += <font class="stringliteral">"&gt; PLAN entries only\n&lt;BR&gt;&lt;INPUT type=\"submit\" value=\"Process\"&gt; &lt;INPUT type=\"reset\"&gt;&lt;/FORM&gt;\n"</font>;
01542   <font class="keywordflow">return</font> formoutputstr;
01543 }
01544 
<a name="l01545"></a><a class="code" href="diladmin_8cc.html#a25">01545</a> <font class="keywordtype">bool</font> <a class="code" href="diladmin_8cc.html#a25">DIL_Hierarchy_cmd</a>(<a class="code" href="classString.html">String</a> dilidstr, <font class="keywordtype">int</font> maxdepth = 50) {
01546 <font class="comment">// visualize a DIL hierarchy</font>
01547 <font class="preprocessor">#ifdef DEBUG_HIERARCHY_EXPRESSIONS</font>
01548 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; DIL_Hierarchy_cmd: dilidstr = "</font> &lt;&lt; dilidstr &lt;&lt; <font class="charliteral">'\n'</font>;
01549 <font class="preprocessor">#endif</font>
01550 <font class="preprocessor"></font>  <a class="code" href="classString.html">String</a> hierarchyfile(<font class="stringliteral">""</font>);
01551   <font class="comment">// 1. Get optional @f@ hierarchyfile reference</font>
01552   <font class="keywordflow">if</font> ((dilidstr.<a class="code" href="classString.html#a105">length</a>()&gt;=2) &amp;&amp; (dilidstr[0]==<font class="charliteral">'@'</font>)) {
01553     dilidstr.<a class="code" href="classString.html#a83">del</a>(0,1);
01554     hierarchyfile = dilidstr.<a class="code" href="classString.html#a58">before</a>(<font class="charliteral">'@'</font>);
01555     dilidstr = dilidstr.<a class="code" href="classString.html#a76">after</a>(<font class="charliteral">'@'</font>);
01556   }
01557 <font class="preprocessor">#ifdef DEBUG_HIERARCHY_EXPRESSIONS</font>
01558 <font class="preprocessor"></font>  <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; DIL_Hierarchy_cmd: hierarchyfile = "</font> &lt;&lt; hierarchyfile &lt;&lt; <font class="stringliteral">" dilidstr = "</font> &lt;&lt; dilidstr &lt;&lt; <font class="charliteral">'\n'</font>;
01559 <font class="preprocessor">#endif</font>
01560 <font class="preprocessor"></font>  <font class="comment">// 2. Get optional type identifier</font>
01561   <font class="keywordflow">if</font> ((dilidstr.<a class="code" href="classString.html#a105">length</a>()&gt;=4) &amp;&amp; (<a class="code" href="classString.html">String</a>(dilidstr.<a class="code" href="classString.html#a58">before</a>(4))==<font class="stringliteral">"FORM"</font>)) {
01562     dilidstr = dilidstr.<a class="code" href="classString.html#a70">from</a>(4);
01563 <font class="preprocessor">#ifdef DEBUG_HIERARCHY_EXPRESSIONS</font>
01564 <font class="preprocessor"></font>    <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&amp;&amp;&amp; DIL_Hierarchy_cmd: type is FORM, dilidstr = "</font> &lt;&lt; dilidstr &lt;&lt; <font class="charliteral">'\n'</font>;
01565 <font class="preprocessor">#endif</font>
01566 <font class="preprocessor"></font>    <font class="keywordflow">if</font> ((calledbyforminput) &amp;&amp; (hierarchyfile.<a class="code" href="classString.html#a106">empty</a>())) <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"&lt;/PRE&gt;&lt;!-- "</font>; <font class="comment">// clean up HTML output (dil2al processing output can still be inspected by looking at the HTML source)</font>
01567     dilidstr = <a class="code" href="diladmin_8cc.html#a24">Tabbed_FORM_DIL_Hierarchy</a>(dilidstr,maxdepth);
01568     <font class="comment">// *** If I want to give hierarchy.html a proper head and tail then I</font>
01569     <font class="comment">//     can detect "if ((!hierarchyfile.empty()) &amp;&amp; (!dilidstr.empty()))"</font>
01570     <font class="comment">//     here and prepend the head and append the tail to dilidstr if true.</font>
01571   } <font class="keywordflow">else</font> <font class="keywordflow">if</font> ((dilidstr.<a class="code" href="classString.html#a105">length</a>()&gt;4) &amp;&amp; (<a class="code" href="classString.html">String</a>(dilidstr.<a class="code" href="classString.html#a58">before</a>(4))==<font class="stringliteral">"HTML"</font>)) {
01572     dilidstr = dilidstr.<a class="code" href="classString.html#a70">from</a>(4);
01573     dilidstr = <a class="code" href="diladmin_8cc.html#a22">Tabbed_HTML_DIL_Hierarchy</a>(dilidstr,maxdepth);
01574   } <font class="keywordflow">else</font> dilidstr = <a class="code" href="diladmin_8cc.html#a21">Tabbed_DIL_Hierarchy</a>(dilidstr,maxdepth);
01575   <font class="keywordflow">if</font> (dilidstr.<a class="code" href="classString.html#a106">empty</a>()) <font class="keywordflow">return</font> <font class="keyword">false</font>;
01576   <font class="keywordflow">if</font> (!hierarchyfile.<a class="code" href="classString.html#a106">empty</a>()) {
01577     <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; <font class="stringliteral">"Writing DIL Hierarchy to file "</font> &lt;&lt; hierarchyfile &lt;&lt; <font class="stringliteral">" (&lt;A HREF=\"file://"</font> &lt;&lt; hierarchyfile &lt;&lt; <font class="stringliteral">"\"&gt;"</font> &lt;&lt; hierarchyfile &lt;&lt; <font class="stringliteral">"&lt;/A&gt;\n"</font>;
01578     <font class="keywordflow">return</font> <a class="code" href="utilities_8cc.html#a41">write_file_from_String</a>(hierarchyfile,dilidstr,<font class="stringliteral">"DIL Hierarchy"</font>);
01579   }
01580   <a class="code" href="dil2al_8hh.html#a108">VOUT</a> &lt;&lt; dilidstr;
01581   <font class="keywordflow">return</font> <font class="keyword">true</font>;
01582 }
</pre></div><hr><address align="right"><small>Generated on Mon Sep 13 14:53:10 2004 for dil2al by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
